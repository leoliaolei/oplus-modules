/*! oplus-udp 0.4.4 built at 2018-02-05T03:51:59.984Z*/
angular.module("oplus.udp",["ui.router.state.events","localytics.directives","angularFileUpload","ngclipboard","ui.sortable","ui.codemirror","easypiechart","oplus.commons","oplus.uaa","oplus.dts","oplus.jat"]),function(){angular.module("oplus.udp").service("errorHandler",[function(){var e={},n=3;this.processError=function(e,n){if("ERROR_STOPPER"===e.name)return console.error(e.message);console.error(n,e)},this.stopOverError=function(t,a,i){if(e[t]>n){var l=new Error;if(l.name="ERROR_STOPPER",l.message=a,!angular.isFunction(i))throw l;i(l)}},this.clearError=function(n){e[n]=void 0,delete e[n]},this.accumulateError=function(n){e[n]=(e[n]||0)+1}}]).factory("$exceptionHandler",["errorHandler",function(e){return function(n,t){e.processError(n,"$exceptionHandler")}}])}(),function(){"use strict";function e(e){e.state("app.udp",{url:"/udp/pages",views:{"":{templateUrl:"app/modules/udp/page-grid.html",controller:"PageListCtrl",controllerAs:"$pl"}}}).state("app.udp.pagelist",{url:"/list",views:{"":{templateUrl:"app/modules/udp/page-list.html",controller:"FolderListCtrl"}}}).state("app.udp.pagelist.browse",{url:"/:pageId/browse",views:{browser:{templateUrl:"app/modules/udp/page-view.html",controller:"PageViewCtrl"}},resolve:{page:["$stateParams","pageService",function(e,n){return n.findPage(e.pageId)}],pageParams:[function(){return{}}],_viewOptions:function(){return{mode:"browser"}}}}).state("app.udp_pagenew",{url:"/udp/page/new",views:{"":{templateUrl:"app/modules/udp/page-designer.html",controller:"PageDesignerCtrl"}},resolve:{page:function(){return{}}}}).state("app.udp_pageview",{url:"/udp/page/{pageId}",views:{"":{templateUrl:"app/modules/udp/page-view.html",controller:"PageViewCtrl"}},resolve:{page:["$stateParams","pageService",function(e,n){return n.findPage(e.pageId)}],pageParams:["$state","pageHistory",function(e,n){return"app.udp_pageview"!==e.current.name&&n.empty(),{}}],_viewOptions:function(){return{mode:"normal"}}}}).state("app.udp_pageview_full",{url:"/udp/page/:pageId/full",views:{"":{templateUrl:"app/modules/udp/page-view-full.html",controller:"PageViewCtrl"}},resolve:{page:["$stateParams","pageService",function(e,n){return n.findPage(e.pageId)}],pageParams:[function(){return{}}],_viewOptions:function(){return{mode:"full"}}}}).state("app.udp_pageedit",{url:"/udp/page/:pageId/edit",views:{"":{templateUrl:"app/modules/udp/page-designer.html",controller:"PageDesignerCtrl"}},resolve:{page:["$stateParams","pageService",function(e,n){return n.findPage(e.pageId)}]}})}function n(e){e.state("app.udp_pageedit.configWidget",{url:"/w/:widgetId",views:{widget_config_model:{controller:["$stateParams","$scope","$state","$interval","widgetConfigHelper",function(e,n,t,a,i){var l=e.widgetId,o=a(function(){var e=$("#"+l);e.length>0&&(a.cancel(o),i.showConfigModal(e,n).then(function(){t.go("^")}))},300,30)}]}}})}angular.module("oplus.udp").config(["$stateProvider",function(t){e(t),n(t)}])}(),function(){"use strict";function e(e,n){var t="oplus.udp.pages",a=n.createDao(t),i=this;this.findPage=a.findEntity,this.findAllPages=function(n){var t=e.defer();return n=n||{},a.findAllEntities().then(function(e){n.noContent&&e.forEach(function(e){delete e.html}),t.resolve(e)}).catch(function(e){t.reject(e)}),t.promise},this.findPageByFolder=function(n){var t=e.defer();return n=n||{},a.findAllEntities().then(function(e){n.noContent&&e.forEach(function(e){delete e.html});var a=[];e.forEach(function(e){e.folderId==n&&a.push(e)}),t.resolve(a)}).catch(function(e){t.reject(e)}),t.promise},this.savePage=a.saveEntity,this.deletePage=a.deleteEntity,this.importPages=function(n,t){var l=e.defer();return i.findAllPages().then(function(e){for(var n=e.length;n--;){var i=e[n];_.find(t,{id:i.id})&&e.splice(n,1)}var o=e.concat(t);a.saveAllEntities(o),l.resolve({num:t.length})}).catch(function(e){l.reject(e)}),l.promise},this.exportPages=function(){var e=new Blob([localStorage.getItem(t)],{type:"text/plain;charset=utf-8"});saveAs(e,"oplus-pages-backup.json")}}angular.module("oplus.udp").service("_pageLocalDao",e),e.$inject=["$q","localDaoFactory","currentUser"]}(),function(){"use strict";function e(e,n){var t="udp";this.findPage=function(e){return console.log("findPage",e),n.callApi(t,"GET","/api/udp/pages/{id}",{id:e})},this.findAllPages=function(e){return n.callApi(t,"GET","/api/udp/pages")},this.findPageByFolder=function(e){return n.callApi(t,"GET","/api/udp/folder/{id}/pages",{id:e})},this.savePage=function(e){return e.id?n.callApi(t,"PUT","/api/udp/pages",null,e):n.callApi(t,"POST","/api/udp/pages",null,e)},this.deletePage=function(e){return n.callApi(t,"DELETE","/api/udp/pages/{id}",{id:e})},this.clonePage=function(e){return n.callApi(t,"GET","/api/udp/pages/clone/"+e)},this.importPages=function(e,a){for(var i=0;i<a.length;i++)a[i].modifiedAt=new Date(a[i].modifiedAt),a[i].createdAt=new Date(a[i].createdAt),a[i].setting=angular.fromJson(a[i].setting);return n.callApi(t,"POST","/api/udp/pages/import/"+e,null,a)},this.exportPages=function(){n.callApi(t,"GET","/api/udp/pages/export").then(function(e){var n=new Blob([angular.toJson(e)],{type:"text/plain;charset=utf-8"});saveAs(n,"oplus-pages-backup.json")}).catch(function(e){throw e})}}angular.module("oplus.udp").service("_pageRemoteDao",e),e.$inject=["$http","restUtils"]}(),function(){"use strict";function e(){var e=!1;this.useLocalDb=function(n){e=n},this.$get=["_pageLocalDao","_pageRemoteDao",function(n,t){return e?n:t}]}angular.module("oplus.udp").provider("pageDao",e),e.$inject=[]}(),function(){"use strict";angular.module("oplus.udp").service("devel",function(){this.isClientInDevMode=function(){return/^http:\/\/localhost/.test(location.href)}})}(),function(){"use strict";function e(e,n,t,a,i,l,o,s,r,c,d,u,p,g,f,m,b){function v(){if(!m.isAuthenticated)throw g.alertError("程序错误","此操作必须登录后才能执行"),new Error("401")}function h(){D=[],l.pasteWidgetEnabled=!1}function w(e,n){var t,a={SheetNames:[],Sheets:{}},i=$(n).find("table");if(0!==i.length){i.each(function(e,n){if(!$(n).hasClass("js-table-for-grid")){t=XLSX.utils.table_to_sheet(n);var i="Sheet"+(e+1);a.SheetNames.push(i),a.Sheets[i]=t}});var l={bookType:"xlsx",bookSST:!1,type:"binary"},o=XLSX.write(a,l);saveAs(new Blob([function(e){for(var n=new ArrayBuffer(e.length),t=new Uint8Array(n),a=0;a!==e.length;++a)t[a]=255&e.charCodeAt(a);return n}(o)],{type:"application/octet-stream"}),e+".xlsx")}else g.alert("导出Excel","页面没有表格数据")}function y(){var e=i.absUrl();return e.substring(0,e.indexOf("/index.html")+1)}function x(n,t){var a=p.getApiUrl("pdf","/api/udp/page/{pageId}/export/{type}",{pageId:"unused",type:"pdf"}),i={html:t,baseUrl:y()};e({method:"POST",url:a,data:i,responseType:"arraybuffer"}).then(function(e){saveAs(new File([e.data],n+".pdf",{type:"application/pdf"}))},function(e){console.error(e)})}function k(t){function a(e){return e=e.replace(/^\s*\n/gm,"")}t=t||{};var i=n.defer(),l=$("html").clone(),o=l.find("body");return l.find("uwidget").each(function(){var e=$(this),n=e.attr("uw-type"),t=JSON.parse(e.attr("uw-props")||"{}"),a=b.lookupWidgetDef(n).contentBuilder;a&&angular.isFunction(a.makePrintable)&&a.makePrintable(e,t)}),function(){l.find("script, style, iframe, .alert button.close, .ui-resizable-handle, #toast-container, .daterangepicker.dropdown-menu, .uw-buttons, .uw-params, .uwtype-timer").remove();var e=l.find("*");e.removeAttr("ng-init ng-class ng-controller").removeClass("ng-binding ng-scope ng-isolate-scope"),e.contents().each(function(){this.nodeType===Node.COMMENT_NODE&&$(this).remove()})}(),l.find("input").each(function(){var e=$(this),n=e.val();e.replaceWith('<span class="control-input">'+n+"</span>")}),l.find("select").each(function(){var e=$(this),n=e.find("option:selected").text();e.replaceWith('<span class="control-input">'+n+"</span>")}),o.children().wrapAll("<div></div>"),o.find("> div").replaceWith(l.find("udp-page-display").eq(0)),function(){var e=$("udp-page-display canvas");o.find("canvas").each(function(n,t){var a=$(this),i=a.width(),l=a.height(),o=$('<img src="'+e[n].toDataURL("image/png")+'"/>');o.attr("width",i).attr("height",l),a.replaceWith(o)})}(),t.removeGrid&&function(){function e(){return $("<table></table>").addClass("js-table-for-grid").attr("width","100%").css("table-layout","fixed").css("border-collapse","unset")}l.find(".row").each(function(n){var t,a,i=$(this),l=i.find("> div"),o=$("<div></div>"),s=0;l.each(function(n){var i,l=$(this),r=l.attr("class").match(/col-sm-(e?)([0-9]+)/),c=100;r&&(c="e"===r[1]?100/r[2]:100/12*r[2]),i=$("<td></td>").attr("valign","top").css("width",c+"%").append(l.children()),l.remove(),s+=c,(!a||s>100)&&(t=e().appendTo(o),a=$("<tr></tr>").appendTo(t),s=c),a.append(i)}),t||(t=e().appendTo(o)),t.attr("width",s+"%"),i.replaceWith(o)})}(),t.header&&o.prepend('<div id="pageHeader" style="height:60px;background-color: lightblue">Oplus</div>'),t.footer&&o.append('<div id="pageFooter" style="height:50px;background-color: lightgray">'+new Date+"</div>"),function(){var e=["uw-props","ng-repeat","ng-if","ng-click"],n=l.find("*");e.forEach(function(e){n.removeAttr(e)})}(),function(){function e(){o.find("table.dataTable > thead").find("tr, tr th, tr div").removeAttr("style")}function a(e,t){var a=n.defer(),i=e.DataTable();return i.on("draw",function(){l.eq(t).replaceWith(e[0].outerHTML),a.resolve()}),i.page.len(-1).draw(),a.promise}var i=n.defer(),l=o.find(".dataTables_wrapper");if(t.fulldata){var s=[];$("body").find(".dataTables_wrapper").each(function(e,n){var t=$(".dataTables_scrollBody table.dataTable",n);s.push(a(t,e))}),n.all(s).then(function(){e(),i.resolve()}).catch(function(e){i.reject(e)})}else l.each(function(n,t){var a=$(".dataTables_scrollBody table.dataTable",t);l.eq(n).replaceWith(a[0].outerHTML),e()}),i.resolve();return i.promise}().then(function(){e.get("content/css/oplus-udp-printable.css").then(function(e){var n=e.data;t.embedStyle&&(l.find("head > link").remove(),l.find("head").append('<style type="text/css">'+n+"</style>"));var o="<!DOCTYPE html>"+l[0].outerHTML;o=a(o),i.resolve(o)})}).catch(function(e){i.reject(e)}),i.promise}function P(e,n){var t=$("<div>"+e+"</div>");return t.find(".uwidget, .widget-layout").each(function(e){var n=$(this),t=n.attr("id");t&&0===t.indexOf("ui-id-")&&n.removeAttr("id").widgetUid(),n.find(".ui-resizable-handle").remove(),n.find(".uw-buttons").remove(),n.removeClass("ng-isolate-scope ui-draggable ng-scope");var a=n.attr("uw-type")||"";a&&a.indexOf("layout-")<0&&a.indexOf("text-")<0&&n.empty()}),t.find("[ng-transclude]").each(function(e){var n=$(this);if(n.html())try{n.replaceWith(n.children())}catch(e){console.error(e.message),n.remove()}else n.remove()}),n&&t.find(".uw-buttons,.uw-symbol").remove(),t.html()}var C=this,D=[];this.PAGE_WRAPPER_SELECTOR=".js-page-wrapper",this.findPage=function(e){return d.findPage(e).then(function(t){return t?n.resolve(t):(g.alertError("找不到页面","<p>找不到页面 "+e+"，可能的原因是：</p><ul><li>此页面从外部导入，需要修改页面内嵌的链接</li></ul>"),n.reject(new Error("ResourceNotFound:"+e)))}).catch(function(e){return n.reject(e)})},this.findAllPages=d.findAllPages,this.findPageByFolder=d.findPageByFolder,this.savePage=function(e){return v(),e.id?(e.modifiedBy=m.loginId,e.modifiedName=m.displayName):(e.createdBy=m.loginId,e.createdName=m.displayName,e.modifiedBy=m.loginId,e.modifiedName=m.displayName),d.savePage(e)},this.deletePage=d.deletePage,this.importPages=d.importPages,this.exportPages=d.exportPages,this.clonePage=d.clonePage,this.openPage=function(e,d,u,p){function g(){var n=t.href("app.udp_pageview",{pageId:e})+"?";return/^#\//.test(n)&&(n=n.substring(1)),Object.keys(d).forEach(function(e){n+=e+"="+d[e]+"&"}),n}function m(t){function i(){var e;return(e="popover"===t?angular.element('<div class="udp-page-popover"></div>').appendTo("body"):p.current?$(p.current).closest("udp-page-display").find(u):$(u))&&e.length>0?e.eq(0):null}function r(e,n,t){var a={};return a.$scope=e,a.$scope.$resolve={},angular.forEach(n,function(e,n){t&&(a[n]=e),a.$scope.$resolve[n]=e}),a}var c=function(){var e;return p.scope&&(e=p.scope),e||p.current&&(e=angular.element(p.current).scope()),e?f.findPageScope(e):l}().$new(),g=C.findPage(e).then(function(e){return n.resolve({page:e,pageParams:d,_viewOptions:{mode:t}})}),m={templateUrl:"app/modules/udp/page-view-child.html",controller:"PageViewCtrl"};n.all([function(e){return e.template?n.when(e.template):s(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}(m),g]).then(function(e){var n=r(c,e[1],!0),t=(a(m.controller,n),i());if(!t)throw new Error('Cannot find target element "'+u+'" to open page');t.addClass("js-openpage-container"),t.closest(".udp-page-view").prev(".udp-float-actions").hide(),t.children().hide(),t.append(o(e[0])(c))},function(e){throw e})}d=d||{},"_dialog"===u?r.open({templateUrl:"app/modules/udp/page-view-dialog.html",controller:"PageViewCtrl",resolve:{page:function(){return C.findPage(e)},pageParams:function(){return d},_viewOptions:function(){return{mode:"dialog"}}},size:"lg"}):"_self"===u?function(){var e=g();c(function(){i.url(e)})}():"_blank"===u?function(){var e=g();e=window.location.origin+window.location.pathname+"#"+e,window.open(e)}():m("_popover"===u?"popover":"child")},this.loadPageTemplate=function(t){var a=n.defer(),i="app/modules/udp/assets/templates/"+(t=t||"default")+".html";return e.get(i).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},this.tidyHtml=P,this.buildPageCss=function(e,n){var t="bg-white-only";if("_CUSTOM"!==e){var a=u.findPageTheme(e);a&&a.css&&(t=a.css)}return n&&(t+=" "+n),t},this.genSourceCode=function(){var e=P($(C.PAGE_WRAPPER_SELECTOR).html(),!1),n={};return html_beautify(e,n)},this.parseExportFile=function(e){return JSON.parse(e)},this.exportCurrentView=function(e,n){if("pdf"===e)k({embedStyle:!0,removeGrid:!0}).then(function(e){x(n,e)}).catch(function(e){throw e});else if("word"===e)k({embedStyle:!0,removeGrid:!0}).then(function(e){saveAs(htmlDocx.asBlob(e),n+".docx")}).catch(function(e){throw e});else if("excel"===e)k({fulldata:!0}).then(function(e){w(n,e)}).catch(function(e){throw e});else{if("html"!==e)throw new Error("Unsupported export file format "+e);k({embedStyle:!0,removeGrid:!0}).then(function(e){window.open().document.write(e)}).catch(function(e){throw e})}},this.emailPage=function(e,n,t){k({embedStyle:!0,removeGrid:!0}).then(function(t){return p.sendEmail(e,n,t)}).then(function(){g.toast("success","邮件已发送给"+e)}).catch(function(e){g.toast("error","无法发送邮件："+(e.message||"无法连接服务"))}).finally(function(){t()})},this.copyWidget=function(e){var n=e.clone().removeAttr("id").removeAttr("class").prop("outerHTML");D[0]=n,l.pasteWidgetEnabled="copy"},this.pasteWidget=function(e,n,t){function a(n){var t=e.attr("uw-type");f.isLayoutWidget(t)?f.isColWidget(t)&&e.find(".uw-column, .uw-float").append(n):e.after(n)}var i;D.length>0&&!(i=D[0])||(t?(a(i),h()):a(o(i)(n)))},this.cutWidget=function(e){D[0]=e,console.log("cutWidget",e),l.pasteWidgetEnabled="cut"}}angular.module("oplus.udp").service("pageService",e),e.$inject=["$http","$q","$state","$controller","$location","$rootScope","$compile","$templateRequest","$uibModal","$timeout","pageDao","themeService","restUtils","messageService","widgetUiHelper","currentUser","widgetFactory"]}(),function(){function e(e){var n=10,t=[];this.push=function(e,a,i){_.remove(t,{pageId:e}),t.length>=n&&t.splice(0,1),t.push({pageId:e,params:a,title:i})},this.all=function(){return t},this.empty=function(){t=[]},this.go=function(n){var a=t[n];e.openPage(a.pageId,a.params,"_self"),t.splice(n)},this.childGoback=function(e){var n=e.closest(".js-openpage-container"),t=e.closest("udp-page-display");if(t.siblings().length>0){t.remove();var a=n.children();a.closest(".udp-page-view").prev(".udp-float-actions").show(),a.show()}else e.closest(".udp-page-view").prev(".udp-float-actions").show()}}angular.module("oplus.udp").service("pageHistory",e),e.$inject=["pageService"],angular.module("oplus.udp").component("udpBreadcrumb",{bindings:{},template:'<ol class="breadcrumb"><li ng-repeat="page in ::$ctrl.history track by $index" ng-class="{active:$last}"><a ng-if="!$last" ng-click="$ctrl.go($index)">{{page.title}}</a><span ng-if="$last">{{page.title}}</span></li></ol>',controller:["pageHistory",function(e){this.history=e.all(),this.go=function(n){e.go(n)}}]})}(),function(){"use strict";function e(e,n,t,a,i,l){function o(){l.findAllPages().then(function(e){s.pages=e}).catch(function(e){console.error(e)})}var s=this;s.clonePage=function(e){l.clonePage(e).then(function(e){i.toast("success","页面复制成功!"),o()}).catch(function(e){console.error(e)})},s.deletePage=function(e){i.confirmDanger("删除页面","确认删除页面吗？",function(){l.deletePage(e).then(function(){t(function(){o()})}).catch(function(e){console.error(e)}),i.toast("success","页面已删除")},function(){})},s.sharePage=function(n){s.viewPageUrl="...........",s.embedPageUrl="...........",a.open({templateUrl:"app/modules/udp/page-share-modal.html",scope:e,size:"md"})},s.toggleStar=function(e){e.starred=!e.starred,l.savePage(e)},s.browsePage=function(e){s.currentPage=e,n.go("app.udp.browsePage",{pageId:e.id})},s.exportPages=function(){l.exportPages()},s.importPages=function(){a.open({animation:!1,templateUrl:"app/modules/udp/page-import.html",controller:"PageImportCtrl",controllerAs:"$pic",size:"md"}).result.then(function(){console.info("Modal close "+new Date),o()},function(){console.info("Modal dismissed at: "+new Date)})},s.currentPage=null,s.$state=n,o()}angular.module("oplus.udp").controller("PageListCtrl",e),e.$inject=["$scope","$state","$timeout","$uibModal","messageService","pageService"]}(),function(){"use strict";function e(e,n,t,a,i,l,o){var s=this;s.doImport=function(){var e=_.filter(s.pages,{_selected:!0});e.forEach(function(e){delete e._selected}),n.importPages("same",e).then(function(e){alert("import in background"),l.close(),console.log(e)}).catch(function(e){console.error(e)})},s.cancelImport=function(){l.dismiss()},s.parseFile=function(e){var t=new i.FileReader;t.onload=function(e){var t=e.target.result;a(function(){s.pages=n.parseExportFile(t)})},t.readAsText(e)},s.selectAll=function(){s.pages.forEach(function(e){e._selected=s.isAll})},s.selectedFile={},s.pages=[]}function n(e){return{template:'<input type="file" style="display: none;" /><ng-transclude></ng-transclude>',transclude:!0,scope:{file:"=ngModel",onChange:"<"},link:function(n,t){var a=t.children('input[type="file"]');a.on("change",function(t){e(function(){var e=t.target.files[0];n.file._0_=e,n.onChange&&n.onChange(e)})}),t.on("click",function(){a[0].click()})}}}angular.module("oplus.udp").controller("PageImportCtrl",e).directive("udpFileBrowser",n),e.$inject=["$scope","pageService","$q","$timeout","$window","$uibModalInstance","FileUploader"],n.$inject=["$timeout"]}(),function(){"use strict";function e(e,n,t,a,i,l,o,s,r,c,d,u){var p=u.mode;e._THIS_IS_PAGE_=!0,e.page=c,e.pageParams=angular.extend({},a.search(),d),"normal"===p||"browser"===p?function(){e.sharePage=function(){l.open({templateUrl:"app/modules/udp/page-share-modal.html",controller:[function(){var n=this;n.sendEmail=function(){n.isSending=!0,s.emailPage(n.to,e.page.title,function(){n.isSending=!1})},n.viewPageUrl=i.location.href,n.embedPageUrl=i.location.href}],controllerAs:"vm",size:"md"})},e.deletePage=function(e){r.confirmDanger("删除页面","确认删除页面吗？",function(){s.deletePage(e),r.toast("success","页面已删除")},function(){})},e.exportCurrentPage=function(n){s.exportCurrentView(n,e.page.title)},e.clonePage=function(e){s.clonePage(e).then(function(e){r.toast("success","页面复制成功!")}).catch(function(e){console.error(e)})},t.push(c.id,e.pageParams,c.title),e.history=t.all()}():"dialog"===p&&function(){e.dismissModal=function(){var n=o.getTop();n&&(o.dismiss(n.key),e.$destroy())}}()}angular.module("oplus.udp").controller("PageViewCtrl",e),e.$inject=["$scope","$state","pageHistory","$location","$window","$uibModal","$uibModalStack","pageService","messageService","page","pageParams","_viewOptions"]}(),function(){"use strict";angular.module("oplus.udp").directive("udpPageDisplay",function(){return{restrict:"E",templateUrl:"app/modules/udp/page-display.html",scope:{page:"=",options:"<",isDesigner:"<"},link:function(e,n,t,a){},controller:["$scope","$rootScope","$state","$location","$element","$compile","pageHistory","pageService","widgetDnd",function(e,n,t,a,i,l,o,s,r){function c(){for(var n,t=e.$parent;t;){if(t.pageParams)return n=t.pageParams;t=t.$parent}return n}function d(t){if(t){t.setting=t.setting||{};var a=s.tidyHtml(t.html,!e.isDesigner);e.pageCss=s.buildPageCss(t.setting.theme,t.setting.layout),e.isDesigner&&p.attr("id","pd-canvas-zone");var i;try{i=l(a)(e)}catch(e){console.error(e),i=l("<div>"+a+"</div>")}p.empty().append(i),e.isDesigner&&(r.initCanvasDnd(e),u()),n.$emit("udpPageLoaded",{})}}function u(){p.on("mouseover",".uwidget",function(e,n){var t=$(".uwidget",p);if(0===e.buttons){var a=$(this);t.removeClass("hover"),a.addClass("hover"),e.stopPropagation()}}).on("mouseleave",".uwidget",function(e){$(this).removeClass("hover"),e.stopPropagation()}),p.on("click",".uw-config .uw-embed-style a",function(e){e.preventDefault();var n=$(this),t=n.closest(".uwidget"),a=$("> .uw-body",t),i=n.attr("rel");a.children().attr("class",i)})}var p=$(s.PAGE_WRAPPER_SELECTOR,i);e.options=e.options||{},e.options.showUrl&&(e.pageUrl=function(){var n=a.absUrl(),i=(n=n.substring(0,n.indexOf("#")))+t.href("app.udp_pageview",{pageId:e.page.id}),l=c();return _.isEmpty(l)||(i+="?",Object.keys(l).forEach(function(e){i+=e+"="+l[e]+"&"})),i}()),e.pageCss="bg-white-only",e.pageStyle={},e.$watch("page",function(e,n){e&&d(e)}),e.$watch("page.setting",function(n,t){var a=n;if(!angular.isUndefined(a)){var i=a.theme,l=a.layout;e.pageCss=s.buildPageCss(i,l),"_CUSTOM"===i?(e.pageStyle["background-color"]=a.backColor,e.pageStyle.color=a.fontColor):e.pageStyle={},a.bgimage&&p.css("background-image",'url("'+a.bgimage+'")').css("background-size","cover").css("background-repeat","no-repeat").css("background-position","center center")}},!0),e.goback=function(n){var t=$(n.currentTarget);o.childGoback(t,e)},this.$onDestroy=function(){p.off("click").off("mouseleave").off("mouseover").off("mouseenter")}}]}})}(),function(){"use strict";angular.module("oplus.udp").service("themeService",function(){function n(e){return l[e]}function t(n){return e[n]||e[i]}function a(e){return/(dark)|(black)/.test(e||"")}var i="default",l={white:"#ffffff",light:"#dddddd",dark:"#1f1d1d",black:"#141414"},o=[{id:"white",title:"白色",css:"bg-white"},{id:"light",title:"浅色",css:"bg-light bg"},{id:"dark",title:"深色",css:"bg-dark"},{id:"black",title:"黑色",css:"bg-black dk"}],s=[{id:"white",title:"白色",css:"bg-white panel-default"},{id:"light",title:"浅色",css:"bg-light"},{id:"dark",title:"深色",css:"bg-dark"},{id:"black",title:"黑色",css:"bg-black dk"},{id:"primary",title:"Primary",css:"panel-primary"},{id:"success",title:"Success",css:"panel-success"},{id:"info",title:"Info",css:"panel-info"},{id:"warning",title:"Warn",css:"panel-warning"},{id:"danger",title:"Danger",css:"panel-danger"}],r=[{id:"white",title:"白色",css:"white"},{id:"light",title:"浅色",css:"light"},{id:"dark",title:"深色",css:"dark"},{id:"black",title:"黑色",css:"black"},{id:"primary",title:"Primary",css:"primary"},{id:"success",title:"Success",css:"success"},{id:"info",title:"Info",css:"info"},{id:"warning",title:"Warning",css:"warning"},{id:"danger",title:"Danger",css:"danger"}];this.calcColors=function(e){var t=e.$widget.uwProps.display||{},a=e.$widget.$pageScope.page.setting||{},i={backColor:"",fontColor:"",borderColor:""};return a.theme&&"_CUSTOM"!==a.theme?i.backColor=n(a.theme):(a.fontColor&&(i.fontColor=a.fontColor),a.backColor&&(i.backColor=a.backColor)),t.cardMode&&t.theme&&"_CUSTOM"!==t.theme?i.backColor=n(t.theme):(t.fontColor&&(i.fontColor=t.fontColor),t.backColor&&(i.backColor=t.backColor)),i.backColor||(i.backColor="#fff"),i.fontColor||(i.fontColor=tinycolor.mostReadable(i.backColor,["#333","#d8d9da"],{includeFallbackColors:!0}).toHexString()),i.borderColor=tinycolor(i.fontColor).setAlpha(.2).toRgbString(),i},this.getCssColors=function(e){return e?r.concat([{id:"_CUSTOM",title:"自定义"}]):r},this.getAllPalettes=function(){return e},this.getPageThemes=function(e){return e?o.concat([{id:"_CUSTOM",title:"自定义"}]):o},this.getCardThemes=function(e){return(e=e||{}).customizable?s.concat([{id:"_CUSTOM",title:"自定义"}]):s},this.findPageTheme=function(e){return _.find(o,{id:e})||{}},this.findCardTheme=function(e){return _.find(s,{id:e})||{}},this.getFontFamily=function(){return'"Open Sans", "Microsoft Yahei Light", "Microsoft Yahei", "Helvetica", "Arial", sans-serif'},this.calcFontColor=function(e){return a(e)?"#b5bdc0":"#333"},this.calcBorderColor=function(e){return tinycolor(e).setAlpha(.5).toRgbString()},this.calcAllPaletteColors=function(n){var t=[];return _.values(e).forEach(function(e){t.push(e.colors)}),t},this.calcPaletteColors=function(e,n,a){return t(e).colors}});var e={default:{title:"默认",colors:["#4e79a7","#59a14f","#9c755f","#f28e2b","#edc948","#bab0ac","#e15759","#b07aa1","#76b7b2","#ff9da7"]},splunk:{title:"Splunk Categorical",colors:["#1e93c6","#f2b827","#d6563c","#6a5c9e","#31a35f","#ed8440","#3863a0","#a2cc3e","#cc5068","#73427f"]},office:{title:"Office 2016",colors:["#4472c4","#ed7d31","#a5a5a5","#ffc000","#5b9bd5","#70ad47"]},highcharts:{title:"HighCharts",colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},blue:{title:"蓝色",colors:["#0F6FC6","#009DD9","#0BD0D9","#10CF9B","#7CCA62","#A5C249"]},yellow:{title:"黄色",colors:["#FFCA08","#F8931D","#CE8D3E","#EC7016","#E64823","#9C6A6A"]},green:{title:"绿色",colors:["#549E39","#8AB833","#C0CF3A","#029676","#4AB5C4","#0989B1"]}}}(),function(){"use strict";angular.module("oplus.udp").component("udpThemeSelector",{templateUrl:"app/modules/udp/helper/theme-selector.html",bindings:{theModel:"=",customizable:"<",options:"<",themeGroup:"@"},controller:["themeService","$scope",function(e,n){var t=this.options||{};this.label=!1===t.label?"":t.label||"颜色主题",this.colors=e.calcAllPaletteColors(8),"page"===this.themeGroup?this.themes=e.getPageThemes(this.customizable):this.themes=e.getCssColors(this.customizable)}]})}(),function(){"use strict";angular.module("oplus.udp").directive("popoverHoverable",["$timeout","$document",function(e,n){return{restrict:"A",scope:{popoverHoverable:"=",popoverIsOpen:"="},link:function(n,t,a){function i(n){e.cancel(i.$timer),i.$timer=e(function(){n?l():o()},100)}function l(){n.popoverIsOpen||$(t[0]).click()}function o(){n.popoverIsOpen=!1}function s(e){return r(e)||c(e)}function r(e){return t[0].contains(e)}function c(e){for(var n=!1,t=$(".popover-inner"),a=0,i=t.length;a<i;a++)if(t[a].contains(e)){n=!0;break}return n}n.insidePopover=!1,n.$watch("insidePopover",function(e){i(e)}),n.$watch("popoverIsOpen",function(e){n.insidePopover=e}),$(document).bind("mouseover",function(e){s(e.target)&&(n.insidePopover=!0,n.$digest())}),$(document).bind("mouseout",function(e){s(e.target)&&(n.insidePopover=!1,n.$digest())}),n.$on("$destroy",function(){$(document).unbind("mouseenter"),$(document).unbind("mouseout")})}}}])}(),function(){"use strict";function e(e,n,t,a,i,l,o,s,r){var c,d=t.pageId;e._THIS_IS_PAGE_=!0,e.pageParams={},e.page=l,e.showWidgetOutline=!1,e.inMode="edit",e.genSourceCode=function(){e.sourceCode=i.genSourceCode()},e.saveAsTemplate=function(){alert("TODO")},e.savePage=function(){"source"===e.inMode?e.page.html=e.sourceCode:e.page.html=i.genSourceCode(),i.savePage(e.page).then(function(t){o.toast("success","页面已保存"),d?"source"===e.inMode&&console.warn("TODO: need reload page"):n.go("app.udp_pageedit",{pageId:t.id})})},e.configPage=function(){c=a.open({templateUrl:"app/modules/udp/page-setting.html",scope:e,controller:["page",function(n){this.pageThemes=s.getPageThemes(!0),this.page=n,r.findAllFolders().then(function(n){e.folderList=n,console.log(e.folderList)}),angular.isString(n.setting)&&(n.setting={})}],controllerAs:"$ctrl",resolve:{page:function(){return e.page}},size:"lg"})},e.selectLayout=function(n){c.close(),i.loadPageTemplate(n).then(function(n){e.page={html:n,setting:{}}}).catch(function(e){throw e})},e.closeModal=function(e){c.close()},d||(e.page={setting:{}},c=a.open({templateUrl:"app/modules/udp/page-tpl-selector.html",scope:e,size:"md"}))}angular.module("oplus.udp").controller("PageDesignerCtrl",e),e.$inject=["$scope","$state","$stateParams","$uibModal","pageService","page","messageService","themeService","folderService"]}(),function(){angular.module("oplus.udp").component("udpPageDesignerToolbox",{templateUrl:"app/modules/udp/page-designer-palette.html",controller:["$scope","$element","$timeout","userPref","widgetFactory","widgetDnd",function(e,n,t,a,i,l){var o=this;this.activeTab=a.readPref("udp.pd.paletteTab",0),this.widgetGroups=[{group:"layout",icon:"fa-columns",text:"布局控件"},{group:"text",icon:"fa-font",text:"文本控件"},{group:"control",icon:"fa-plug",text:"表单控件"},{group:"data",icon:"fa-area-chart",text:"数据控件"}],this.widgetGroups.forEach(function(e){e.widgets=i.getWidgetsByGroup(e.group)}),this.showTab=function(e){a.savePref("udp.pd.paletteTab",e),o.activeTab=e},this.$postLink=function(){t(function(){l.initToolsDnd($(".uw-symbol",n),e)},0)}}]})}(),function(){"use strict";function e(e){var n=[];this.defineWidget=function(e){var t=e.type;_.find(n,{type:t})?console.warn('Widget type "%s" was registered already',t):n.push(e)},this.getWidgetsByGroup=function(t){var a=e.isClientInDevMode();return n.filter(function(e){return e.group===t&&(!!a||"dev"!==e.tag)})},this.lookupWidgetDef=function(e){var t=_.find(n,{type:e});if(!t)throw new Error('Widget type "'+e+'" is not registered. Registered widgets are ['+_.map(n,"type")+"].");return t},this.findEventWidgets=function(){var e=_.filter(n,function(e){return!!e.eventProperty});return _.map(e,function(e){return{type:e.type,eventProperty:e.eventProperty}})}}angular.module("oplus.udp").service("widgetFactory",e),e.$inject=["devel"]}(),function(e){"use strict";function n(n,t,a,i,l,o,s){function r(e,n){if(e&&e.length>0){var t=angular.element("<form></form>").addClass("uw-params form-inline");return n&&t.addClass("hidden"),e.forEach(function(e){t.append(o.buildParamInputControl(e.name,e))}),t.append('<button class="btn btn-default" ng-click="$widget.reloadWidgetData($event)"><i class="fa fa-refresh"></i></button>'),t.prop("outerHTML")}return""}function c(e,n,i,c){function d(e,n){var t="";return(e||n)&&(t=' style="',e&&(t+="background-color:"+e+";"),n&&(t+="color:"+n),t+='"; '),t}!function(e){var n=e.display||{};n.cardTheme&&(n.theme=n.cardTheme,delete n.cardTheme)}(i);var u,p="",g=t.lookupWidgetDef(e).contentBuilder,f={configCode:g.getConfig&&g.getConfig(i),bodyCode:g.getTemplateForCompilation(i)},m=i.display||{},b=f.configCode;o.isEditMode()&&(p=o.buildWidgetButtons(e,b));var v='<div class="uw-content">'+f.bodyCode+"</div>";return i.dataset=i.dataset||{},v=r(i.dataset.params,i.dataset.hideParams)+v,m.cardMode&&function(){var e=m.theme,n="",t="",a={};"_CUSTOM"===e?(a={headerBackColor:m.backColor,bodyBackColor:m.backColor,borderColor:"",headerFontColor:m.fontColor,bodyFontColor:m.fontColor},m.backColor,m.fontColor):n=l.findCardTheme(e).css,m.cardControls&&(t='<a ng-click="$widget.zoomIn()" class="pull-right"><i class="text-muted fa fa-window-maximize"></i></a>'),v='<div class="panel '+(n||"")+'" '+("_CUSTOM"===e?d("transparent",a.bodyFontColor):"")+">"+(i.title?'<div class="panel-heading h4" '+d(a.headerBackColor,a.headerFontColor)+">"+i.title+t+"</div>":"")+'<div class="panel-body wrapper-xs" '+d(a.bodyBackColor,a.bodyFontColor)+">"+v+"</div></div>"}(),c&&o.isTextWidget(e)&&n!==a.IN_CANVAS&&(c=function(e){return s.interpolateVariables(e,function(e){var n=e;/^@\./.test(e)&&(n=e.substring("@.".length));var t='<span>{{$widget.$pageScope.pageParams | pathValue: "'+n+'"}}</span>';return console.log(t),t})}(c)),u='<div class="uw-body" '+(o.isTextWidget(e)?'contenteditable="true"':"")+">"+(c||v)+"</div>",p+""+u}function d(e){return o.isEditMode()?a.IN_CANVAS:a.IN_PAGE}return{restrict:"E",scope:{},bindToController:{uwProps:"<",uwType:"@"},controller:"WidgetCtrl",controllerAs:"$widget",link:function(t,i,l,s){var r=s.uwType,u=s.uwProps||{};!function(){var n=d();i.data("widgetPlace",n),n!==a.IN_CANVAS||i.attr("id")||i.widgetUid(),i.addClass("uwidget uwtype-"+r);var t=e("> .uw-body",i).html();if(t&&o.isTextWidget(r)){var l=c(r,n,u,t);i.html(l),n!==a.IN_CANVAS&&e("> .uw-body",i).removeAttr("contenteditable")}else i.html(c(r,n,u))}(),n(i.contents())(t),s.renderDynamicContent&&s.renderDynamicContent(t,i,u),o.makeWidgetResizable(i,function(){t.$broadcast("WIDGET_RESIZE")})}}}angular.module("oplus.udp").directive("uwidget",n),n.$inject=["$compile","widgetFactory","widgetValues","widgetDataUtil","themeService","widgetUiHelper","dataEx"],jQuery.fn.extend({widgetUid:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="w-"+Date.now()+ ++e)})}}()})}(jQuery),function(e){"use strict";function n(n,t,a,i,l,o,s,r,c,d){function u(e,n,t){if(t&&t.dataset){var a=t.dataset.eventtorefresh;a&&e.$on(c.events.WidgetEvent,function(e,t){t.eventName===a&&g(null,n)})}}function p(n){var t=e(n.currentTarget),a=t.closest(".uwidget");return 0===a.length&&(a=t.closest(".widget-layout")),a}function g(e,t){var i;i=e?p(e):t;var l=f.wParams;r.setWidgetParamValues(i,l);var o=f.uwType,c=s.lookupWidgetDef(o).contentBuilder;c&&c.reloadData&&a(function(){c.reloadData(n,i)})}var f=this,m=f.uwType,b=f.uwProps||{},v=!1;f.configWidget=function(e){var a;a=e?p(e):t;o.showConfigModal(a,n)},f.copyWidget=function(){i.copyWidget(t)},f.cutWidget=function(){i.cutWidget(t)},f.pasteWidget=function(){"copy"===n.$root.pasteWidgetEnabled?i.pasteWidget(t,f.$pageScope):"cut"===n.$root.pasteWidgetEnabled&&i.pasteWidget(t,f.$pageScope,!0)},f.deleteWidget=function(e){var n=p(e),t=n.attr("uw-type");l.confirmWarning("删除控件","删除控件 <strong>"+t+"</strong> 吗？",function(){n.remove()})},f.reloadWidgetData=g,f.fireWidgetEvent=function(e,n){var t,a=f.$pageScope;if(n)try{t=JSON.parse(n)}catch(e){console.error("Cannot parse event arguments with json ",n)}a.$broadcast(c.events.WidgetEvent,{eventName:e,eventArgs:t})},f.renderDynamicContent=function(e,n,t){function a(a){0===_.difference(l,Object.keys(a)).length&&(i(e,n,t),v=!0)}function i(e,n,t){r.setWidgetParamValues(n,f.wParams);var a=s.lookupWidgetDef(m).contentBuilder;a.renderDynamicData&&(console.debug("renderDynamicData [%s] %s",m,JSON.stringify(f.wParams)),a.renderDynamicData(e,n,t))}var l=_.map(t.dataset.params,"name");_.isEmpty(l)?i(e,n,t):e.$watch("$widget.wParams",function(e,t){if(v){if(e._NO_RELOAD)return;g(null,n)}else a(e)},!0)},f.zoomIn=function(){var e=t.find(".uw-body .panel"),a=e.find(".panel-body").eq(0);d.zoomIn(a,e,{title:b.title},function(e){n.$broadcast("WIDGET_RESIZE",e)},function(e){n.$broadcast("WIDGET_RESIZE",e)})},f.$onInit=function(){f.wParams={},f.$pageScope=d.findPageScope(n)||{};var e,a=f.$pageScope.pageParams||{};b.wparams?e=b.wparams:b.dataset&&b.dataset.params?e=b.dataset.params:b.job&&b.job.params?e=b.job.params:b.name&&(e=[{name:b.name}]),angular.isArray(e)&&e.forEach(function(e){var n=a[e.name];angular.isDefined(n)&&(f.wParams[e.name]=n)}),u(n,t,b)},d.isStaticWidget(m)}angular.module("oplus.udp").controller("WidgetCtrl",n),n.$inject=["$scope","$element","$timeout","pageService","messageService","widgetConfigHelper","widgetFactory","widgetDataUtil","widgetValues","widgetUiHelper"]}(jQuery),angular.module("oplus.udp").value("widgetValues",{IN_PAGE:"in_display",IN_CANVAS:"in_design",events:{PageParamChanged:"UDP_PAGEPARAM_CHANGED",WidgetEvent:"UDP_WIDGET_EVENT"}}),function(){"use strict";function e(e){return{restrict:"A",scope:{udpPageLink:"<"},link:function(n,t,a){var i=n.udpPageLink;t.on("click.pagelink",function(n){e.openPage(i,{},{current:n.currentTarget}),n.preventDefault()}),n.$on("$destroy",function(){t.off("click.pagelink")})}}}angular.module("oplus.udp").directive("udpPageLink",e),e.$inject=["widgetInteraction"]}(),function(){function e(e,a,i,l,o,s){function r(e){return isNaN(e)}function c(e){return{"YYYY-MM-DD HH:mm:ss":"yyyy-MM-dd HH:mm:ss","YYYY-MM-DD":"yyyy-MM-dd"}[e]||e}return{restrict:"E",replace:!0,scope:{theModel:"=ngModel"},template:function(e,n){function i(e){return e.readonly?' ng-disabled="true" ':""}function l(e,n){var t=' ng-model="'+(n||"theModel")+'" ';return e.modeloptions&&(t+=" ng-model-options='"+e.modeloptions+"'"),t}function o(e){if(!e.tooltip)return"";var n="";return e.label&&(n=e.label),e.name&&(n+=" ("+e.name+" "+(e.format||"")+")"),n?' uib-tooltip="'+n+'" ':""}function s(e){return' placeholder="'+_.escape(e.label||e.name||"")+'"'}function r(e){var t='<div class="form-control-wrapper">'+e+"</div>";return n.label&&"true"===n.showlabel&&(t='<label class="control-label">'+(n.label||"")+"</label>"+t),t}function d(e){if(e.width){var n=parseInt(e.width);if(n)return' style="width:'+n+'em" '}return""}function u(e){return r("<input "+l(e)+' class="form-control" type="'+(e.format||"text")+'"'+d(e)+i(e)+o(e)+s(e)+">")}var p=n.control,g='<div class="form-group udp-input ">';return"text"===p?g+=function(e){return'<span class=""'+o(e)+">{{theModel}}</span>"}(n):p===t?g+=function(e){var n=c(e.formatter||"YYYY-MM-DD HH:mm:ss");return r('<span class="input-group op-datepicker" '+o(e)+"><input "+d(e)+l(e,"datepickerValue")+' class="form-control" '+i(e)+' uib-datepicker-popup="'+n+'" is-open="popup1.opened" close-text="关闭" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="popup1.opened=!popup1.opened"><i class="fa fa-calendar"></i></button></span></span>')}(n):"input"===p?g+=u(n):"hidden"===p?g+=function(e){return a.isEditMode()?r('<span><i class="fa"></i> 隐藏控件</span>'):"<input "+l(e)+' class="form-control" type="hidden"'+o(e)+s(e)+">"}(n):"switch"===p?g+=function(e){return r('<label class="i-switch bg-info m-t-xs m-r">\n<input type="checkbox" '+l(e)+" ><i></i></label>")}(n):"select"===p?g+=function(e){var n="<select "+l(e)+o(e)+i(e)+' class="form-control" ng-options="val[0] as val[1] for val in _selectOptions">';return n+="</select>",r(n)}(n):(g+=u(n),p&&"hidden"!==p&&console.warn('Unknown control "'+p+'"')),g+="</div></div>"},link:function(s,c,d){function u(){d.control===t&&(s.datepickerValue=m(s.theModel,"date",v))}function p(e){g(e,d.initval,d.name).then(function(e){angular.isDefined(e)&&(s.theModel=m(e,b,v),u())}).catch(function(e){o.alertError("数据转换错误","无法解析数据表达式"+d.initval+"："+e)})}function g(n,t,a){var i=e.defer();if(angular.isDefined(n))i.resolve(n);else if(angular.isDefined(t)){var o=l.evaluateByFieldVar(t,{"@":h.pageParams},{ignores:[a]});o&&angular.isFunction(o.then)?o.then(function(e){i.resolve(e)}).catch(function(e){i.reject(e)}):angular.isDefined(o)?i.resolve(o):i.resolve(void 0)}else i.resolve(null);return i.promise}function f(e){var n=e.sourcedef;if(n){var t=l.evaluateByFieldVar(n,{"@":h.pageParams});t&&(s._selectOptions=[],angular.isFunction(t.then)?t.then(function(e){angular.isArray(e)?s._selectOptions=e:(o.alertWarning("函数错误","下拉列表的函数返回值必须是数组: "+n),s._selectOptions=["",e+""])}).catch(function(e){console.error(e)}):angular.isArray(t)?angular.isArray(t[0])?s._selectOptions=t:s._selectOptions=_.map(t,function(e){return[e,e]}):(console.warn("Unsupported result type for select control. Only support promise.Array or Array",t),s._selectOptions=[["",t]]))}}function m(e,n,a){var i,l=e;if("date"===n){e&&(i=moment(e).toDate());var o=r(i);o&&e&&console.warn("Cannot parse date from",e),l=o?null:i}else"number"===n?l=numeral(e).value():"string"===n&&d.control===t&&(l=r((i=moment(e)).toDate())?null:i.format(a));return l}var b=d.format,v=d.formatter||"YYYY-MM-DD HH:mm:ss",h=a.findPageScope(s);p(s.theModel),d.control===n?f(d):d.control===t&&s.$watch("datepickerValue",function(e,n){angular.isDate(e)&&angular.isDate(n)&&e.valueOf()===n.valueOf()||("date"===b&&angular.isDate(e)?s.theModel=r(e)?null:e:"string"===b&&(s.theModel=m(e,b,v)))}),d.name&&s.$on(i.events.PageParamChanged,function(e,t){var a,i=t.params||{};a=d.binding?i[d.binding]:i[d.name],angular.isDefined(a)?(s.theModel=m(a,b,d.formatter||"YYYY-MM-DD HH:mm:ss"),u()):angular.isUndefined(s.theModel)&&p(void 0),d.control===n&&(t.eventName===d.eventtorefresh&&d.eventtorefresh||angular.isUndefined(s._selectOptions))&&f(d)}),d.eventtorefresh&&s.$on(i.events.WidgetEvent,function(e,n){n.eventName===d.eventtorefresh&&p(void 0,n)})},controller:["$scope",function(e){}]}}angular.module("oplus.udp").directive("udpInput",e),e.$inject=["$q","widgetUiHelper","widgetValues","dataEx","messageService","widgetDataUtil"];var n="select",t="datepicker"}(),function(){"use strict";angular.module("oplus.udp").component("udpWidgetPropsViewer",{bindings:{theModel:"=",options:"<"},templateUrl:"app/modules/udp/widgets/widget-props-viewer.html",controller:["$filter",function(e){var n=this;this.model={},this.model.json=e("json")(this.theModel),this.save=function(){var e=JSON.parse(this.model.json);Object.keys(n.theModel).forEach(function(e){delete n.theModel[e]}),_.assign(this.theModel,e)}}]})}(),function(){"use strict";function e(e,n,t,a,i,l,o){function s(e,n,t,i){var l=n.event,o=c(n.params,t,i),s=e.$widget.$pageScope;s?_.merge(s.pageParams,o):(console.warn("Cannot find $pageScope for widget. Maybe the widget is not rendered in a page view controller."),s=e.$parent);var r={_source:n._source,eventName:l,params:o};console.debug(">>>> $broadcast %s with event_args %o",a.events.PageParamChanged,r),s.$broadcast(a.events.PageParamChanged,r)}function r(e,t,a){e=e||{},a=a||{};var s=e.pageId,r=e.params,d=e.target;if(s)if(d){angular.isString(s)&&(s=function(e,n){return o.evaluateByFieldVar(e,n)}(s,t));var u=c(r,t);if(i.isEditMode()){var p="当前处于编辑模式，在查看模式下将在位置 <strong>"+d+"</strong> 打开页面 <strong>"+s+"</strong><p>页面参数 <code>"+JSON.stringify(u)+"</code></p>";l.alert("",p)}else n.openPage(s,u,d,a)}else l.alertError("打开页面错误","没有指定要打开的位置");else l.alertError("打开页面错误","没有指定要打开的页面")}function c(e,n,t){var a;if(angular.isObject(e))return e;if(e&&n){try{a=jsonic(e)}catch(n){console.warn("Cannot parse page params from string: "+e)}a&&Object.keys(a).forEach(function(e){var t=a[e];angular.isString(t)&&(a[e]=o.evaluateByFieldVar(t,n))})}return a}this.openPage=r,this.changePageParams=s,this.handleInteraction=function(e,n,t,a){if(n&&angular.isObject(n)){var i=n.click,l=n.event;i===d.PAGE_LINK?r(n,t,{current:a}):i===d.ASSIGN_PARAM&&(console.log("handleInteraction.changePageParams"),s(e,n,t,!0)),l&&e.$widget.fireWidgetEvent(l)}};var d={PAGE_LINK:"pagelink",ASSIGN_PARAM:"assignparam"}}angular.module("oplus.udp").service("widgetInteraction",e),e.$inject=["$q","pageService","pageHistory","widgetValues","widgetUiHelper","messageService","dataEx"]}(),function(){function e(e,n,t,a){this.findWidgetDatasets=t.findAllDatasets,this.queryDatasetMeta=t.queryDatasetMeta,this.queryDataset=t.queryDataset,this.findWidgetJobs=a.findWidgetJobs,this.startJob=a.startJob,this.findAllPagesInfo=function(){return n.findAllPages({noContent:!0})}}angular.module("oplus.udp").service("widgetDataInterface",e),e.$inject=["$q","pageService","datasetService","jobService"]}(),function(){"use strict";function e(e,n,t,a,i,l){function o(e){var n="";e.forEach(function(e){var t,a=angular.element("<button></button>");try{t=jsonic(e.params)}catch(n){console.warn('Cannot parse param from string "'+e.params+'" with jsonic')}var i={pageId:e.pageId,params:t,target:e.target};a.addClass("btn btn-sm btn-default").attr("udp-page-link",JSON.stringify(i)).html(e.label),n+=a[0].outerHTML+" "}),c.convertFn=n}function s(){var e=angular.element("<div>"+c.convertFn+"</div>");c.pageLinks=[],e.children().each(function(){var e=$(this),n=jsonic(e.attr("udp-page-link")||"{}");n.params=JSON.stringify(n.params),n.label=e.html(),c.pageLinks.push(n)}),c.pageLinks.length>0&&(c.currentLink=c.pageLinks[0])}var r,c=this,d=a.getExprMeta(l);this.kind=d.kind,this.convertFn=d.body,this.funcList=i.getAllFunctions(),this.pageLinks=[],this.kinds=a.kinds,this.cancel=function(){t.dismiss()},this.save=function(){var e=(c.kind===a.kinds.STR?"":c.kind+":")+c.convertFn;t.close(e)},this.addPageLink=function(){c.currentLink={label:"标签"},c.pageLinks.push(c.currentLink)},this.removePageLink=function(e){n.confirm("删除链接","删除此链接吗？",function(){c.pageLinks.splice(e,1)})},this.codemirrorLoaded=function(e){(r=e).on("blur",function(){$(".CodeMirror-cursors").css("visibility","visible")})},this.insertFunction=function(){var e=r.getDoc().getCursor();r.replaceRange("$$."+(c.selectedFn.sample||c.selectedFn.name),e)},this.enabledKinds=function(){var n=e.$ctrl.options||{},t={},a=[];return n.kinds&&(a=n.kinds.split(",")),0===a.length&&(a=_.values(c.kinds)),a.forEach(function(e){t[e.trim()]=!0}),t}(),this.enabledVarTypes=function(){var n=e.$ctrl.options||{},t=[];return n.varTypes&&(t=n.varTypes.split(",")),t}(),e.$watch("vm.kind",function(e,n){e===c.kinds.LINK&&s()}),e.$watch("vm.pageLinks",function(e,n){if(c.kind===c.kinds.LINK){var t=e;t&&o(t)}},!0),e.$on("$destroy",function(){r&&(r.off("on"),r=null)})}angular.module("oplus.udp").component("udpDataConverter",{templateUrl:"app/modules/udp/helper/data-converter.html",bindings:{theModel:"=",options:"<",disabled:"<"},controller:["$scope","$uibModal","dataEx",function(n,t,a){var i=this;this.showBuilder=function(){var a=t.open({templateUrl:"app/modules/udp/helper/data-converter-config-modal.html",backdrop:"static",resolve:{convertFn:function(){return i.theModel}},size:"lg",scope:n,controller:["$scope","messageService","$uibModalInstance","dataEx","customFunctions","convertFn",e],controllerAs:"vm"});a.result.then(function(e){i.theModel=e}),a.rendered.then(function(){$(".modal-dialog").eq(0).draggable({handle:".modal-header:eq(0)"})})},this.remove=function(){i.theModel=void 0},n.$watch("$ctrl.theModel",function(e){i.meta=a.getExprMeta(e)})}]})}(),function(){"use strict";angular.module("oplus.udp").component("udpPageParamsConfig",{bindings:{paramsJson:"="},templateUrl:"app/modules/udp/helper/page-params-config.html",controller:["$scope",function(e){var n=this,t=!1;e.$watch("$ctrl.paramsJson",function(e,a){t=!0;var i=jsonic(e||"{}");n.params=[],Object.keys(i).forEach(function(e){n.params.push({name:e,value:i[e]})}),t=!1}),e.$watch("$ctrl.params",function(e,a){if(!t){var i={};e.forEach(function(e){i[e.name]=e.value}),n.paramsJson=JSON.stringify(i)}},!0)}]})}(),function(e){"use strict";angular.module("oplus.udp").component("udpPageLinkConfig",{bindings:{props:"="},transclude:!0,templateUrl:"app/modules/udp/helper/page-link-config.html",controller:["$scope",function(n){var t=this;t.targets=[{key:"_dialog",title:"弹出对话框"},{key:"_self",title:"本页面打开"},{key:"_blank",title:"新窗口打开"}],e(".uw-column, .uw-float").each(function(){var n=e(this).attr("id");n&&t.targets.push({key:"#"+n,title:"内容格 #"+n})})}]})}(jQuery),function(){var e=angular.module("oplus.udp");e.run(["$q","datasetService","customFunctions","dataEx",function(e,n,t,a){t.defineFunction("excelDate",{func:function(e){return new Date(86400*(e-25568)*1e3)},group:"conversion",sample:"excelDate(date)",desc:"将Excel的日期（整数）转换为Javascript日期"}),t.defineFunction("toDate",{func:function(e,n){return moment(e,n).toDate()},group:"conversion",sample:'toDate(value,"YYYY-MM-DD hh:mm:ss")',desc:'将值转换成日期，例如<code>toDate("2017-11-01-00.50","YYYY-MM-DD-hh.mm")</code>\n@param value {string} 字符串表示的日期\n@param format {string} 日期的格式\n@return {date} 转换后日期'}),t.defineFunction("formatDate",{func:function(e,n){return moment(e).format(n)},group:"conversion",sample:'formatDate(date,"YYYY-MM-DD hh:mm:ss")',desc:'格式化日期\n@param date {*} 可以是字符串、日期、整数。具体支持格式见 <a href="https://momentjs.com/docs/#/parsing/" class="btn-link" target="_blank">Moment.js</a>\n@return {string} 日期字符串'}),t.defineFunction("addDate",{func:function(e,n,t){return e=e||new Date,moment(e).add(n,t).toDate()},group:"conversion",sample:"addDate(date,length,unit)",desc:'在日期上偏移一个时间段\n@param date {*} 日期，如果为null或者空字符串，则为当前时刻\n@param span {number} 偏移的时间量，如果为负值则为向前推，如果为正数则向后推\n@param unit {string} 时间单位，支持"years","months","weeks","days","hours","minutes","seconds"\n@return {date} 偏移后的日期'}),t.defineFunction("toNumber",{func:function(e){return numeral(e).value()},sample:"toNumber(data)",desc:'转换为数值\n@param data {*} 支持的格式见 <a class="btn-link" href="http://numeraljs.com/#create" target="_blank">Numeral.js</a>\n@return {number} 数值',group:"conversion"}),t.defineFunction("formatNumber",{func:function(e,n){return numeral(e).format(n)},group:"conversion",sample:"formatNumber(value,format)",desc:'格式化数值，返回字符串\n@param value {number} \n@param format {string} 支持的格式见<a class=btn-link" href="http://numeraljs.com/#format" target="_blank">Numeral.js</a>\n@return {string} 格式化后的字符串'}),t.defineFunction("qdata",{func:function(t,i,l,o,s){function r(e,n){var t=e.records[n];angular.isFunction(s)&&s(t);var a;if(l){if(a=[],angular.isArray(l))0!==n||l&&0!==l.length||(l=Object.keys(t));else if(angular.isString(l))return c(t,l);l.forEach(function(e){a.push(c(t,e))})}else a=t;return a}function c(e,n){return a.pathValue(e,n)}var d=e.defer();return n.queryDataset(t,i).then(function(e){var n;angular.isNumber(o)?n=r(e,o):(n=[],e.records.forEach(function(t,a){n.push(r(e,a))})),d.resolve(n)}).catch(function(e){d.reject(e)}),d.promise},sample:'qdata("code",{param1:value1},["field1","field2"],filter,transformFn)',desc:'查询数据集，异步返回一个值、一维数组、或者二维数组。二维数组可以用于构建下拉列表的数据\n@param code {string} 数据集代码\n@param params {object} 数据集查询参数，格式为<code>{参数名1:参数值1,参数名2:参数值2}</code>\n@param fields {[string]|string} 需要从结果集中取哪些字段作为数据项。<li>如果是一个字符串，数据项为该字段的值</li><li>如果是一个字符串数组，数据项为对应字段的对象</li><li>如果是<code>null</code>、<code>""</code>，或<code>[]</code>，数据项包含所有字段</li>\n@param filter {null|number} 返回结果的过滤。<li>如果为空，返回数组</li><li>如果是一个整数，代表返回第几个数据项，0代表第一项</li>\n@param transformFn {function?} 数据项的处理函数。<li>代表对每个数据项进行处理，参数为每个数据项</li>\n@return {promise} 异步返回',group:"query"})}]),e.service("customFunctions",[function(){function e(e){var n={desc:"",params:[],returns:""},t=[];return(e||"").split("\n").forEach(function(e){var a=e.match(/@param\s+?([^\s]*)\s*([^\s]*)\s*(.*)/);a?n.params.push({name:a[1],type:a[2],desc:a[3]}):(a=e.match(/@return\s+?([^\s]*)\s*(.*)/))&&(n.returns={type:a[1],desc:a[2]}),a||t.push(e)}),n.desc=t.join("<br/>"),n}var n={};window.$$=window.$$||{},this.defineFunction=function(t,a){a.name=t;var i=e(a.desc);n[t]=_.merge({name:t,func:a.func,sample:a.sample},i),window.$$[t]=a.func},this.getAllFunctions=function(){return n}}])}(),function(){"use strict";angular.module("oplus.udp").directive("udpExpandableEditor",["$uibModal","$timeout",function(e,n){return{restrict:"A",scope:{model:"=udpExpandableEditor"},link:function(n,t,a){var i;t.on("click",function(){(i=e.open({templateUrl:"app/modules/udp/helper/expandable-editor.html",resolve:{model:function(){return n.model}},controller:["$scope","model",function(e,n){e.model=n,e.cancel=function(){i.dismiss()},e.submit=function(){i.close(e.model)}}]})).result.then(function(e){n.model=e}),i.rendered.then(function(){$(".modal-dialog").eq(0).draggable({handle:".modal-header:eq(0)"})})}),n.$on("$destroy",function(){t.off("click")})}}}])}(),function(){function e(e,n,t,a,i){function l(e,n){var t=crossfilter(e),a=n.column,i=n.value,l=n.row,o=[],s=t.dimension(function(e){return e[l]}),r=t.dimension(function(e){return e[a]});return s.group().reduceSum(function(e){return e[i]}).all().forEach(function(e){s.filter(),s.filter(e.key);var n=r.group().reduceSum(function(e){return e[i]}).all(),t={};t[l]=e.key,n.forEach(function(e){t[e.key]=e.value}),o.push(t)}),o}function o(e,n){return e.data("dsParams")||{}}this.transDataFields=function(e,t,a){e.forEach(function(e){t.forEach(function(t,i){var l=a[i];l&&(e[t]=n.evaluateByFieldVar(l,e))})})},this.convertFields=function(e,a){var i=[],l=Date.now();return e.forEach(function(e){var l={};a.forEach(function(a,i){var o,s=Date.now(),r=a.target;a.source?(r=r||a.source,o=n.pathValue(e,a.source),t.add("convertFields.pathValue",s)):a.convertFn&&(r=r||"!v"+i,o=n.evaluateByFieldVar(a.convertFn,e),t.add("convertFields.evaluateByFieldVar",s)),l[r]=o}),i.push(l)}),t.add("convertFields",l),i},this.getWidgetParamValues=o,this.setWidgetParamValues=function(e,n){e.data("dsParams",n)},this.queryData=function(n,t){var l=a.defer(),s=o(n),r=t.dataset;return r&&r.id?(Object.keys(s).forEach(function(e){""===s[e]&&(s[e]=null)}),e.queryDataset(r.id,s).then(function(e){r.limit>0&&(e.records.length=Math.min(e.records.length,t.dataset.limit)),l.resolve(e),i.removeWidgetError(n)}).catch(function(e){var t="数据集 ["+r.id+"] 出错，查询参数 "+JSON.stringify(s)+"，错误信息："+e.message;i.showWidgetError(n,t),l.reject(e)})):l.resolve({total:0,records:[]}),l.promise},this.pivotData=function(e,n){return l(e,{row:n.rows[0],column:n.columns[0],value:n.values[0]})}}angular.module("oplus.udp").service("widgetDataUtil",e),e.$inject=["datasetService","dataEx","debugTimer","$q","widgetUiHelper"]}(),function(e){"use strict";function n(n,t,a){function i(e,n,t){var a='<section class="op-blank-wrapper '+(t=t||"")+'" style="; background-color: rgba(122,122,122,0.15)"><div class="op-blank-content">';return n&&(a+='<i class="fa '+n+' m-b"></i>'),a+="<p>"+_.escape(e||"")+"</p></div></section>"}function l(e){return"layout-row"===e||o(e)}function o(e){return"layout-col"===e||"layout-float"===e}function s(){return/^app\.udp_pageedit/.test(t.current.name)||/^app\.udp_pagenew/.test(t.current.name)}this.buildWidgetButtons=function(e,n){var t,a,i="",s=l(e),r="string"==typeof n&&n;return a='<span class="dropdown"><button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-bars"></i></button><ul class="dropdown-menu '+(s?"":"dropdown-menu-right")+'">',r||(a+='<li><a ng-click="$widget.configWidget($event)"><i class="fa fa-wrench"></i> 配置</a></li>\n'),l(e)||(a+='<li><a ng-click="$widget.copyWidget($event)"><i class="fa fa-clone"></i> 复制</a></li>\n',a+='<li><a ng-click="$widget.cutWidget($event)"><i class="fa fa-cut"></i> 剪切</a></li>\n'),!o(e)&&l(e)||(a+='<li ng-class="{disabled:!$root.pasteWidgetEnabled}"><a ng-click="$widget.pasteWidget($event)"><i class="fa fa-paste"></i> 粘贴</a></li>\n'),a+='<li><a ng-click="$widget.deleteWidget($event)"><i class="fa fa-times"></i> 删除</a></li>',a+="</ul></span>",t='<span class="uw-drag label label-default">'+e+"</span>",r?i='<span class="uw-config">'+n+"</span>":!1!==n&&(i=""),'<div class="uw-buttons btn-group">'+t+i+a+"</div>"},this.buildParamInputControl=function(e,n){var t='$widget.wParams["'+e+'"]',a=angular.element("<udp-input></udp-input>");return a.attr({name:e,binding:n.binding,"ng-model":t,readonly:n.readonly,modeloptions:'{updateOn:"blur"}',control:n.control,format:n.format,formatter:n.formatter,label:n.label,width:n.width,showlabel:n.showlabel,initval:n.initval,source:n.source,sourcedef:n.sourcedef}),a.prop("outerHTML")},this.isEditMode=s,this.isLayoutWidget=l,this.isColWidget=o,this.isStaticWidget=function(e){return 0===e.indexOf("layout-")||0===e.indexOf("text-")},this.isTextWidget=function(e){return 0===e.indexOf("text-")},this.zoomIn=function(t,a,i,l,o){var s="js-modalzoom-"+_.uniqueId(),r={width:t.innerWidth(),height:t.innerHeight()},c=e("<div></div>").addClass("udp-widget-placeholder").css("width",t.innerWidth()).css("height",t.innerHeight()).css("display","block"),d=n.open({template:'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" ng-click="dismissModal()">&times;</button><h3 class="modal-title">'+(i.title||"&nbsp;")+'</h3></div><div class="modal-body" id="'+s+'"></div>',size:"xl",controller:["$scope",function(e){e.dismissModal=function(){d.close()}}]});d.rendered.then(function(){e("#"+s).append(t),c.appendTo(a),e(".modal-dialog").eq(0).draggable({handle:".modal-header:eq(0)"});var n={height:"600px"};l&&l(n)}),d.closed.then(function(){c.remove(),a.append(t),o&&o({height:r.height})})},this.renderUndefinedWidget=function(e,n){var t=i(n);e.css("background-color","rgba(122,122,122,0.15)").html(t)},this.getTemplateForUndefinedWidget=i,this.findPageScope=function(e){for(var n=e.$parent;n;){if(n.hasOwnProperty("_THIS_IS_PAGE_"))return n;n=n.$parent}return null},this.applyLayoutWidgetAttr=function(n,t,a,i){var l=(t=t||{}).display||{},o={"layout-col":{content:">.uw-column"},"layout-row":{content:">.uw-row"},"layout-float":{content:">.uw-float"}};a.attr("uw-type",n).addClass("uwidget widget-layout").addClass("uwtype-"+n);var s=e(o[n].content,a);if(t.css&&s.addClass(t.css),t.id&&s.attr("id",t.id),"layout-col"===n){var r=t.span||"12";a.removeClass(function(e,n){return(n.match(/(^|\s)col-(sm|md)-\S+/g)||[]).join(" ")}),a.addClass("col-sm-"+r)}else"layout-float"===n&&(a.css("position","absolute").css("z-index",l.zindex||"1"),l.maxWidth&&a.css("max-width",l.maxWidth).css("overflow-x","auto"),l.maxHeight&&a.css("max-height",l.maxHeight).css("overflow-y","auto"),l.draggable&&(a.is(".ui-draggable")||a.draggable()),l.resizable&&(a.is(".ui-resizable")||a.resizable({stop:function(e,n){var t={height:n.size.height,width:n.size.width};i.$broadcast("WIDGET_RESIZE",t)}})))},this.makeWidgetResizable=function(e,n){function t(e,n){var t=n.display||{},a=e.find(".uw-content");o._h&&t.height&&a.height(t.height),o._w&&t.width&&e.width(t.width)}function i(e){var n=e.find(".uw-content"),t=e.height();return n.length&&(t=t-5-(n.offset().top-e.offset().top)),t}var l=jsonic(e.attr("uw-props")||"{}"),o=function(){var n=e.attr("uw-type"),t={},i=a.lookupWidgetDef(n).resizable;return i&&(i.indexOf("w")>=0&&(t._w="e"),i.indexOf("h")>=0&&(t._h="s")),t}();t(e,l),s()&&(o._w||o._h)&&e.resizable({handles:_.values(o).join(","),stop:function(a,s){l.display=l.display||{},o._h&&(l.display.height=i(e),t(e,l)),o._w&&(l.display.width=s.size.width),e.css("height",""),e.attr("uw-props",JSON.stringify(l)),angular.isFunction(n)&&n()}})},this.showWidgetError=function(e,n){var t=e.find(".udp-widget-error"),a=e.find(".uw-content").hide(),l=i(n,"fa-times-circle fa-4x","udp-widget-error");0===t.length?angular.element(l).insertBefore(a):t.replaceWith(l)},this.removeWidgetError=function(e){e.find(".uw-content").show(),e.find(".udp-widget-error").remove()}}angular.module("oplus.udp").service("widgetUiHelper",n),n.$inject=["$uibModal","$state","widgetFactory"]}(jQuery),function(){"use strict";function e(e,n){function t(t,a){var i,o=t.attr("uw-type"),u=n.isLayoutWidget(o),p={helper:"clone",revert:"invalid",revertDuration:300,start:function(e,n){},stop:function(n,t){if(t.helper.closest("#pd-palette-zone").length>0)console.log("Revert invalid drop");else{var i;u?i=$('<div widget-layout="'+o+'"></div>').widgetUid():((i=$("<uwidget></uwidget>")).attr("uw-type",t.helper.attr("uw-type")).attr("uw-props",t.helper.attr("uw-props")),i.widgetUid()),t.helper.replaceWith(i),e(i)(a),l()}}};(i="layout-float"===o?c:"layout-row"===o?r:"layout-col"===o?s:d)&&(p.connectToSortable=i),t.draggable(p)}function a(){$('[widget-layout="layout-float"]',"#pd-canvas-zone").resizable()}function i(){$("#pd-canvas-zone").sortable({handle:o})}function l(){["#pd-canvas-zone .uw-row","#pd-canvas-zone .uw-column","#pd-canvas-zone .uw-float"].forEach(function(e){$(e).sortable({connectWith:e,handle:o})})}var o=".uw-drag";this.initToolsDnd=function(e,n){$(e).each(function(e){t($(this),n)})},this.initCanvasDnd=function(e){var n=$("#pd-canvas-zone"),t=n.find('[widget-layout="layout-row"]'),u=n.find('[widget-layout="layout-col"]'),p=n.find('[widget-layout="layout-float"]'),g=n.find("uwidget.uwidget");[{obj:t,target:r},{obj:g,target:d},{obj:p,target:c},{obj:u,target:s}].forEach(function(e){var n="layout-float"===e.obj.attr("widget-layout"),t={handle:o,stop:function(e,t){n||t.helper.removeAttr("style")}};n?t.handle=void 0:t.connectToSortable=e.target,e.obj.draggable(t)}),i(),l(),a()};var s="#pd-canvas-zone .uw-row",r="#pd-canvas-zone .uw-column, #pd-canvas-zone",c="#pd-canvas-zone",d="#pd-canvas-zone .uw-column, #pd-canvas-zone .uw-float"}angular.module("oplus.udp").service("widgetDnd",e),e.$inject=["$compile","widgetUiHelper"]}(),function(){angular.module("oplus.udp").filter("pathValue",["dataEx",function(e){return function(n,t){return e.pathValue(n,t)}}])}(),function(){angular.module("oplus.udp").component("udpCssEditor",{templateUrl:"app/modules/udp/helper/css-editor.html",bindings:{theModel:"=",options:"<"},controller:[function(){this.cssList=[{css:"form-inline",desc:"里面的控件标签横排"},{css:"m-b",desc:"下方外侧留空白"},{css:"m-r",desc:"右方外侧留空白"},{css:"m-l",desc:"左方外侧留空白"},{css:"m-t",desc:"上方外侧留空白"},{css:"m",desc:"四周留空白"},{css:"wrapper",desc:"内容四周内侧留空白"},{css:"bg-white",desc:"白色底"},{css:"bg-light",desc:"浅色底"},{css:"bg-dark",desc:"深色底"},{css:"bg-black",desc:"黑色底"}]}]})}(),function(){"use strict";var e=[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)"],["rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)"],["rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)"],["rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)"],["rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]];angular.module("oplus.udp").directive("udpColorPicker",function(){return{restrict:"E",require:"ngModel",scope:{fallbackValue:"=",disabled:"=?",format:"=?",options:"=?",triggerId:"@?",palette:"=?",onChange:"&?",onShow:"&?",onHide:"&?",onMove:"&?",onBeforeShow:"&?",onChangeOptions:"=?",onShowOptions:"=?",onHideOptions:"=?",onMoveOptions:"=?"},replace:!0,templateUrl:"app/modules/udp/helper/color-picker.html",link:function(n,t,a,i){function l(e){var t=e;return t&&(t=e.toString(n.format)),t}function o(e){angular.isFunction(n.onChange)&&n.onChange({color:e})}function s(e){var t=n.fallbackValue;e?t=l(e):angular.isUndefined(n.fallbackValue)&&(t=e),i.$setViewValue(t),o(t)}var r=t.find("input"),c=function(e){n.$evalAsync(function(){s(e)})},d=function(){return r.spectrum("toggle"),!1},u={allowEmpty:!0,color:i.$viewValue,showInput:!0,showInitial:!0,showButtons:!1,hideAfterPaletteSelect:!0,showPalette:!0,showSelectionPalette:!0,showAlpha:!0,localStorageKey:"oplus.color",maxPaletteSize:10,preferredFormat:"rgb",palette:e},p={};angular.forEach({change:"onChange",move:"onMove",hide:"onHide",show:"onShow"},function(e,t){var a=n[e+"Options"];p[t]=function(t){return a&&!a.update||c(t),"change"!==e&&angular.isFunction(n[e])?n[e]({color:l(t)}):null}}),angular.isFunction(n.onBeforeShow)&&(p.beforeShow=function(e){return n.onBeforeShow({color:l(e)})}),n.palette&&(p.palette=n.palette);var g=angular.extend({allowEmpty:!0,clickoutFiresChange:!0},u,n.options,p);n.triggerId&&angular.element(document.body).on("click","#"+n.triggerId,d),i.$render=function(){r.spectrum("set",i.$viewValue||""),o(i.$viewValue)},g.color&&(r.spectrum("set",g.color||""),s(g.color)),r.spectrum(g),n.$on("$destroy",function(){n.triggerId&&angular.element(document.body).off("click","#"+n.triggerId,d)}),t.on("$destroy",function(){r.spectrum("destroy")}),angular.isDefined(g.disabled)&&(n.disabled=!!g.disabled),n.$watch("disabled",function(e){r.spectrum(e?"disable":"enable")}),n.$watch("palette",function(e){r.spectrum("option","palette",e)},!0)}}})}(),function(){"use strict";angular.module("oplus.udp").component("udpPageSelector",{bindings:{excluded:"<",pageId:"=",onChange:"&"},templateUrl:"app/modules/udp/helper/page-selector.html",controller:["$scope","widgetDataInterface",function(e,n){var t=this,a=t.excluded||[];e.$watch("$ctrl.pageId",function(e,n){if(angular.isFunction(t.onChange())){var a=_.find(t.pages,{id:e});a&&t.onChange()(a)}}),n.findAllPagesInfo().then(function(e){_.remove(e,function(e){return a.indexOf(e.id)>=0}),t.pages=e}).catch(function(e){throw e})}]})}(),function(){"use strict";angular.module("oplus.udp").component("udpDsfieldSelector",{templateUrl:"app/modules/udp/widgets/dsfield-selector.html",bindings:{theModel:"=",fields:"<",options:"<"},controller:[function(){var e={converter:{kinds:"js,str",varTypes:"field"}};this.options=_.merge({},e,this.options)}]})}(),function(){"use strict";function e(e){return{restrict:"A",transclude:!0,scope:{},bindToController:{uwProps:"<",uwType:"@widgetLayout"},controller:"WidgetCtrl",controllerAs:"$widget",template:function(n,t){var a,i="",l=t.widgetLayout;if(e.isEditMode()&&(i=e.buildWidgetButtons(l)),"layout-row"===l)n.addClass("container-fluid"),a='<div class="uw-row row" ng-transclude></div>';else if("layout-col"===l)a='<div class="uw-column" ng-transclude></div>';else{if("layout-float"!==l)return'<div class="alert alert-danger">Unsupported widget layout <strong>'+l+"</strong></div>";a='<div class="uw-float" ng-transclude></div>'}return i+a},link:function(n,t,a,i){var l=i.uwProps||{},o=i.uwType;!function(e){angular.isNumber(e.span)&&(e.span=""+e.span)}(l),e.applyLayoutWidgetAttr(o,l,t,n);var s=e.isEditMode();if("layout-float"===o)t.resizable(),t.draggable();else if("layout-col"===o&&s){var r=t.find(".uw-column"),c=t.closest(".uw-row");r.resizable({handles:"e,w",containment:c,stop:function(a,i){l.span=Math.ceil(i.size.width/c.width()*12),r.attr("style",""),t.attr("uw-props",JSON.stringify(l)),e.applyLayoutWidgetAttr(o,l,t,n),n.$broadcast("WIDGET_RESIZE")}})}}}}angular.module("oplus.udp").directive("widgetLayout",e).run(["widgetFactory",function(e){e.defineWidget({type:"layout-row",name:"布局行",desc:"用于布局的行，里面可以内容格，能够根据屏幕尺寸自适应大小和位置",group:"layout",configController:"WidgetConfigCtrl"}),e.defineWidget({type:"layout-col",name:"内容格",desc:"放置内容的单元格，能够根据屏幕尺寸自适应大小和位置",group:"layout",configController:"LayoutColWidgetConfigCtrl"}),e.defineWidget({type:"layout-float",name:"浮动格",desc:"可以自由拖动，在任意位置放置内容，不能自适应屏幕尺寸，一般用于大屏布局。",group:"layout",configController:"WidgetConfigCtrl"})}]),e.$inject=["widgetUiHelper"]}(),function(){"use strict";function e(e,n,t,a){n("WidgetConfigCtrl",{$scope:e,theWidget:a,$uibModalInstance:t}),e.grids=[];for(var i=1;i<=12;i++)e.grids.push(i+"");angular.isNumber(e.uwProps.span)&&(e.uwProps.span=""+e.uwProps.span)}angular.module("oplus.udp").controller("LayoutColWidgetConfigCtrl",e),e.$inject=["$scope","$controller","$uibModalInstance","theWidget"]}(),function(){"use strict";angular.module("oplus.udp").run(["widgetFactory","dataEx","widgetUiHelper",function(e,n,t){function a(e,n,t,a){this.type=e,this.name=n,this.sourceCode=t,this.configCode=a}function i(e,n,t){}var l=[],o="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";l.push(new a("text-header","页头",'<div class="page-header"><h1>页面标题 <small>副标题</small></h1>  </div>',!1)),l.push(new a("text-p","文字段落","<p>"+o+"</p>",!1)),l.push(new a("text-blockquote","引用文字","<blockquote><p>"+o+'</p> <small> Someone famous <cite title="Source Title">Source Title</cite> </small> </blockquote>',!1)),l.push(new a("text-list","列表","<ul><li>Lorem ipsum dolor sit amet</li><li>Consectetur adipiscing elit</li><li>Integer molestie lorem at massa</li><li>Facilisis in pretium nisl aliquet</li><li>Nulla volutpat aliquam velit</li><li>Faucibus porta lacus fringilla vel</li><li>Aenean sit amet erat nunc</li><li>Eget porttitor lorem</li></ul>",!1)),l.push(new a("text-alert","提示框",'<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert"aria-hidden="true">&times;</button><h4>提示</h4>消息内容</div>','<span class="dropdown">  <button class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">样式    <span class="caret"></span>  </button>  <ul class="dropdown-menu uw-embed-style">    <li><a href="javascript:void(0);" rel="alert alert-success">成功</a></li>    <li><a href="javascript:void(0);" rel="alert alert-info">提示</a></li>    <li><a href="javascript:void(0);" rel="alert alert-warning">警告</a></li>    <li><a href="javascript:void(0);" rel="alert alert-danger">危险</a></li>  </ul></span>')),l.push(new a("text-jumbotron","巨幕",'<div class="jumbotron"><h1>醒目标题</h1><p>'+o+"</p></div>",!1)),l.forEach(function(n){e.defineWidget({type:n.type,name:n.name,group:"text",contentBuilder:{getTemplateForCompilation:function(e){return n.sourceCode},getConfig:function(){return n.configCode},renderDynamicData:i}})})}])}(),function(){"use strict";angular.module("oplus.udp").run(["widgetFactory","widgetValues","widgetInteraction","$rootScope","widgetDataUtil",function(e,n,t,a,i){function l(e){return e.name?'$widget.wParams["'+e.name+'"]':"_unnamed_"}function o(e,n){return e===n||angular.isDate(e)&&angular.isDate(n)&&e.valueOf()===n.valueOf()}e.defineWidget({type:"input",name:"全能输入",desc:"包含文本输入框、列表框、日期选择等多种输入",group:"control",eventProperty:"eventbychange",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){e.display=e.display||{};var n=angular.element("<udp-input></udp-input>");return e.display.width&&n.css("width",e.display.width),n.attr({class:"js-udp-pagecontrol","ng-model":l(e),modeloptions:'{updateOn:"blur"}',format:e.format,formatter:e.formatter,name:e.name,binding:e.binding,label:e.label,showlabel:e.showlabel,control:e.control,initval:e.initval,readonly:e.readonly,source:e.source,sourcedef:e.sourcedef,eventbychange:e.eventbychange,eventtorefresh:e.eventtorefresh}),n.prop("outerHTML")},renderDynamicData:function(e,n,a){var i=l(a);e.$watch(i,function(i,l){if(!o(i,l)){var s=a.name,r=i;if(angular.isDefined(s)){e.$widget.$pageScope.pageParams[s]=r;var c={};c[s]=r,t.changePageParams(e,{_source:n.attr("id"),event:a.eventbychange,params:c},null)}}})},reloadData:function(e,n){},makePrintable:function(e,n){"datepicker"===(n||{}).control&&e.find(".input-group-btn").remove()}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["$timeout","dataEx","widgetFactory","widgetValues","widgetInteraction","$rootScope","widgetDataUtil",function(e,n,t,a,i,l,o){function s(e){return!!(e.display||{}).style}t.defineWidget({type:"daterange",name:"时间范围",tag:"试用",desc:"包含开始和结束时间的选择器",group:"control",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){function n(n){var t=e.display||{};t.width&&(a=parseInt(t.width))&&n.css("width",a+"em")}var t,a;if(e.display,s(e)){(t=angular.element("<div></div>")).addClass("js-range-slider"),n(t);var i="30em";return e.width&&(i=e.width+"em"),'<div class="js-range-slider" style="width:'+i+'"></div>'}return t=angular.element('<input type="text">'),e.width&&t.css("width",e.width+"em"),t.attr({class:"form-control",format:e.format,formatter:e.formatter,label:e.label,showlabel:e.showlabel,readonly:e.readonly,eventbychange:e.eventbychange,eventtorefresh:e.eventtorefresh}),n(t),function(n){return e.label&&!0===e.showlabel?'<div class="form-group"><label class="control-label">'+(e.label||"")+'</label><div class="form-control-wrapper">'+n+"</div></div>":n}(t.prop("outerHTML"))},renderDynamicData:function(t,a,l){function o(n,a){e(function(){t.$widget.wParams[u]=d(n),t.$widget.wParams[p]=d(a)})}function r(e){var a={start:new Date,end:new Date};return angular.isDefined(e.initvalofstart)&&(a.start=n.evaluateByFieldVar(e.initvalofstart,{"@":t.$widget.$pageScope.pageParams},{ignores:[e.initvalofstart,e.initvalofend]})),angular.isDefined(e.initvalofend)&&(a.end=n.evaluateByFieldVar(e.initvalofend,{"@":t.$widget.$pageScope.pageParams},{ignores:[e.initvalofstart,e.initvalofend]})),a}function c(e,n){return e===n||n[u]&&n[p]&&e[u].valueOf()===n[u].valueOf&&e[p].valueOf()===n[p].valueOf()}function d(e){var n,t=e,a=l.format,i=l.formatter;return"date"===a?(e&&(n=moment(e).toDate()),t=n):"string"===a&&(t=(n=moment(e)).format(i)),t}var u=l.nameofstart,p=l.nameofend;s(l)?function(){var e=function(){var e=r(l),n={enabled:!l.readonly,bounds:{min:moment().add(-1,"days").toDate(),max:moment().endOf("hour").toDate()},defaultValues:{min:e.start,max:e.end},formatter:function(e){return moment(e).format(l.formatter)}},t=l.datelimit||{};if(!0===t.enabled&&t.maxunit&&t.maxspan){var a={};a[t.maxunit]=t.maxspan,n.range={max:a}}return n}(),n=$(".js-range-slider",a);n.dateRangeSlider(e),t.$on("$destroy",function(){n.dateRangeSlider("destroy")}),n.on("valuesChanged",function(e,n){o(n.values.min,n.values.max)})}():function(){var e=function(){var e={parentEl:a.parent(),autoApply:!0},n=l.datelimit||{};!0===n.enabled&&n.maxunit&&n.maxspan&&(e.dateLimit={},e.dateLimit[n.maxunit]=n.maxspan);var t=r(l);return e.startDate=t.start,e.endDate=t.end,l.formatter&&(l.formatter.indexOf("hh:mm:ss")&&(e.timePicker=!0,e.timePicker24Hour=!0),e.locale={format:l.formatter}),l.ranges&&(e.ranges={"今天":[moment().startOf("day"),moment().endOf("day")],"昨天":[moment().add(-1,"days").startOf("day"),moment().add(-1,"days").endOf("day")],"最后7天":[moment().add(-7,"days").startOf("day"),moment().endOf("day")],"最后30天":[moment().add(-30,"days").startOf("day"),moment().endOf("day")],"本月":[moment().startOf("month"),moment().endOf("day")],"上个月":[moment().add(-1,"months").startOf("month"),moment().add(-1,"months").endOf("month")]},e.showCustomRangeLabel=!1,e.alwaysShowCalendars=!0),e}();a.find("input").daterangepicker(e,function(e,n,t){o(e.toDate(),n.toDate())})}(),t.$watch("$widget.wParams",function(e,n){if(!c(e,n)&&angular.isDefined(u)){var o=e[u],s=e[p],r={};r[u]=t.$widget.$pageScope.pageParams[u]=o,t.$widget.$pageScope.pageParams[p]=s,r[p]=s,i.changePageParams(t,{_source:a.attr("id"),event:l.eventbychange,params:r},null)}},!0)},makePrintable:function(e){return e.find("input").val()}}})}])}(),function(){angular.module("oplus.udp").run(["widgetFactory","widgetInteraction","widgetUiHelper",function(e,n,t){e.defineWidget({type:"nav",name:"导航",group:"layout",configController:"NavWidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){return 0===(e.items||[]).length?t.getTemplateForUndefinedWidget("请设定导航菜单","fa-wrench fa-4x"):'<div><ul class="nav m-b" ng-class="\'nav-\'+(props.display.style||\'tabs\')"><li ng-class="{active:selected===$index}" ng-repeat="item in props.items track by $index"><a ng-click="clickItem($index)">{{item.title}}<span class="m-l op-clickable" title="刷新" ng-if="selected===$index" ng-click="refreshItem($index)"><i class="fa fa-refresh"></i></span></a></li></ul><div class="js-tab-content"></div></div>'},renderDynamicData:function(e,t,a){function i(a){var i=o(a),l=c[a].link||{},s=t.find(".js-tab-content").eq(0);s.find("#"+i).remove(),s.append('<div id="'+i+'"></div>');var r=angular.extend({},l,{target:"#"+i});n.openPage(r,{"@":e.$widget.$pageScope.pageParams},{})}function l(n){if(e.selected=n,s!==n){var a=o(n),l=o(s),r=t.find(".js-tab-content").eq(0);r.find("#"+l).hide();var c=r.find("#"+a);c.length>0?c.show():i(n),s=n}}function o(e){return r+d+"-"+e}var s=-1,r="_nav-",c=a.items||[],d=_.uniqueId();if(e.selected=-1,e.props=a,e.clickItem=l,e.refreshItem=i,c.length>0){var u=_.findIndex(c,{active:!0});u<0&&(u=function(){var n=-1;if(a.key){var t=e.$widget.$pageScope.pageParams[a.key];t&&(n=_.findIndex(a.items,{key:t}))}return n}()),l(u<0?0:u)}}}})}])}(),function(){"use strict";function e(e,n,t,a,i,l){n("WidgetConfigCtrl",{$scope:t,theWidget:i,$uibModalInstance:a});var o=t.currentPageId=e.pageId;t.onPageSelectorChange=function(e){t.selectedPage=e,t.itemInEdit.title||(t.itemInEdit.title=e.title)},t.addNavItem=function(){t.itemInEdit={},t.uwProps.items.push(t.itemInEdit),t.selectNavItem(t.uwProps.items.length-1)},t.deleteNavItem=function(e){t.uwProps.items.splice(e,1),t.selectNavItem(e-1<0?0:e-1)},t.selectNavItem=function(e){t.itemInEdit=t.uwProps.items[e],t.indexInEdit=e},t.sortStop=function(e,n){var a=n.item.sortable.dropindex;angular.isNumber(a)&&t.selectNavItem(a)},t.uwProps.items=t.uwProps.items||[],0===t.uwProps.items.length?t.addNavItem():t.selectNavItem(0),l.findAllPagesInfo().then(function(e){_.remove(e,function(e){return e.id===o}),t.pages=e}).catch(function(e){throw e})}angular.module("oplus.udp").controller("NavWidgetConfigCtrl",e),e.$inject=["$stateParams","$controller","$scope","$uibModalInstance","theWidget","widgetDataInterface"]}(),angular.module("oplus.udp").component("uinputSettingBasic",{templateUrl:"app/modules/udp/widgets/uinput-setting-basic.html",bindings:{props:"=",options:"<"}}),angular.module("oplus.udp").component("uinputSettingInteraction",{templateUrl:"app/modules/udp/widgets/uinput-setting-interaction.html",bindings:{props:"="},controller:["$scope",function(e){}]}),function(){"use strict";angular.module("oplus.udp").run(["widgetFactory","widgetInteraction",function(e,n){e.defineWidget({type:"button",name:"按钮",group:"control",eventProperty:"interaction.event",contentBuilder:{getTemplateForCompilation:function(e){var n=e.display||{},t=angular.element('<button class="btn"></button>'),a=n.css||"btn-default";return t.addClass(a).attr("ng-click","click($event)").html(e.label||"按钮"),t.prop("outerHTML")},renderDynamicData:function(e,t,a){e.click=function(t){var i=a.interaction||{};i?(n.handleInteraction(e,i,{"@":e.$widget.$pageScope.pageParams},t.currentTarget),i.event&&e.$widget.fireWidgetEvent(i.event)):a.eventbyclick&&e.$widget.fireWidgetEvent(a.eventbyclick)}}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["widgetValues","widgetFactory","$interval","widgetUiHelper",function(e,n,t,a){n.defineWidget({type:"timer",name:"定时器",group:"control",eventProperty:"eventbytimer",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){var n=e.display||{},t=n.style||"btn-default";return"hidden"===n.style?a.isEditMode()?"定时器 (不显示)":"":"switch"===n.style?'<label class="i-switch bg-info m-t-xs m-r"><input type="checkbox" ng-checked="timer" ng-click="toggleTimer()"><i></i></label>':'<button class="btn '+t+'" ng-click="toggleTimer()" ng-class="timer?\'btn-info\':\'btn-default\'">{{timer?"已启动":"已停止"}}</button>'},renderDynamicData:function(n,a,i){function l(){angular.isUndefined(n.timer)&&(n.timer=t(function(){o()&&n.$widget.fireWidgetEvent(i.eventbytimer)},1e3*i.interval))}function o(){return a.length>0&&a.is(":visible")}function s(){angular.isDefined(n.timer)&&(console.log("Timer widget stopped..."),t.cancel(n.timer),n.timer=void 0)}n.toggleTimer=function(){angular.isDefined(n.timer)?s():l()},n.$on("$destroy",function(){s()});var r=i.autoStart;if(i.name){var c=n.$widget.$pageScope.pageParams[i.name];!0===c||"true"===c?r=!0:!1!==c&&"false"!==c||(r=!1),n.$on(e.events.PageParamChanged,function(e,n){var t;t=(n.params||{})[i.name],angular.isDefined(t)&&(!1===t||"false"===t?s():!0!==t&&"true"!==t||l())})}r&&l()}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["$q","$filter","widgetFactory","widgetValues","widgetInteraction","$rootScope","widgetUiHelper","dataEx",function(e,n,t,a,i,l,o,s){t.defineWidget({type:"param",name:"页面参数",desc:"获取数据作为页面参数，可以供页面其它控件使用",group:"control",eventProperty:"eventbychange",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){var n='<button class="btn" uib-popover uib-popover-html="paramInfo" popover-trigger="\'focus\'" popover-placement="auto" xxxpopover-append-to-body="true"><i class="fa fa-code-fork"></i> 参数控件 '+(e.name||"")+"</button>";return o.isEditMode()?n:""},renderDynamicData:function(t,a,l){var o=l.data;(function(n){var a=e.defer();if(n){var i=s.evaluateByFieldVar(n,{"@":t.$widget.$pageScope.pageParams});i&&angular.isFunction(i.then)?i.then(function(e){a.resolve(e)}).catch(function(e){a.reject(e)}):angular.isDefined(i)?a.resolve(i):a.resolve(void 0)}else a.resolve(n);return a.promise})(o).then(function(e){if(angular.isDefined(e)){t.$widget.$pageScope.pageParams[l.name]=e;var a,o={};o[l.name]=e,a=n("json")(o),t.paramInfo="<pre>"+a+"</pre>";var s={};s[l.name]=e,i.changePageParams(t,{params:s},null)}}).catch(function(e){messageService.alertError("数据转换错误","无法解析数据表达式"+o+"："+e)})}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["widgetFactory","$interval","$rootScope",function(e,n,t){e.defineWidget({type:"clock",name:"时钟",group:"text",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){return""},renderDynamicData:function(e,t,a){function i(){angular.isDefined(e.timer)?(n.cancel(e.timer),e.timer=void 0):e.timer=n(function(){e.$widget.fireWidgetEvent(a.event)},1e3*a.interval)}var l={size:"md"};$(">.uw-body",t).flipcountdown(l),e.toggleTimer=i,!0===a.autoStart&&i(),e.$on("$destroy",function(){angular.isDefined(e.timer)&&n.cancel(e.timer)})}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["$q","$compile","debugTimer","conditionalFormat","widgetFactory","datasetService","widgetDataUtil","dataEx","widgetInteraction","widgetUiHelper","messageService",function(e,n,t,a,i,l,o,s,r,c,d){function u(e){(e.fields||[]).forEach(function(e){!e.field&&e.name&&(e.field=e.name,delete e.name)})}function p(e){var n=e.dataset,t=e.fields;return!(!n||!t||0===t.length)}function g(e,n){var t=(e=e||{}).display||{},a=t.pagination,i=t.height,l=t.stripe;t.noSearch&&(n.searching=!1),t.noPageSize&&(n.lengthChange=!1),"none"===a?n.paging=!1:n.pagingType="default"===a||""===a?"simple_numbers":a,l&&(n.stripeClasses=l.split(",")),i&&(n.scrollY=i),c.isEditMode()?(n.colResize={scrollY:n.scrollY,minColumnWidth:60,resizeTable:!1},n.autoWidth=!1,n.scrollX=!1):(n.colResize=!1,n.scrollX=!0)}function f(e){var n=[];return e.forEach(function(e,t){if(!e.hidden){var a={data:(e.field||b+t).replace(/\./gi,"\\."),defaultContent:e.defaultContent||""};e.width&&(a.width=e.width+"%"),n.push(a)}}),n}function m(e){return e.pivot&&!0===e.pivot._enabled}var b="!v";i.defineWidget({type:"datatable",name:"表格",configController:"DatatableWidgetConfigCtrl",group:"data",contentBuilder:{getTemplateForCompilation:function(e){if(u(e),!p(e))return c.getTemplateForUndefinedWidget("请在编辑状态下配置数据集","fa-wrench fa-4x");var n=e.fields;e.display=e.display||{};var t="",a="<thead><tr>";return n.forEach(function(e){e.hidden||(a+="<th>"+(e.label||e.field)+"</th>")}),a+="</tr></thead>",e.display.noBorder||(t="table-bordered"),e.display.noGrid&&(t+=" table-nogrid"),'<table class="table table-responsive '+t+'" style="width:100%">'+a+"</table>"},reloadData:function(e,n){$(".dataTables_wrapper",n).length>0&&n.data("theTable").ajax.reload()},renderDynamicData:function(n,i,s){function d(e){T||(T=!0,i.find(".uw-params").appendTo(i.find(".js-datatable-params")))}function b(e,n,t){var i=Date.now();if(C.$compile=(C.$compile||0)+(Date.now()-i),i=Date.now(),A&&A.length>0){var l=angular.element(e);a.evaluateRules(A,n,{},function(e,n){l.css("background-color",n.backColor||n.bgcolor)})}C.evaluateRules=(C.evaluateRules||0)+(Date.now()-i)}function v(){$("table tbody",i).on("click","[udp-page-link]",function(e){var n=$(this),t=JSON.parse(n.attr("udp-page-link"));r.openPage(t,{},{current:e.currentTarget})})}function h(){var e=s.interaction||{};e.click&&$("table tbody",i).on("click","tr",function(t){var a=$(this);a.hasClass("active")?a.removeClass("active"):(k.$("tr.active").removeClass("active"),a.addClass("active"));var i=k.row(a).data();"assignparam"===e.click?r.changePageParams(n,e,i,!0):"pagelink"===e.click&&r.openPage(e,i,{current:t.currentTarget}),t.stopPropagation()})}function w(e){e.buttons().container().appendTo($(".dataTables_filter",k.table().container()))}function y(e,a,i){x(e).then(function(e){P&&(P.$destroy(),P=null),P=n.$new(!1);var i=Date.now();a(e),C.callback=Date.now()-i,console.debug("ajaxFn",e.data.length,"records","timer(ms)",C),t.print().reset()}).catch(function(e){throw e})}function x(n){function t(e,n){var t=[];n.fields.forEach(function(e){t.push({source:e.field,convertFn:e.convertFn})});var a=Date.now(),i=o.convertFields(e,t);return C.convertField=(C.convertField||0)+Date.now()-a,i}var a=e.defer(),r=o.getWidgetParamValues(i,s),d=Date.now();return l.queryDataTable(D.id,r,n,!1).then(function(e){!0===M._enabled&&(e.data=o.pivotData(e.data,{rows:M.rows,columns:M.columns,values:M.values})),C.query=Date.now()-d,e.data=t(e.data,s),a.resolve(e),c.removeWidgetError(i)}).catch(function(e){var n="数据集 ["+D.id+"] 出错，查询参数 "+JSON.stringify(r)+"，错误信息："+e.message;c.showWidgetError(i,n)}),a.promise}if(u(s),p(s)){var k,P,C={},D=s.dataset,S=(s=s||{}).display||{},T=!1,A=S.rules,M=s.pivot||{};(function(n){var t=e.defer(),a=n.fields;m(n)&&x().then(function(){}).catch(function(e){t.reject(e)});var i=f(a);return t.resolve(i),t.promise})(s).then(function(e){var n={ajax:y,columns:e,dom:(S.noSearch?"<'js-datatable-params'>":"<<'pull-right' fB><'js-datatable-params'>>")+"<'row'<'col-sm-12'tr>><'row'<'col-sm-6'li><'col-sm-6'p>>",serverSide:!0===D.serverPage&&!1===M._enabled,buttons:["excel"],createdRow:b,drawCallback:d};g(s,n);var t=$("table",i);(k=t.DataTable(n)).on("column-resized.dt",function(e,n,t){var a=i.find(".dataTable").width(),l=i.find(".dataTable thead th"),o=0;l.each(function(e,n){if(e===l.length-1)s.fields[e].width=100-o;else{var t=_.round($(n).outerWidth()/a*100,4);o+=t,s.fields[e].width=t}}),i.attr("uw-props",JSON.stringify(s))}),i.data("theTable",k),h(),v(),w(k)}).catch(function(e){throw e}),n.$on("$destroy",function(){k&&(k.off("click"),k.off("column-resized.dt"),k.destroy(!0)),i.removeData("theTable")})}}}})}])}(),function(e){"use strict";e.extend(!0,e.fn.dataTable.defaults,{language:{sProcessing:"处理中...",sLengthMenu:"_MENU_",sZeroRecords:"没有匹配结果",sInfo:"_START_ - _END_ / _TOTAL_",sInfoEmpty:"共 0 项",sInfoFiltered:"(由 _MAX_ 项结果过滤)",sInfoPostFix:"",sSearch:"",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"&laquo;",sPrevious:"&lsaquo;",sNext:"&rsaquo;",sLast:"&raquo;"}}})}(jQuery),function(){"use strict";function e(e,n,t,a,i,l){t("WidgetConfigCtrl",{$scope:e,theWidget:i,$uibModalInstance:a}),e.uwProps.fields=e.uwProps.fields||[],e.uwProps.display=e.uwProps.display||{},e.rules=e.uwProps.display.rules=e.uwProps.display.rules||[],e.current={index:0},e.addField=function(){e.inserted={field:"",label:void 0},e.uwProps.fields.push(e.inserted),e.current.index=e.uwProps.fields.length-1},e.addAllFields=function(n){n.forEach(function(n){_.find(e.uwProps.fields,function(e){return e.field===n.name})||e.uwProps.fields.push({field:n.name})})},e.removeAllFields=function(){e.uwProps.fields=[],e.current.index=-1},e.removeField=function(t){l.confirmWarning("移除字段","要移除字段吗？",function(){n(function(){e.uwProps.fields.splice(t,1)})})},e.addRule=function(){e.currentRule={},e.rules.push(e.currentRule)},e.removeRule=function(n){l.confirm("","移除规则",function(){e.rules.splice(n,1)})},e.selectRule=function(n){e.currentRule=e.rules[n]},e.sortableOptions={placehodler:"ui-sortable-placeholder","ui-floating":!0,stop:function(n,t){var a=t.item.sortable.dropindex;angular.isNumber(a)&&(e.current.index=a)}},e.uwProps.fields.forEach(function(e,n){e.name&&(console.log("Migrate datatable props `name` to `field`"),e.field=e.name,delete e.name)})}angular.module("oplus.udp").controller("DatatableWidgetConfigCtrl",e),e.$inject=["$scope","$timeout","$controller","$uibModalInstance","theWidget","messageService"]}(),function(){"use strict";function e(e,n,t,a,i,l,o,s){function r(e){return(e.dataset||{}).id&&e.xAxis&&e.yAxes}function c(e){return r(e)?'<div class="js-echarts-wrapper" style="width: 100%;height:'+((e.display||{}).height?"100%":"400px")+';"></div>':a.getTemplateForUndefinedWidget("数据源或数据字段没有设置好","fa-wrench fa-4x")}function d(e,n,t,a){var i=e.xAxis.axisType||"category",l=T;t&&t.radar?(t.radar.indicator=[],n.forEach(function(e){t.radar.indicator.push({name:e[l]})})):"category"===i&&(t._maintype===y||t._maintype===P||t._maintype===k||function(){var e=[];n.forEach(function(n){e.push(n[l])}),t.xAxis[0].data=e}()),function(){var o=0;e.yAxes.forEach(function(r,c){function d(t,o){if(a&&g.data.shift(),f){var c=t[f];(angular.isUndefined(h.min)||c<h.min)&&(h.min=c),(angular.isUndefined(h.max)||c>h.max)&&(h.max=c)}if(g.type===k)g.data.push({name:t[l],value:t[p]});else if(g.type===P)g.data.push({name:g.name,value:t[p]});else if(g.type===D){var d=s.getGeoCoordMap(e.display.mapType)[t[l]];if(d){var u=[];if(b(r))for(var C=0;C<Object.keys(r.auxData).length;C++){var _=v(p,C);u.push(t[_])}else u.push(t[p]);g.data.push({name:t[l],value:d.concat(u)})}}else if(g.type===x)m.value.push(t[p]);else if(g.type===y)g.data.push({name:t[l],value:t[p]});else if("category"===i)g.data.push(t[p]);else if(g.data.push([t[l],t[p]]),$>0&&"time"===i&&g.type===S&&o<w-1){var T=moment(t[l]).valueOf(),A=moment(n[o+1][l]).valueOf();Math.abs(T-A)>$&&g.data.push(A-1,null)}}var p=A+c,g=t.series[c];g.data=a?t.series[c].data:[];var f,m={value:[],name:g.name},h={},w=n.length;u(r)&&(r.chartType===k?f=p:r.chartType===D&&(f=v(p,1)));var $,C=r.contTime||{};if(C.enabled&&($=moment.duration(C.limit,C.unit).asMilliseconds()),n.forEach(function(e,n){d(e,n)}),g.type===x&&g.data.push(m),u(r)){var _=t.visualMap[o++];_.min=Math.floor(h.min),_.max=Math.ceil(h.max)}})}()}function u(e){return e.chartType===k?e.auxData:e.chartType===D?e.auxData:void 0}function p(e){return"line"===e.seriesType?{S:e.seriesName,X:e.data[0]||e.name,Y:e.data[1]||e.value}:{S:e.seriesName,X:e.name,Y:e.value}}function g(e){var n={color:o.calcPaletteColors(e)};echarts.registerTheme(e,n)}function f(a,i,c,d){function f(e,n){function t(t,i){function o(){if(!b(t))return t.pointSize||10;var e,n,a=t.auxData||{};try{e=a.size.range[1].k,n=a.size.range[1].v}catch(e){}var i=e||t.pointSize||10;return function(e){return Math.min(1,e[2]/n)*i}}var s,r={name:t.legend||t.label||t.field||"未命名",type:t.chartType||e,data:[],label:{}};u(t)&&function(e){var n,t,a=e.auxData;try{n=a.color.range[0].k,t=a.color.range[1].k,a.color.range[1].v}catch(e){}p.visualMap=p.visualMap||[];var o={type:"piecewise",seriesIndex:i,show:!!e.showVisualMap,textStyle:{color:d.fontColor}};if(angular.isDefined(t)){var s=0;e.chartType===D&&(Object.keys(a).forEach(function(e,n){"color"===e&&(s=n)}),s=2+s),o.dimension=s,o.inRange={color:[n,t]},o.left=l.left,l.left+=120}p.visualMap.push(o)}(t);var c={show:!!t.pointLabel,position:t.pointLabel,formatter:t.labelFormatter};if(a===y||t.chartType===y)s={itemStyle:{normal:{label:c}}};else if(t.chartType===k);else if(t.chartType===D)r.symbolSize=o(),s={animation:!0,symbol:t.pointShape||"circle",tooltip:{formatter:function(e,n,t){return e.seriesName+"<br/>"+e.name+": "+e.value[2]+" "+e.value[3]}}},b(t)||(s.itemStyle={normal:{color:t.pointColor,label:c},emphasis:{borderColor:d.borderColor,borderWidth:1}});else if(a===P||t.chartType===P)s={pointer:{width:8,length:"100%"},startAngle:210,endAngle:-30,radius:"100%",min:0,max:100,detail:{formatter:"{value}%"}};else{s={symbol:"empty"+(t.pointShape||"circle"),itemStyle:{normal:{label:c}},lineStyle:{normal:{width:t.lineWidth||2,type:t.lineType}}},angular.isNumber(t.pointSize)&&(s.symbolSize=t.pointSize,s.showSymbol=t.pointSize>0);var g=t.pointColor||t.lineColor;g&&(s.itemStyle.normal.color=g),(g=t.lineColor)&&(s.lineStyle.normal.color=g),t.fillOpacity&&(s.areaStyle={normal:{opacity:t.fillOpacity/10}})}return _.merge(r,s),e===k?(r.geoIndex=0,t.chartType===D&&(r.coordinateSystem="geo")):e===y?n.display.chart===C&&(r.radius=["40%","55%"]):r.yAxisIndex="right"===t.position?1:0,n.display.stack&&(r.stack="总量"),r}n.xAxis=n.xAxis||{},n.yAxes=n.yAxes||[],n.display=n.display||{};var l={left:0},r=[],c=[],d=o.calcColors(i,n.display.theme),p=function(){var t={_maintype:e,animation:!0,animationDuration:0,title:{text:""},tooltip:{trigger:e===P||e===k||e===y||e===x?"item":"axis"},legend:{show:"none"!==(n.display.legend||{}).position,selected:{},data:c},series:r,toolbox:{feature:{magicType:{}}}};return!0===(n.display.tools||{}).saveImage&&(t.toolbox.feature.saveAsImage={name:n.title||"图形"}),t}();return e===k?function(){var e=n.display.mapType;p.geo=[{map:e,show:!0,nameMap:s.getNameMap(e),roam:n.display.zoomable,label:{normal:{show:!!n.display.showLabel}},itemStyle:{normal:{areaColor:"rgba(128,128,128,0.5)",borderColor:d.borderColor}}}]}():e===x?p.radar={}:e===y||e===P||(p.xAxis=function(){var e={type:n.xAxis.axisType||"category",axisLabel:{show:!0,color:d.fontColor},splitLine:{show:!!n.display.showGridLineX,lineStyle:{color:d.borderColor}}},t=n.xAxis.axisLabel;return t&&"time"===n.xAxis.axisType&&(e.axisLabel.formatter=function(e,n){return moment(e).format(t)}),[e]}(),p.yAxis=function(){var e=[],t={position:"left",type:"value",splitLine:{show:!!(n.display||{}).showGridLineY,lineStyle:{color:d.borderColor}}};if(e.push(t),_.find(n.yAxes,function(e){return"right"===e.position})){var a=_.merge({},t,{position:"right"});e.push(a)}return e}(),e===P&&(p.legend.show=!1)),e===S&&n.display.rangeSlider&&(p.dataZoom=[{type:"inside",start:0,end:100},{show:!0,realtime:!0,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},start:0,end:100}]),n.yAxes.forEach(function(e,n){var a=t(e,n);e.chartType===k||(c.push(a.name),!0===e.hidden&&(p.legend.selected[a.name]=!1)),r.push(a)}),function(e){var n=d.fontColor,t={axisLine:{lineStyle:{color:d.borderColor}},axisLabel:{color:d.fontColor}},a={textStyle:{color:n}},i=e.yAxis,l=e.xAxis;i&&i.forEach(function(e){_.merge(e,t)}),l&&l.forEach(function(e){_.merge(e,t)}),_.merge(e,{legend:a})}(p),p}function m(e,t){var a=d.interaction;if(a&&a.click&&a.pageId){var i=p(e);i&&n(function(){l.openPage(a,i,{current:w})})}}if(d=d||{},r(d)){var v,w,T=c.find("div.js-echarts-wrapper"),A=d.display||{};g(A.palette?A.palette:"default"),function(){var n=e.defer();if(a===k){var t=d.display.mapType;$.get("app/modules/udp/assets/map-json/"+t+".json",function(e){echarts.registerMap(t,e),n.resolve()}).fail(function(){n.reject(new Error("无法加载地图数据文件"+t))})}else n.resolve();return n.promise}().then(function(){n(function(){w=echarts.init(T[0],A.palette||"default"),v=f(a,d),h(c,d,w,v),c.data("_theChart",w),w.on("click",m)},0)}).catch(function(e){t.alertError(e.message)}),i.$on("WIDGET_RESIZE",function(e,n){var t="100%";(n||{}).height&&(t=n.height),T.css("height",t),w.resize()})}}function m(e,n){var t=[];return[n.xAxis].concat(n.yAxes).forEach(function(e,n){var a=0===n?T:A+(n-1);if(t.push({source:e.field,target:a,convertFn:e.convertFn}),b(e)){var i=e.auxData||{};Object.keys(i).forEach(function(e,n){var l=i[e];t.push({source:l.field,target:v(a,n),convertFn:l.convertFn})})}}),i.convertFields(e,t)}function b(e){return e.dynamicPoint&&e.auxData}function v(e,n){return e+"_"+n}function h(e,n,a,l){function o(t){d(n,t,l,!1);var i;i=r?s():l,a.setOption(i),e.data(M,Date.now()),e.find(".js-echarts-wrapper > div").show()}function s(){var e;return l._isHorizontal?e=l:angular.isArray(l.yAxis)&&l.yAxis.length>1?(t.alertError("错误","水平放置的图形不支持多条Y轴"),e=l):(e={},Object.keys(l).forEach(function(n){"yAxis"===n?e.xAxis=l[n]:"xAxis"===n?e.yAxis=l[n]:e[n]=l[n]}),e._isHorizontal=!0),e}var r=(n.display||{}).horizontal;e.find(".js-echarts-wrapper");i.queryData(e,n).then(function(e){o(m(e.records,n))}).catch(function(e){o([])})}function w(e,n){var t=e.$widget.uwProps,a=n.data("_theChart");a&&((t.datastream||{}).enabled?function(e,n,t,a){var l=a.getOption(),o=n.data(M);if(o){e.$widget.wParams._NO_RELOAD=!0,e.$widget.wParams[M]=o;var s=Date.now();i.queryData(n,t.datastream).then(function(e){if(e.records.length>0){n.data(M,s);var i=m(e.records,t);d(t,i,l,!0),a.setOption(l)}}).catch(function(e){console.error("Cannot render chart due to "+e.message,l)})}}(e,n,t,a):h(n,t,a,a.getOption()))}var y="pie",x="radar",k="map",P="gauge",C="doughnut",D="scatter",S="line",T="!vx",A="!vy",M="_streamLastUpdate";this.getContentBuilder=function(e){return{getTemplateForCompilation:c,renderDynamicData:function(n,t,a){return f(e,n,t,a)},reloadData:w}}}angular.module("oplus.udp").service("echartsWidgetBuilder",e),e.$inject=["$q","$timeout","messageService","widgetUiHelper","widgetDataUtil","widgetInteraction","themeService","mapConfig"]}(),function(){"use strict";function e(){this.getNameMap=function(e){return"world"===e?t:{}},this.getGeoCoordMap=function(t){return"world"===t?e:"china"===t?n:{}};var e={"阿富汗":[69.11,34.28],"阿尔巴尼亚":[19.49,41.18],"阿尔及利亚":[3.08,36.42],"美属萨摩亚":[-170.43,-14.16],"安道​​尔":[1.32,42.31],"安哥拉":[13.15,-8.5],"安提瓜和巴布达":[-61.48,17.2],"阿根廷":[-60,-36.3],"亚美尼亚":[44.31,40.1],"阿鲁巴":[-70.02,12.32],"澳大利亚":[149.08,-35.15],"奥地利":[16.22,48.12],"阿塞拜疆":[49.56,40.29],"巴哈马":[-77.2,25.05],"巴林":[50.3,26.1],"孟加拉国":[90.26,23.43],"巴巴多斯":[-59.3,13.05],"白俄罗斯":[27.3,53.52],"比利时":[4.21,50.51],"伯利兹":[-88.3,17.18],"贝宁":[2.42,6.23],"不丹":[89.45,27.31],"玻利维亚":[-68.1,-16.2],"波斯尼亚和黑塞哥维那":[18.26,43.52],"博茨瓦纳":[25.57,-24.45],"巴西":[-47.55,-15.47],"英属维尔京群岛":[-64.37,18.27],"文莱":[115,4.52],"保加利亚":[23.2,42.45],"布基纳法索":[-1.3,12.15],"布隆迪":[29.18,-3.16],"柬埔寨":[104.55,11.33],"喀麦隆":[11.35,3.5],"加拿大":[-75.42,45.27],"佛得角":[-23.34,15.02],"开曼群岛":[-81.24,19.2],"中非共和国":[18.35,4.23],"乍得":[14.59,12.1],"智利":[-70.4,-33.24],"中国":[116.2,39.55],"哥伦比亚":[-74,4.34],"科摩罗":[43.16,-11.4],"刚果":[15.12,-4.09],"哥斯达黎加":[-84.02,9.55],"科特迪瓦":[-5.17,6.49],"克罗地亚":[15.58,45.5],"古巴":[-82.22,23.08],"塞浦路斯":[33.25,35.1],"捷克共和国":[14.22,50.05],"朝鲜":[125.3,39.09],"刚果(扎伊尔)":[15.15,-4.2],"丹麦":[12.34,55.41],"吉布提":[42.2,11.08],"多米尼加":[-61.24,15.2],"多米尼加共和国":[-69.59,18.3],"东帝汶":[125.34,-8.29],"厄瓜多尔":[-78.35,-.15],"埃及":[31.14,30.01],"萨尔瓦多":[-89.1,13.4],"赤道几内亚":[8.5,3.45],"厄立特里亚":[38.55,15.19],"爱沙尼亚":[24.48,59.22],"埃塞俄比亚":[38.42,9.02],"福克兰群岛(马尔维纳斯群岛)":[-59.51,-51.4],"法罗群岛":[-6.56,62.05],"斐济":[178.3,-18.06],"芬兰":[25.03,60.15],"法国":[2.2,48.5],"法属圭亚那":[-52.18,5.05],"法属波利尼西亚":[-149.34,-17.32],"加蓬":[9.26,.25],"冈比亚":[-16.4,13.28],"格鲁吉亚":[44.5,41.43],"德国":[13.25,52.3],"加纳":[-.06,5.35],"希腊":[23.46,37.58],"格陵兰":[-51.35,64.1],"瓜德罗普岛":[-61.44,16],"危地马拉":[-90.22,14.4],"根西岛":[-2.33,49.26],"几内亚":[-13.49,9.29],"几内亚比绍":[-15.45,11.45],"圭亚那":[-58.12,6.5],"海地":[-72.2,18.4],"赫德岛和麦当劳群岛":[74,-53],"洪都拉斯":[-87.14,14.05],"匈牙利":[19.05,47.29],"冰岛":[-21.57,64.1],"印度":[77.13,28.37],"印度尼西亚":[106.49,-6.09],"伊朗":[51.3,35.44],"伊拉克":[44.3,33.2],"爱尔兰":[-6.15,53.21],"以色列":[35.12,31.47],"意大利":[12.29,41.54],"牙买加":[-76.5,18],"约旦":[35.52,31.57],"哈萨克斯坦":[71.3,51.1],"肯尼亚":[36.48,-1.17],"基里巴斯":[173,1.3],"科威特":[48,29.3],"吉尔吉斯斯坦":[74.46,42.54],"老挝":[102.36,17.58],"拉脱维亚":[24.08,56.53],"黎巴嫩":[35.31,33.53],"莱索托":[27.3,-29.18],"利比里亚":[-10.47,6.18],"阿拉伯利比亚民众国":[13.07,32.49],"列支敦士登":[9.31,47.08],"立陶宛":[25.19,54.38],"卢森堡":[6.09,49.37],"马达加斯加":[47.31,-18.55],"马拉维":[33.48,-14],"马来西亚":[101.41,3.09],"马尔代夫":[73.28,4],"马里":[-7.55,12.34],"马耳他":[14.31,35.54],"马提尼克岛":[-61.02,14.36],"毛里塔尼亚":[57.3,-20.1],"马约特岛":[45.14,-12.48],"墨西哥":[-99.1,19.2],"密克罗尼西亚(联邦) ":[158.09,6.55],"摩尔多瓦共和国":[28.5,47.02],"莫桑比克":[32.32,-25.58],"缅甸":[96.2,16.45],"纳米比亚":[17.04,-22.35],"尼泊尔":[85.2,27.45],"荷兰":[4.54,52.23],"荷属安的列斯":[-69,12.05],"新喀里多尼亚":[166.3,-22.17],"新西兰":[174.46,-41.19],"尼加拉瓜":[-86.2,12.06],"尼日尔":[2.06,13.27],"尼日利亚":[7.32,9.05],"诺福克岛":[168.43,-45.2],"北马里亚纳群岛":[145.45,15.12],"挪威":[10.45,59.55],"阿曼":[58.36,23.37],"巴基斯坦":[73.1,33.4],"帕劳":[134.28,7.2],"巴拿马":[-79.25,9],"巴布亚新几内亚":[147.08,-9.24],"巴拉圭":[-57.3,-25.1],"秘鲁":[-77,-12],"菲律宾":[121.03,14.4],"波兰":[21,52.13],"葡萄牙":[-9.1,38.42],"波多黎各":[-66.07,18.28],"卡塔尔":[51.35,25.15],"韩国":[126.58,37.31],"罗马尼亚":[26.1,44.27],"俄罗斯":[37.35,55.45],"卢旺达":[30.04,-1.59],"圣基茨和尼维斯":[-62.43,17.17],"圣卢西亚":[-60.58,14.02],"圣皮埃尔和密克隆":[-56.12,46.46],"圣文森特和格林纳丁斯":[-61.1,13.1],"萨摩亚":[-171.5,-13.5],"圣马力诺":[12.3,43.55],"圣多美和普林西比":[6.39,.1],"沙特阿拉伯":[46.42,24.41],"塞内加尔":[-17.29,14.34],"塞拉利昂":[-13.17,8.3],"斯洛伐克":[17.07,48.1],"斯洛文尼亚":[14.33,46.04],"所罗门群岛":[159.57,-9.27],"索马里":[45.25,2.02],"比勒陀利亚":[28.12,-25.44],"西班牙":[-3.45,40.25],"苏丹":[32.35,15.31],"苏里南":[-55.1,5.5],"斯威士兰":[31.06,-26.18],"瑞典":[18.03,59.2],"瑞士":[7.28,46.57],"阿拉伯叙利亚共和国":[36.18,33.3],"塔吉克斯坦":[68.48,38.33],"泰国":[100.35,13.45],"马其顿":[21.26,42.01],"多哥":[1.2,6.09],"汤加":[-174,-21.1],"突尼斯":[10.11,36.5],"土耳其":[32.54,39.57],"土库曼斯坦":[57.5,38],"图瓦卢":[179.13,-8.31],"乌干达":[32.3,.2],"乌克兰":[30.28,50.3],"阿联酋":[54.22,24.28],"英国":[-.05,51.36],"坦桑尼亚":[35.45,-6.08],"美国":[-77.02,39.91],"美属维尔京群岛":[-64.56,18.21],"乌拉圭":[-56.11,-34.5],"乌兹别克斯坦":[69.1,41.2],"瓦努阿图":[168.18,-17.45],"委内瑞拉":[-66.55,10.3],"越南":[105.55,21.05],"南斯拉夫":[20.37,44.5],"赞比亚":[28.16,-15.28],"津巴布韦":[31.02,-17.43],"日本":[139.69,35.7]},n={"海门":[121.15,31.89],"鄂尔多斯":[109.781327,39.608266],"招远":[120.38,37.35],"舟山":[122.207216,29.985295],"齐齐哈尔":[123.97,47.33],"盐城":[120.13,33.38],"赤峰":[118.87,42.28],"青岛":[120.33,36.07],"乳山":[121.52,36.89],"金昌":[102.188043,38.520089],"泉州":[118.58,24.93],"莱西":[120.53,36.86],"日照":[119.46,35.42],"胶南":[119.97,35.88],"南通":[121.05,32.08],"拉萨":[91.11,29.97],"云浮":[112.02,22.93],"梅州":[116.1,24.55],"文登":[122.05,37.2],"上海":[121.48,31.22],"攀枝花":[101.718637,26.582347],"威海":[122.1,37.5],"承德":[117.93,40.97],"厦门":[118.1,24.46],"汕尾":[115.375279,22.786211],"潮州":[116.63,23.68],"丹东":[124.37,40.13],"太仓":[121.1,31.45],"曲靖":[103.79,25.51],"烟台":[121.39,37.52],"福州":[119.3,26.08],"瓦房店":[121.979603,39.627114],"即墨":[120.45,36.38],"抚顺":[123.97,41.97],"玉溪":[102.52,24.35],"张家口":[114.87,40.82],"阳泉":[113.57,37.85],"莱州":[119.942327,37.177017],"湖州":[120.1,30.86],"汕头":[116.69,23.39],"昆山":[120.95,31.39],"宁波":[121.56,29.86],"湛江":[110.359377,21.270708],"揭阳":[116.35,23.55],"荣成":[122.41,37.16],"连云港":[119.16,34.59],"葫芦岛":[120.836932,40.711052],"常熟":[120.74,31.64],"东莞":[113.75,23.04],"河源":[114.68,23.73],"淮安":[119.15,33.5],"泰州":[119.9,32.49],"南宁":[108.33,22.84],"营口":[122.18,40.65],"惠州":[114.4,23.09],"江阴":[120.26,31.91],"蓬莱":[120.75,37.8],"韶关":[113.62,24.84],"嘉峪关":[98.289152,39.77313],"广州":[113.23,23.16],"延安":[109.47,36.6],"太原":[112.53,37.87],"清远":[113.01,23.7],"中山":[113.38,22.52],"昆明":[102.73,25.04],"寿光":[118.73,36.86],"盘锦":[122.070714,41.119997],"长治":[113.08,36.18],"深圳":[114.07,22.62],"珠海":[113.52,22.3],"宿迁":[118.3,33.96],"咸阳":[108.72,34.36],"铜川":[109.11,35.09],"平度":[119.97,36.77],"佛山":[113.11,23.05],"海口":[110.35,20.02],"江门":[113.06,22.61],"章丘":[117.53,36.72],"肇庆":[112.44,23.05],"大连":[121.62,38.92],"临汾":[111.5,36.08],"吴江":[120.63,31.16],"石嘴山":[106.39,39.04],"沈阳":[123.38,41.8],"苏州":[120.62,31.32],"茂名":[110.88,21.68],"嘉兴":[120.76,30.77],"长春":[125.35,43.88],"胶州":[120.03336,36.264622],"银川":[106.27,38.47],"张家港":[120.555821,31.875428],"三门峡":[111.19,34.76],"锦州":[121.15,41.13],"南昌":[115.89,28.68],"柳州":[109.4,24.33],"三亚":[109.511909,18.252847],"自贡":[104.778442,29.33903],"吉林":[126.57,43.87],"阳江":[111.95,21.85],"泸州":[105.39,28.91],"西宁":[101.74,36.56],"宜宾":[104.56,29.77],"呼和浩特":[111.65,40.82],"成都":[104.06,30.67],"大同":[113.3,40.12],"镇江":[119.44,32.2],"桂林":[110.28,25.29],"张家界":[110.479191,29.117096],"宜兴":[119.82,31.36],"北海":[109.12,21.49],"西安":[108.95,34.27],"金坛":[119.56,31.74],"东营":[118.49,37.46],"牡丹江":[129.58,44.6],"遵义":[106.9,27.7],"绍兴":[120.58,30.01],"扬州":[119.42,32.39],"常州":[119.95,31.79],"潍坊":[119.1,36.62],"重庆":[106.54,29.59],"台州":[121.420757,28.656386],"南京":[118.78,32.04],"滨州":[118.03,37.36],"贵阳":[106.71,26.57],"无锡":[120.29,31.59],"本溪":[123.73,41.3],"克拉玛依":[84.77,45.59],"渭南":[109.5,34.52],"马鞍山":[118.48,31.56],"宝鸡":[107.15,34.38],"焦作":[113.21,35.24],"句容":[119.16,31.95],"北京":[116.46,39.92],"徐州":[117.2,34.26],"衡水":[115.72,37.72],"包头":[110,40.58],"绵阳":[104.73,31.48],"乌鲁木齐":[87.68,43.77],"枣庄":[117.57,34.86],"杭州":[120.19,30.26],"淄博":[118.05,36.78],"鞍山":[122.85,41.12],"溧阳":[119.48,31.43],"库尔勒":[86.06,41.68],"安阳":[114.35,36.1],"开封":[114.35,34.79],"济南":[117,36.65],"德阳":[104.37,31.13],"温州":[120.65,28.01],"九江":[115.97,29.71],"邯郸":[114.47,36.6],"临安":[119.72,30.23],"兰州":[103.73,36.03],"沧州":[116.83,38.33],"临沂":[118.35,35.05],"南充":[106.110698,30.837793],"天津":[117.2,39.13],"富阳":[119.95,30.07],"泰安":[117.13,36.18],"诸暨":[120.23,29.71],"郑州":[113.65,34.76],"哈尔滨":[126.63,45.75],"聊城":[115.97,36.45],"芜湖":[118.38,31.33],"唐山":[118.02,39.63],"平顶山":[113.29,33.75],"邢台":[114.48,37.05],"德州":[116.29,37.45],"济宁":[116.59,35.38],"荆州":[112.239741,30.335165],"宜昌":[111.3,30.7],"义乌":[120.06,29.32],"丽水":[119.92,28.45],"洛阳":[112.44,34.7],"秦皇岛":[119.57,39.95],"株洲":[113.16,27.83],"石家庄":[114.48,38.03],"莱芜":[117.67,36.19],"常德":[111.69,29.05],"保定":[115.48,38.85],"湘潭":[112.91,27.87],"金华":[119.64,29.12],"岳阳":[113.09,29.37],"长沙":[113,28.21],"衢州":[118.88,28.97],"廊坊":[116.7,39.53],"菏泽":[115.480656,35.23375],"合肥":[117.27,31.86],"武汉":[114.31,30.52],"大庆":[125.03,46.58]},t={Afghanistan:"阿富汗",Albania:"阿尔巴尼亚",Algeria:"阿尔及利亚",Andorra:"安道尔",Angola:"安哥拉",Antarctica:"南极洲","Antigua and Barbuda":"安提瓜和巴布达",Argentina:"阿根廷",Armenia:"亚美尼亚",Australia:"澳大利亚",Austria:"奥地利",Azerbaijan:"阿塞拜疆","The Bahamas":"巴哈马",Bahrain:"巴林",Bangladesh:"孟加拉国",Barbados:"巴巴多斯",Belarus:"白俄罗斯",Belgium:"比利时",Belize:"伯利兹",Benin:"贝宁",Bermuda:"百慕大",Bhutan:"不丹",Bolivia:"玻利维亚","Bosnia and Herzegovina":"波斯尼亚和黑塞哥维那",Botswana:"博茨瓦纳",Brazil:"巴西",Brunei:"文莱",Bulgaria:"保加利亚","Burkina Faso":"布基纳法索",Burundi:"布隆迪",Cambodia:"柬埔寨",Cameroon:"喀麦隆",Canada:"加拿大","Cape Verde":"佛得角","Central African Republic":"中非共和国",Chad:"乍得",Chile:"智利",China:"中国",Colombia:"哥伦比亚",Comoros:"科摩罗","Republic of the Congo":"刚果共和国","Costa Rica":"哥斯达黎加",Croatia:"克罗地亚",Cuba:"古巴",Cyprus:"塞浦路斯","Czech Republic":"捷克共和国",Denmark:"丹麦",Djibouti:"吉布提",Dominica:"多米尼加","Dominican Republic":"多明尼加共和国",Ecuador:"厄瓜多尔",Egypt:"埃及","El Salvador":"萨尔瓦多","Equatorial Guinea":"赤道几内亚",Eritrea:"厄立特里亚",Estonia:"爱沙尼亚",Ethiopia:"埃塞俄比亚","Falkland Islands":"福克兰群岛","Faroe Islands":"法罗群岛",Fiji:"斐济",Finland:"芬兰",France:"法国","French Guiana":"法属圭亚那","French Southern and Antarctic Lands":"法属南半球和南极领地",Gabon:"加蓬",Gambia:"冈比亚","Gaza Strip":"加沙",Georgia:"格鲁吉亚",Germany:"德国",Ghana:"加纳",Greece:"希腊",Greenland:"格陵兰",Grenada:"格林纳达",Guadeloupe:"瓜德罗普",Guatemala:"危地马拉",Guinea:"几内亚","Guinea Bissau":"几内亚比绍",Guyana:"圭亚那",Haiti:"海地",Honduras:"洪都拉斯","Hong Kong":"香港",Hungary:"匈牙利",Iceland:"冰岛",India:"印度",Indonesia:"印尼",Iran:"伊朗",Iraq:"伊拉克","Iraq-Saudi Arabia Neutral Zone":"伊拉克阿拉伯中立区",Ireland:"爱尔兰","Isle of Man":"马恩岛",Israel:"以色列",Italy:"意大利","Ivory Coast":"科特迪瓦",Jamaica:"牙买加","Jan Mayen":"扬马延岛",Japan:"日本",Jordan:"约旦",Kazakhstan:"哈萨克斯坦",Kenya:"肯尼亚",Kerguelen:"凯尔盖朗群岛",Kiribati:"基里巴斯","North Korea":"北朝鲜","South Korea":"韩国",Kuwait:"科威特",Kyrgyzstan:"吉尔吉斯斯坦",Laos:"老挝",Latvia:"拉脱维亚",Lebanon:"黎巴嫩",Lesotho:"莱索托",Liberia:"利比里亚",Libya:"利比亚",Liechtenstein:"列支敦士登",Lithuania:"立陶宛",Luxembourg:"卢森堡",Macau:"澳门",Macedonia:"马其顿",Madagascar:"马达加斯加",Malawi:"马拉维",Malaysia:"马来西亚",Maldives:"马尔代夫",Mali:"马里",Malta:"马耳他",Martinique:"马提尼克",Mauritania:"毛里塔尼亚",Mauritius:"毛里求斯",Mexico:"墨西哥",Moldova:"摩尔多瓦",Monaco:"摩纳哥",Mongolia:"蒙古",Morocco:"摩洛哥",Mozambique:"莫桑比克",Myanmar:"缅甸",Namibia:"纳米比亚",Nepal:"尼泊尔",Netherlands:"荷兰","New Caledonia":"新喀里多尼亚","New Zealand":"新西兰",Nicaragua:"尼加拉瓜",Niger:"尼日尔",Nigeria:"尼日利亚","Northern Mariana Islands":"北马里亚纳群岛",Norway:"挪威",Oman:"阿曼",Pakistan:"巴基斯坦",Panama:"巴拿马","Papua New Guinea":"巴布亚新几内亚",Paraguay:"巴拉圭",Peru:"秘鲁",Philippines:"菲律宾",Poland:"波兰",Portugal:"葡萄牙","Puerto Rico":"波多黎各",Qatar:"卡塔尔",Reunion:"留尼旺岛",Romania:"罗马尼亚",Russia:"俄罗斯",Rwanda:"卢旺达","San Marino":"圣马力诺","Sao Tome and Principe":"圣多美和普林西比","Saudi Arabia":"沙特阿拉伯",Senegal:"塞内加尔",Seychelles:"塞舌尔","Sierra Leone":"塞拉利昂",Singapore:"新加坡",Slovakia:"斯洛伐克",Slovenia:"斯洛文尼亚","Solomon Islands":"所罗门群岛",Somalia:"索马里","South Africa":"南非",Spain:"西班牙","Sri Lanka":"斯里兰卡","St. Christopher-Nevis":"圣","St. Lucia":"圣露西亚","St. Vincent and the Grenadines":"圣文森特和格林纳丁斯",Sudan:"苏丹",Suriname:"苏里南",Svalbard:"斯瓦尔巴特群岛",Swaziland:"斯威士兰",Sweden:"瑞典",Switzerland:"瑞士",Syria:"叙利亚",Taiwan:"台湾",Tajikistan:"塔吉克斯坦","United Republic of Tanzania":"坦桑尼亚",Thailand:"泰国",Togo:"多哥",Tonga:"汤加","Trinidad and Tobago":"特里尼达和多巴哥",Tunisia:"突尼斯",Turkey:"土耳其",Turkmenistan:"土库曼斯坦","Turks and Caicos Islands":"特克斯和凯科斯群岛",Uganda:"乌干达",Ukraine:"乌克兰","United Arab Emirates":"阿联酋","United Kingdom":"英国","United States":"美国",Uruguay:"乌拉圭",Uzbekistan:"乌兹别克斯坦",Vanuatu:"瓦努阿图",Venezuela:"委内瑞拉",Vietnam:"越南","Western Sahara":"西撒哈拉","Western Samoa":"西萨摩亚",Yemen:"也门",Yugoslavia:"南斯拉夫","Democratic Republic of the Congo":"刚果民主共和国",Zambia:"赞比亚",Zimbabwe:"津巴布韦","South Sudan":"南苏丹",Somaliland:"索马里兰",Montenegro:"黑山",Kosovo:"科索沃","Republic of Serbia":"塞尔维亚"}}angular.module("oplus.udp").service("mapConfig",e),e.$inject=[]}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","widgetFactory",function(e,n){n.defineWidget({type:"linechart",name:"折线图",group:"data",resizable:"h",configController:function(e){e.axisOptions={xAxis:{allowType:!0},yAxis:{multiple:!0,allowType:!0,allowPosition:!0}}},contentBuilder:e.getContentBuilder("line")})}])}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","widgetFactory",function(e,n){n.defineWidget({type:"barchart",name:"柱状图",group:"data",resizable:"h",configController:function(e){e.axisOptions={xAxis:{allowSort:!0},yAxis:{multiple:!0,allowType:!0,allowPosition:!0}}},contentBuilder:e.getContentBuilder("bar")})}])}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","widgetFactory",function(e,n){n.defineWidget({type:"piechart",name:"饼图",group:"data",resizable:"h",configController:function(e,n){e.axisOptions={xAxis:{customizable:""},yAxis:{customizable:""}}},contentBuilder:e.getContentBuilder("pie")})}])}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","widgetFactory",function(e,n){n.defineWidget({type:"radarchart",name:"雷达图",group:"data",resizable:"h",configController:function(e){e.axisOptions={xAxis:{allowType:!1,customizable:""},yAxis:{multiple:!0,allowType:!1,allowPosition:!1,customizable:"lineStyle,pointStyle"}}},contentBuilder:e.getContentBuilder("radar")})}])}(),function(){"use strict";angular.module("oplus.udp").run(["widgetFactory","widgetDataInterface","widgetDataUtil","themeService",function(e,n,t,a){function i(e,t){return n.queryDataset(e.id)}function l(e,n){var t=$("div.op-map-chart",e)[0];$(t).addClass("alert alert-warning").html("<div>"+n+"</div>")}function o(e,n){return c[e]}var s="100%",r="400px";e.defineWidget({type:"route",name:"路径",configController:"RouteWidgetConfigCtrl",group:"data",contentBuilder:{getTemplateForCompilation:function(e){var n=e.display||{},t=n.width||s,a=n.height||r,i=t?"width:"+t+";":"";return'<div class="op-map-chart" style="'+(i+="height:"+a)+'"></div>'},renderDynamicData:function(e,n,s){function r(e,i){var l=[g.field],r=[g.convertFn];t.transDataFields(i,l,r);var c=a.getFontFamily(),d=(a.calcFontColor(s.display.theme),[]),f=[],m={map:e,label:{emphasis:{show:!1}},roam:!!s.display.zoomable,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#404a59"},emphasis:{areaColor:"#2a333d"}}},b=[],v=[];i.forEach(function(e,n){var t=o(e[u.field]),a=o(e[p.field]);t&&a&&(b.push({fromName:e[u.field],toName:e[p.field],coords:[t,a]}),v.push({name:e[p.field],value:o(e[p.field]).concat(e[g.field])}))});var h=["#a6c84c","#ffa022","#46bee9"],w={name:"one-series",type:"lines",data:b,zlevel:1,effect:{show:!0,period:6,trailLength:.4,symbolSize:3},lineStyle:{normal:{color:h[1],width:0,curveness:.2}}},y={name:"one-series",type:"lines",data:b,zlevel:2,symbol:["none","none"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:"circle",symbolSize:8},lineStyle:{normal:{color:h[1],width:1,opacity:.6,curveness:.2}}},x={name:"one-series",type:"effectScatter",data:v,coordinateSystem:"geo",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:h[1]}}};d.push(w,y,x);var k={title:{text:s.title,show:!1,left:"center"},tooltip:{textStyle:{fontFamily:c},trigger:"item"},legend:{data:f,orient:"vertical",top:"bottom",left:"right",selectedMode:"single",textStyle:{color:"#fff"}},geo:m,series:d},P=$("div.op-map-chart",n)[0];echarts.init(P).setOption(k)}s.display=s.display||{};var c=s.dataset,d=s._fields||{},u=d.from,p=d.to,g=d.value,f=s.display.mapType;return s.display.visualMap,c&&p&&u?f?void $.get("app/modules/udp/assets/map-json/"+f+".json",function(e){echarts.registerMap(f,e),i(c,s).then(function(e){r(f,e.records)}).catch(function(e){console.error(e)})}):l(n,"没有设定地图类型"):l(n,"数据源或数据字段没有设置好")}}});var c={"上海":[121.4648,31.2891],"东莞":[113.8953,22.901],"东营":[118.7073,37.5513],"中山":[113.4229,22.478],"临汾":[111.4783,36.1615],"临沂":[118.3118,35.2936],"丹东":[124.541,40.4242],"丽水":[119.5642,28.1854],"乌鲁木齐":[87.9236,43.5883],"佛山":[112.8955,23.1097],"保定":[115.0488,39.0948],"兰州":[103.5901,36.3043],"包头":[110.3467,41.4899],"北京":[116.4551,40.2539],"北海":[109.314,21.6211],"南京":[118.8062,31.9208],"南宁":[108.479,23.1152],"南昌":[116.0046,28.6633],"南通":[121.1023,32.1625],"厦门":[118.1689,24.6478],"台州":[121.1353,28.6688],"合肥":[117.29,32.0581],"呼和浩特":[111.4124,40.4901],"咸阳":[108.4131,34.8706],"哈尔滨":[127.9688,45.368],"唐山":[118.4766,39.6826],"嘉兴":[120.9155,30.6354],"大同":[113.7854,39.8035],"大连":[122.2229,39.4409],"天津":[117.4219,39.4189],"太原":[112.3352,37.9413],"威海":[121.9482,37.1393],"宁波":[121.5967,29.6466],"宝鸡":[107.1826,34.3433],"宿迁":[118.5535,33.7775],"常州":[119.4543,31.5582],"广州":[113.5107,23.2196],"廊坊":[116.521,39.0509],"延安":[109.1052,36.4252],"张家口":[115.1477,40.8527],"徐州":[117.5208,34.3268],"德州":[116.6858,37.2107],"惠州":[114.6204,23.1647],"成都":[103.9526,30.7617],"扬州":[119.4653,32.8162],"承德":[117.5757,41.4075],"拉萨":[91.1865,30.1465],"无锡":[120.3442,31.5527],"日照":[119.2786,35.5023],"昆明":[102.9199,25.4663],"杭州":[119.5313,29.8773],"枣庄":[117.323,34.8926],"柳州":[109.3799,24.9774],"株洲":[113.5327,27.0319],"武汉":[114.3896,30.6628],"汕头":[117.1692,23.3405],"江门":[112.6318,22.1484],"沈阳":[123.1238,42.1216],"沧州":[116.8286,38.2104],"河源":[114.917,23.9722],"泉州":[118.3228,25.1147],"泰安":[117.0264,36.0516],"泰州":[120.0586,32.5525],"济南":[117.1582,36.8701],"济宁":[116.8286,35.3375],"海口":[110.3893,19.8516],"淄博":[118.0371,36.6064],"淮安":[118.927,33.4039],"深圳":[114.5435,22.5439],"清远":[112.9175,24.3292],"温州":[120.498,27.8119],"渭南":[109.7864,35.0299],"湖州":[119.8608,30.7782],"湘潭":[112.5439,27.7075],"滨州":[117.8174,37.4963],"潍坊":[119.0918,36.524],"烟台":[120.7397,37.5128],"玉溪":[101.9312,23.8898],"珠海":[113.7305,22.1155],"盐城":[120.2234,33.5577],"盘锦":[121.9482,41.0449],"石家庄":[114.4995,38.1006],"福州":[119.4543,25.9222],"秦皇岛":[119.2126,40.0232],"绍兴":[120.564,29.7565],"聊城":[115.9167,36.4032],"肇庆":[112.1265,23.5822],"舟山":[122.2559,30.2234],"苏州":[120.6519,31.3989],"莱芜":[117.6526,36.2714],"菏泽":[115.6201,35.2057],"营口":[122.4316,40.4297],"葫芦岛":[120.1575,40.578],"衡水":[115.8838,37.7161],"衢州":[118.6853,28.8666],"西宁":[101.4038,36.8207],"西安":[109.1162,34.2004],"贵阳":[106.6992,26.7682],"连云港":[119.1248,34.552],"邢台":[114.8071,37.2821],"邯郸":[114.4775,36.535],"郑州":[113.4668,34.6234],"鄂尔多斯":[108.9734,39.2487],"重庆":[107.7539,30.1904],"金华":[120.0037,29.1028],"铜川":[109.0393,35.1947],"银川":[106.3586,38.1775],"镇江":[119.4763,31.9702],"长春":[125.8154,44.2584],"长沙":[113.0823,28.2568],"长治":[112.8625,36.4746],"阳泉":[113.4778,38.0951],"青岛":[120.4651,36.3373],"韶关":[113.7964,24.7028]}}])}(),function(){"use strict";function e(e,n,t,a){e("WidgetConfigCtrl",{$scope:n,theWidget:a,$uibModalInstance:t}),n.fieldOptions={fieldDefs:[{title:"起点",name:"from"},{title:"终点",name:"to"},{title:"数值",name:"value"}]},n.mapTypes=[{name:"china",title:"中国地图"},{name:"world",title:"世界地图"},{name:"anhui",title:"安徽"},{name:"aomen",title:"澳门"},{name:"beijing",title:"北京"},{name:"chongqing",title:"重庆"},{name:"fujian",title:"福建"},{name:"gansu",title:"甘肃"},{name:"guangdong",title:"广东"},{name:"guangxi",title:"广西"},{name:"guizhou",title:"贵州"},{name:"hainan",title:"海南"},{name:"hebei",title:"河北"},{name:"heilongjiang",title:"黑龙江"},{name:"henan",title:"河南"},{name:"hubei",title:"湖北"},{name:"hunan",title:"湖南"},{name:"jiangsu",title:"江苏"},{name:"jiangxi",title:"江西"},{name:"jilin",title:"吉林"},{name:"liaoning",title:"辽宁"},{name:"neimenggu",title:"内蒙古"},{name:"ningxia",title:"宁夏"},{name:"qinghai",title:"青海"},{name:"shandong",title:"山东"},{name:"shanghai",title:"上海"},{name:"shanxi",title:"山西"},{name:"shanxi1",title:"陕西"},{name:"sichuan",title:"四川"},{name:"taiwan",title:"台湾"},{name:"tianjin",title:"天津"},{name:"xianggang",title:"香港"},{name:"xinjiang",title:"新疆"},{name:"xizang",title:"西藏"},{name:"yunnan",title:"云南"},{name:"zhejiang",title:"浙江"}]}angular.module("oplus.udp").controller("RouteWidgetConfigCtrl",e),e.$inject=["$controller","$scope","$uibModalInstance","theWidget"]}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","messageService","widgetFactory","widgetDataInterface","widgetDataUtil","themeService",function(e,n,t,a,i,l){t.defineWidget({type:"map",name:"地图",group:"data",resizable:"h",configController:function(e){e.axisOptions={xAxis:{name:"地点",customizable:""},yAxis:{name:"数值",disableColor:!0,multiple:!0,customizable:"chartType,pointStyle"}},e.mapTypes=[{name:"china",title:"中国地图"},{name:"world",title:"世界地图"},{name:"anhui",title:"安徽"},{name:"aomen",title:"澳门"},{name:"beijing",title:"北京"},{name:"chongqing",title:"重庆"},{name:"fujian",title:"福建"},{name:"gansu",title:"甘肃"},{name:"guangdong",title:"广东"},{name:"guangxi",title:"广西"},{name:"guizhou",title:"贵州"},{name:"hainan",title:"海南"},{name:"hebei",title:"河北"},{name:"heilongjiang",title:"黑龙江"},{name:"henan",title:"河南"},{name:"hubei",title:"湖北"},{name:"hunan",title:"湖南"},{name:"jiangsu",title:"江苏"},{name:"jiangxi",title:"江西"},{name:"jilin",title:"吉林"},{name:"liaoning",title:"辽宁"},{name:"neimenggu",title:"内蒙古"},{name:"ningxia",title:"宁夏"},{name:"qinghai",title:"青海"},{name:"shandong",title:"山东"},{name:"shanghai",title:"上海"},{name:"shanxi",title:"山西"},{name:"shanxi1",title:"陕西"},{name:"sichuan",title:"四川"},{name:"taiwan",title:"台湾"},{name:"tianjin",title:"天津"},{name:"xianggang",title:"香港"},{name:"xinjiang",title:"新疆"},{name:"xizang",title:"西藏"},{name:"yunnan",title:"云南"},{name:"zhejiang",title:"浙江"}]},contentBuilder:e.getContentBuilder("map")})}])}(),function(){angular.module("oplus.udp").run(["widgetFactory","widgetDataUtil",function(e,n){e.defineWidget({type:"calendar",name:"日历",configController:"WidgetConfigCtrl",group:"data",contentBuilder:{getTemplateForCompilation:function(e){return'<div class="js-calendar"></div>'},renderDynamicData:function(e,t,a){e.events=[];var i={lang:"zh",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listMonth"},defaultView:"month"};n.queryData(t,a).then(function(l){var o=a.attrs||{title:{},start:{}};n.transDataFields(l.records,[o.title.field,o.start.field],[o.title.convertFn,o.start.convertFn]),l.records.forEach(function(n){var t={title:n[o.title.field],start:n[o.start.field]};e.events.push(t)}),i.events=e.events,$(".js-calendar",t).fullCalendar(i)}).catch(function(e){throw e})}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["$q","themeService","conditionalFormat","widgetFactory","widgetDataUtil","widgetInteraction","widgetValues","widgetUiHelper",function(e,n,t,a,i,l,o,s){function r(n,a){var l=e.defer(),o=n.$widget.uwProps||{},s=o.display||{},r=o.fields||{};return c(o),_.merge(r,{title:{},text:{},icon:{},detail:{}}),i.queryData(a,o).then(function(e){var a,l=[];["title","text","icon","detail"].forEach(function(e){l.push({source:r[e].field,target:e,convertFn:r[e].convertFn})}),a=i.convertFields(e.records,l),e.records.forEach(function(e,n){a[n]._data=e,"_CUSTOM"===s.theme?(a[n]._css="",a[n]._styles={backColor:s.backColor,fontColor:s.fontColor},a[n]._style={"background-color":s.backColor},a[n]._titleStyle={color:s.fontColor}):s.theme&&(a[n]._style=null,a[n]._css="bg-"+s.theme,a[n]._styles={})}),t.evaluateRules(s.rules,e.records,{},function(e,n){"_CUSTOM"===n.theme?(a[e]._css="",a[e]._style={"background-color":n.backColor,color:n.fontColor},a[e]._styles={backColor:n.backColor,fontColor:n.fontColor}):n.theme&&(a[e]._css="bg-"+n.theme,a[e]._style=null,a[e]._styles={})}),n.items=a}).catch(function(e){console.error(e)}),l.promise}function c(e){var n=e.display||{},t=n.rules||[];e._v&&"1.0"!==e._v||(t.forEach(function(e){e.css&&(e.theme=e.css,delete e.css),e.bgcolor&&(e.backColor=e.bgcolor,delete e.bgcolor)}),n.css&&(n.theme=n.css,delete n.css,delete n.color),delete e.kpiName,delete e.kpiValue),e._v=d}var d="1.1";a.defineWidget({type:"kpi",name:"KPI数据",group:"data",version:d,configController:function(e,n){c(n)},contentBuilder:{getTemplateForCompilation:function(e){if(!(e.dataset||{}).id&&!e._sampleData)return s.getTemplateForUndefinedWidget("数据源或数据指标没有设置好","fa-wrench fa-4x");c(e);var n=e.display||{};return'<div class="udp-kpi-list row"><div ng-repeat="kpi in items track by $index" class="col-sm-e'+(n.rowNum||1)+'" ng-mouseover="popoverOpened=true" ng-mouseleave="popoverOpened=false"><div uib-popover uib-popover-html="kpi.detail" popover-placement="auto" popover-is-open="popoverOpened" class="udp-kpi-card'+(n.hideIcon?" no-icon":"")+'" ng-class="kpi._css" ng-style="{\'background-color\':kpi._styles.backColor}"><a ng-click="onClick(kpi._data,$event)"><p class="kpi-text small m-n">{{kpi.text || "&nbsp;"}}</p><div class="kpi-title" ng-style="{color:kpi._styles.fontColor}">{{kpi.title || "&nbsp;"}}</div><span class="kpi-icon"><i class="fa {{kpi.icon}}"></i></span></a></div></div></div>'},renderDynamicData:function(e,n,t){function a(e,n,a){if(t.interaction&&t.interaction.click){var i={scope:a};n&&(i.current=n.currentTarget);var o={pageId:t.interaction.pageId,params:t.interaction.params,target:t.interaction.target};l.openPage(o,e,i)}}t.display,e.onClick=a,t._sampleData?e.items=t._sampleData:r(e,n).then(function(){var n=t.interaction||{};if(n.click){var i=n.defaultOpen;i>=1&&i<=e.items.length&&a(e.items[i-1]._data,{},e)}}).catch(function(e){throw e})},reloadData:r}})}])}(),function(){angular.module("oplus.udp").run(["widgetFactory","widgetDataUtil","widgetInteraction","widgetValues",function(e,n,t,a){e.defineWidget({type:"list",name:"列表",group:"data",configController:"WidgetConfigCtrl",contentBuilder:{getTemplateForCompilation:function(e){var n=e.display||{},t=(e.dataset||{}).id,a='<div class="list-group">';return n.filter&&(a+='<div class="m-b-sm input-group"><span class="input-group-addon"><i class="fa fa-search"></i></span><input type="search" class="form-control" ng-model="search"></div>'),a+=t?'<div class="list-group-item" ng-class="{active:current.index===$index}" ng-repeat="item in items | filter:search track by $index"><div class="pull-left bg-light text-center img-circle m-r" ng-if="item.icon"><i class="fa fa-3x {{item.icon}}"></i></div><span class="badge" ng-if="item.badge">{{item.badge}}</span><a ng-click="current.index=$index;clickItem(item)">  <h4 class="list-group-item-heading">{{item.title}}</h4>  <p class="list-group-item-text">{{item.text}}</p></a></div>':'<div class="list-group-item"><span class="badge">0</span><h4 class="list-group-item-heading">无数据</h4><p class="list-group-item-text">请配置数据集</p></div>',a+="</div>"},renderDynamicData:function(e,a,i){e.clickItem=function(n){var a=i.interaction||{};a.fireEvent&&a.event&&e.$widget.fireWidgetEvent(a.event),"assignparam"===a.click?t.changePageParams(e,i.interaction,n):"pagelink"===a.click&&t.openPage(i.interaction||{},n)},e.items=[],e.current={index:-1};var l=i.fields;_.merge(l,{title:{},text:{},badge:{},icon:{}}),n.queryData(a,i).then(function(t){var a=[];["title","text","icon","badge"].forEach(function(e){a.push({source:l[e].field,target:e,convertFn:l[e].convertFn})}),e.items=n.convertFields(t.records,a)}).catch(function(e){throw e})}}})}])}(),function(){angular.module("oplus.udp").run(["widgetFactory","widgetUiHelper","widgetDataInterface","widgetInteraction","messageService",function(e,n,t,a,i){function l(e){return e.job&&e.job.code}e.defineWidget({type:"job",name:"作业",desc:"创建表单，调用一键作业",tag:"alpha",eventProperty:"event",group:"data",contentBuilder:{getTemplateForCompilation:function(e){if(!l(e))return n.getTemplateForUndefinedWidget("作业未定义，请在编辑状态下配置数据","fa-wrench fa-4x");var t=e.job||{},a=e.wparams||[],i=e.display||{},o=12/(i.columns||1),s=angular.element("<form></form>").attr("ng-submit",'startJob("'+t.code+'")');i.formLayout&&s.addClass("form-"+i.formLayout),a.forEach(function(e){var t=n.buildParamInputControl(e.name,e);"inline"!==i.formLayout?s.append('<div class="col-sm-'+o+'">'+t+"</div>"):s.append(t)});var r='<button class="btn btn-'+(i.okButtonStyle||"default")+'">'+(i.okButtonLabel||"OK")+"</button>";return s.append('<div class="form-group"><div class="text-right">'+r+"</div></div>"),s.prop("outerHTML")},renderDynamicData:function(e,l,o){function s(n,l,o){t.startJob(n,l).then(function(t){i.toast("success","作业正在执行"),a.handleInteraction(e,o,{JOB_ID:n,JOB_INST_ID:t.instanceId})}).catch(function(e){i.alertError("错误",e.message)})}e.startJob=function(t){var a=e.$widget.wParams;if(n.isEditMode())i.alert("执行作业","当前为编辑模式。在页面模式下，将执行作业"+t+"，参数为 <code>"+JSON.stringify(a)+"</code>");else{var l=o.interaction||{};l.confirm?i.confirm("执行作业","确认执行吗？",function(){s(t,a,l)}):s(t,a,l)}}}}})}])}(),function(){"use strict";angular.module("oplus.udp").run(["echartsWidgetBuilder","widgetFactory",function(e,n){n.defineWidget({type:"gauge",name:"仪表盘",group:"data",tag:"dev",configController:function(e){e.axisOptions={xAxis:{enabled:!1,allowType:!1},yAxis:{multiple:!1,allowType:!1,allowPosition:!1}}},contentBuilder:e.getContentBuilder("gauge")})}])}(),function(){"use strict";angular.module("oplus.udp").run(["$q","themeService","conditionalFormat","widgetFactory","widgetDataUtil","widgetInteraction","widgetValues","widgetUiHelper",function(e,n,t,a,i,l,o,s){function r(n,a){var l=e.defer(),o=n.$widget.uwProps||{},s=o.display||{},r=o.fields||{};return c(o),_.merge(r,{title:{},text:{},icon:{},detail:{}}),i.queryData(a,o).then(function(e){var a,o=[];["title","text","icon","detail"].forEach(function(e){o.push({source:r[e].field,target:e,convertFn:r[e].convertFn})}),a=i.convertFields(e.records,o),e.records.forEach(function(e,n){a[n]._data=e,"_CUSTOM"===s.theme?(a[n]._css="",a[n]._styles={backColor:s.backColor,fontColor:s.fontColor},a[n]._style={"background-color":s.backColor},a[n]._titleStyle={color:s.fontColor}):s.theme&&(a[n]._style=null,a[n]._css="bg-"+s.theme,a[n]._styles={})}),t.evaluateRules(s.rules,e.records,{},function(e,n){"_CUSTOM"===n.theme?(a[e]._css="",a[e]._style={"background-color":n.backColor,color:n.fontColor},a[e]._styles={backColor:n.backColor,fontColor:n.fontColor}):n.theme&&(a[e]._css="bg-"+n.theme,a[e]._style=null,a[e]._styles={})}),n.items=a,l.resolve()}).catch(function(e){console.error(e)}),l.promise}function c(e){if(!(e.dataset||{}).id&&!e._sampleData)return s.getTemplateForUndefinedWidget("数据源或数据指标没有设置好","fa-wrench fa-4x");var n=e.display||{},t=n.rules||[];e._v&&"1.0"!==e._v||(t.forEach(function(e){e.css&&(e.theme=e.css,delete e.css),e.bgcolor&&(e.backColor=e.bgcolor,delete e.bgcolor)}),n.css&&(n.theme=n.css,delete n.css,delete n.color),delete e.kpiName,delete e.kpiValue)}a.defineWidget({type:"percent",name:"百分比数据",group:"data",resizable:"h",tag:"dev",configController:function(e,n){c(n)},contentBuilder:{getTemplateForCompilation:function(e){return(e.dataset||{}).id||e._sampleData?'<div ng-repeat="item in items track by $index" easypiechart options="options" percent="item.title" class="udp-progress-circle" style="position:relative;display:inline-block"><span class="udp-percent-text">{{item.text}}</span><span class="udp-percent-title">{{item.title}}</span><span class="udp-percent-unit">{{item.unit}}</span></div>':s.getTemplateForUndefinedWidget("数据源或数据指标没有设置好")},renderDynamicData:function(e,n,t){var a=t.display||{};e.percent=65,e.options={animate:{duration:300,enabled:!0},size:a.height||110,barColor:a.backColor||"#2C3E50",scaleColor:!1,lineWidth:3,lineCap:"circle"},t._sampleData?e.items=t._sampleData:r(e,n).then(function(){}).catch(function(e){throw e}),e.$on("WIDGET_RESIZE",function(n,t){(t||{}).height&&t.height,console.log("resizing..."),e.options.size=120})},reloadData:r}})}])}(),function(){"use strict";angular.module("oplus.udp").component("udpParamsControlConfig",{templateUrl:"app/modules/udp/params-control-config.html",bindings:{theModel:"=",paramsConfig:"<",options:"<"},controller:["$scope","$attrs",function(e,n){function t(){}function a(e){t(),i.theModel=i.theModel||[];var n=Object.keys(e);n.forEach(function(n){var t=e[n],a=_.find(i.theModel,{name:n});a||(a={name:n},l.labelByDefault&&(a.showlabel=!0,a.label=n),i.theModel.push(a)),a.initval=a.initval||t.defaultValue,a.format=a.format||t.format,i.current||(i.current=a)}),_.remove(i.theModel,function(e){return n.indexOf(e.name)<0})}if(!n.theModel)throw new Error('Attribute "the-model" required for directive <udp-params-control-config>');var i=this,l=i.options||{};i.pageControls=[],i.pageEvents=[],i.sortableOptions={placehodler:"ui-sortable-placeholder","ui-floating":!0,stop:function(e,n){}},i.$onInit=function(){},e.$watch("$ctrl.paramsConfig",function(e,n){e&&a(e)},!0)}]})}(),function(){"use strict";function e(e,n,t){e.uwType=t.uwType,e.uwProps=t.uwProps||{},e.uwidgetConfigTemplate=function(e){return"app/modules/udp/widgets/"+e+"/"+e+"-widget-config.html"}(e.uwType),angular.isFunction(t.configController)&&t.configController(e,e.uwProps),function(e){var n=e.display||{};n.cardTheme&&(n.theme=n.cardTheme,delete n.cardTheme)}(e.uwProps),e.save=function(){e._beforeSave&&e._beforeSave(),n.close(e.uwProps)},e.cancel=function(e){n.dismiss("cancel")}}angular.module("oplus.udp").controller("WidgetConfigCtrl",e),e.$inject=["$scope","$uibModalInstance","theWidget"]}(),function(){function e(e,n,t,a,i){this.showConfigModal=function(l,o){if("app.udp_pageedit"===i.current.name&&l.attr("id"))return i.go("app.udp_pageedit.configWidget",{widgetId:l.attr("id")}),null;var s=l.attr("uw-type"),r={uwType:s,uwProps:{},element:l};try{r.uwProps=JSON.parse(l.attr("uw-props")||"{}")}catch(e){console.warn("Cannot parse widget attribute uw-props "+l.attr("uw-props)"))}var c=e.lookupWidgetDef(s),d="WidgetConfigCtrl";angular.isFunction(c.configController)?r.configController=c.configController:angular.isDefined(c.configController)&&(d=c.configController);var u=t.open({templateUrl:"app/modules/udp/widgets/widget-config.html",controller:d,backdrop:"static",resolve:{theWidget:function(){return r}},size:"lg"});return u.rendered.then(function(){$(".modal-dialog").eq(0).draggable({handle:".modal-header:eq(0)"}).resizable({minHeight:400,minWidth:740})}),u.result.then(function(e){console.log("newProps",e);var t=e||{};l.attr("uw-props",JSON.stringify(t));var i=l.attr("uw-type");if(n.isLayoutWidget(i))s=n.findPageScope(o),n.applyLayoutWidgetAttr(i,t,l,s);else{var s=n.findPageScope(o);a(l)(s)}},function(){})}}angular.module("oplus.udp").service("widgetConfigHelper",e),e.$inject=["widgetFactory","widgetUiHelper","$uibModal","$compile","$state"]}(),function(){angular.module("oplus.udp").directive("udpWidgetConfigAxis",function(){return{restrict:"E",scope:{chartType:"@",axisOptions:"<",theModel:"=uwProps",fields:"<"},templateUrl:"app/modules/udp/widgets/widget-config-chart-axis.html",controller:["$scope","themeService",function(e,n){function t(e){i.current.index=e,i.current.yAxis=i.theModel.yAxes[i.current.index]}function a(){i.theModel.yAxes.push({}),t(i.theModel.yAxes.length-1)}var i=e,l={xAxis:{name:"X轴",customizable:"axisType"},yAxis:{name:"Y轴",multiple:!1,allowPosition:!1,customizable:"axisType,lineStyle,pointStyle,chartType"}};i.styles={pointShapes:["circle","rect","triangle","diamond"],lineTypes:["solid","dashed","dotted"]};var o=_.merge({},l,i.axisOptions);i.axisOptions=o,i.current={index:-1,yAxis:void 0},i.addYAxis=a,i.removeYAxis=function(e){i.theModel.yAxes.splice(e,1),t(e>0?e-1:i.theModel.yAxes.length-1)},i.selectYAxis=t,i.colors=n.calcAllPaletteColors(8),i.configurables={},i.theModel.yAxes=i.theModel.yAxes||[],0===i.theModel.yAxes.length?a():t(0)}]}})}(),function(){"use strict";angular.module("oplus.udp").component("udpWidgetConfigFields",{templateUrl:"app/modules/udp/widgets/widget-config-fields.html",bindings:{datasetFields:"=",options:"<",props:"="},controller:["$scope","$attrs","$timeout","widgetDataInterface","messageService",function(e,n,t,a,i){if(!n.datasetFields||!n.props)throw new Error('Attribute "dataset-fields" and "props" are required for directive <udp-widget-config-dataset>')}]})}(),function(){angular.module("oplus.udp").component("udpWidgetConfigInteraction",{bindings:{props:"=theModel",paramVars:"<",options:"<"},templateUrl:"app/modules/udp/widgets/widget-config-interaction.html",controller:["widgetDataInterface",function(e){var n=this;this.props=this.props||{},this.varList=[],"page"===this.props.click&&(this.props.click="pagelink"),Object.keys(n.paramVars||{}).forEach(function(e){n.varList.push({name:e,desc:n.paramVars[e]})}),e.findAllPagesInfo().then(function(e){n.pages=e}).catch(function(e){throw e})}]})}(),angular.module("oplus.udp").directive("udpWidgetConfigDisplay",function(){return{restrict:"E",transclude:!0,templateUrl:"app/modules/udp/widgets/widget-config-display.html",controller:["$scope","themeService",function(e,n){e.cardThemes=n.getCardThemes({customizable:!0})}]}}),function(){"use strict";angular.module("oplus.udp").component("udpWidgetConfigFormatRule",{templateUrl:"app/modules/udp/widgets/widget-config-format-rule.html",transclude:!0,bindings:{rules:"=theModel",formats:"<?"},controller:["messageService",function(e){var n=this;this.selectRule=function(e){n.currentRule=n.rules[e],n.current.index=e,n.current.rule=n.rules[e]},this.removeRule=function(t){e.confirmWarning("","移除规则",function(){n.rules.splice(t,1)})},this.addRule=function(){var e={};n.currentRule=e,n.rules.push(n.currentRule),n.current={rule:e,index:n.rules.length-1}},n.rules=n.rules||[],n.current={rule:void 0,index:-1}}]})}(),function(){"use strict";angular.module("oplus.udp").component("udpWidgetConfigChartDisplay",{templateUrl:"app/modules/udp/widgets/widget-config-chart-display.html",bindings:{props:"=ngModel",chartType:"<",options:"<"},controller:["themeService",function(e){this.palettes=e.getAllPalettes()}]})}(),function(){"use strict";angular.module("oplus.udp").component("udpWidgetConfigDataset",{templateUrl:"app/modules/udp/widgets/widget-config-dataset.html",bindings:{selectedDs:"=",props:"=",options:"<"},controller:["$scope","$attrs","$timeout","widgetDataInterface","messageService",function(e,n,t,a,i){function l(){var n=c.options||{};r&&!n.disableConfirm?i.confirm("更换数据集","更换数据集后需要重新定义字段，确定更换吗？",function(){r=c.props.id,s()},function(){e.$apply(function(){c.props.id=r,s()})}):(r=c.props.id,s())}function o(){a.findWidgetDatasets().then(function(e){c.datasets=e,l(c.props.id)}).catch(function(e){throw e})}function s(){c.selectedDs=_.find(c.datasets,{code:c.props.id}),c.selectedDs&&a.queryDatasetMeta(c.selectedDs.code).then(function(e){c.selectedDs.fields=e.fields||[],c.selectedDs.paramsConfig=e.paramsConfig||{}}).catch(function(e){throw e})}if(!n.selectedDs||!n.props)throw new Error('Attribute "selected-ds" and "props" are required for directive <udp-widget-config-dataset>');var r,c=this;c.paramHelper={},c.pageControls=[],c.props=c.props||{id:void 0,params:void 0,limit:void 0,eventtorefresh:void 0},c.confirmChange=l,c.$onInit=function(){o()},c.newDataset=function(){alert("TODO: 跳转到创建数据集页面")}}]})}(),function(){"use strict";angular.module("oplus.udp").component("udpPageEventSelector",{templateUrl:"app/modules/udp/widgets/page-event-selector.html",bindings:{theModel:"="},controller:["widgetFactory","messageService",function(e){function n(){var n=e.findEventWidgets(),a=_.map(n,function(e){return".uwtype-"+e.type});$("#pd-canvas-zone").find(a.join(",")).each(function(){var e=$(this),a=_.find(n,{type:e.attr("uw-type")}).eventProperty,i=JSON.parse(e.attr("uw-props")||"{}"),l=_.get(i,a);l&&t.pageEvents.push({name:l})})}var t=this;t.pageEvents=[],t.$onInit=function(){n()}}]})}(),function(){"use strict";function e(e){function n(n,t){var a=[],i=["dataEx","obj"].concat(t||[]).join(",");if(n)for(var l=0;l<n.length;l++){var o=e.kinds.JS+":"+n[l].expr,s=e.parseFunctionWithVar(o,function(e){return'dataEx.pathValue(obj,"'+e+'")'},i);a.push(s)}return a}this.evaluateRules=function(t,a,i,l){var o=angular.isArray(a)?a:[a],s=n(t,Object.keys(i));o.forEach(function(n,a){for(var o=[e,n].concat(_.values(i)),r=0;r<s.length;r++)if(!0===s[r].apply(this,o))return void l(a,t[r])})}}angular.module("oplus.udp").service("conditionalFormat",e),e.$inject=["dataEx"]}(),function(){"use strict";function e(e,n){function t(n){var t=e.defer();return n=n||{},a.findAllEntities().then(function(e){n.noContent&&e.forEach(function(e){delete e.html}),t.resolve(e)}).catch(function(e){t.reject(e)}),t.promise}var a=n.createDao("oplus.udp.folders");this.findFolder=a.findEntity,this.findAllFolders=t,this.findFolderByType=t,this.saveFolder=a.saveEntity,this.deleteFolder=a.deleteEntity}angular.module("oplus.udp").service("_folderLocalDao",e),e.$inject=["$q","localDaoFactory"]}(),function(){"use strict";function e(e,n){var t="udp";this.findFolder=function(e){return n.callApi(t,"GET","/api/udp/folders/{id}",{id:e})},this.findAllFolders=function(e){return n.callApi(t,"GET","/api/udp/folders")},this.findFolderByType=function(e){return n.callApi(t,"GET","/api/udp/type/{type}/folders",{type:e})},this.saveFolder=function(e){return e.id?n.callApi(t,"PUT","/api/udp/folders",null,e):n.callApi(t,"POST","/api/udp/folders",null,e)},this.deleteFolder=function(e){return n.callApi(t,"DELETE","/api/udp/folders/{id}",{id:e})}}angular.module("oplus.udp").service("_folderRemoteDao",e),e.$inject=["$http","restUtils"]}(),function(){"use strict";function e(){var e=!1;this.useLocalDb=function(n){e=n},this.$get=["_folderLocalDao","_folderRemoteDao",function(n,t){return e?n:t}]}angular.module("oplus.udp").provider("folderDao",e),e.$inject=[]}(),function(){"use strict";function e(e){this.findAllFolders=e.findAllFolders,this.findFolderByType=e.findFolderByType,this.findFolder=e.findFolder,this.saveFolder=e.saveFolder,this.deleteFolder=e.deleteFolder}angular.module("oplus.udp").service("folderService",e),e.$inject=["folderDao"]}(),function(){"use strict";function e(e,n,t,a,i,l,o,s){function r(n){o.findFolderByType("page").then(function(t){if(e.folderList=l.toFancyTreeData(t),""==g&&0!=e.folderList.length&&(g=e.folderList[0].id),"init"==n)p();else{var a=$("#folderTree").fancytree("getTree");a.options.source=e.folderList,a.reload(),a.activateKey(g),$("#folderTree").fancytree("getRootNode").visit(function(e){e.setExpanded(!0)})}})}function c(n){s.findPageByFolder(n).then(function(n){e.pages=n})}function d(){f=a.open({templateUrl:"app/modules/udp/folder-edting.html",controller:["$scope","folder",function(e,n){e.folder=n,e.editing=!0,""!=e.folder.id&&null!=e.folder.id&&void 0!=e.folder.id||(e.editing=!1),e.cancel=function(e){f.dismiss("cancel")},e.saveFolder=function(){o.saveFolder(e.folder).then(function(e){f.close(),i.toast("success","保存成功"),g=e.id,r("refresh")}).catch(function(e){throw e})}}],controllerAs:"$ctrl",resolve:{folder:function(){return e.folder}},size:"md"})}function u(){g=e.folder.pId,o.deleteFolder(e.folder.id).then(function(){r("refresh")})}function p(){e.options.source=e.folderList,$("#folderTree").fancytree(e.options),$("#folderTree").fancytree("getTree").activateKey(g),$("#folderTree").fancytree("getRootNode").visit(function(e){e.setExpanded(!0)}),$.contextMenu({selector:"#folderTree span.fancytree-title",items:{add:{name:"新增",icon:"add",callback:function(n,t){var a=$.ui.fancytree.getNode(t.$trigger);e.folder={pId:a.data.id,pName:a.data.name,type:"page"},d()}},edit:{name:"编辑",icon:"edit",callback:function(n,t){var a=$.ui.fancytree.getNode(t.$trigger);e.folder=a.data,e.folder.type="page",d(a.data)}},delete:{name:"删除",icon:"delete",callback:function(n,t){var a=$.ui.fancytree.getNode(t.$trigger);e.folder=a.data,u()}}}})}e.showFolder=!0;var g="";e.options={extensions:["glyph","wide"],source:[],selectMode:3,glyph:{preset:"awesome4",map:{folder:"fa-folder",folderOpen:"fa-folder-open"}},activate:function(n,t){e.selectNode=t.node.data,c(t.node.data.id)}},e.findFolderByType=r,e.deleteFolder=u,e.createFolder=function(){var n=$("#folderTree").fancytree("getTree").activeNode;e.folder=null==n?{pId:"",pName:"",type:"page"}:{pId:n.data.id,pName:n.data.name,type:"page"},d()},e.cancel=function(e){f.dismiss("cancel")};var f;r("init")}angular.module("oplus.udp").controller("FolderListCtrl",e),e.$inject=["$scope","$state","$timeout","$uibModal","messageService","utils","folderService","pageService"]}(),function(e){try{e=angular.module("oplus.udp")}catch(n){e=angular.module("oplus.udp",[])}e.run(["$templateCache",function(e){"use strict";e.put("app/modules/udp/folder-edting.html",'<form class="form-horizontal" ng-submit="saveFolder()">\n\n    <div class="modal-header">\n        <h3 ng-if="!editing" class="modal-title">添加文件夹</h3>\n        <h3 ng-if="editing" class="modal-title">修改文件夹</h3>\n    </div>\n\n    <div class="modal-body">\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">父级菜单</label>\n            <div class="col-sm-10">\n                <input type="text" readonly class="form-control" ng-model="folder.pName">\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">名称</label>\n            <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="folder.name">\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">菜单描述</label>\n            <div class="col-sm-10">\n                <textarea class="form-control" ng-model="folder.description"></textarea>\n            </div>\n        </div>\n\n    </div>\n\n    <div class="modal-footer">\n        <button type="button" class="btn btn-default" ng-click="cancel($event)">取消</button>\n        <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> 确定</button>\n    </div>\n    \n</form>\n'),e.put("app/modules/udp/page-designer-palette.html",'<div class="vbox">\n    <div class="nav-tabs-alt">\n        <ul class="nav nav-tabs nav-justified">\n            <li ng-repeat="wg in ::$ctrl.widgetGroups track by $index" ng-class="{active:$ctrl.activeTab===$index}">\n                <a ng-click="$ctrl.showTab($index)" data-target="#pd-toolbox-tab-{{$index}}" data-toggle="tab"\n                   uib-tooltip="{{::wg.text}}"><i\n                        class="fa {{::wg.icon}}"></i></a>\n            </li>\n        </ul>\n    </div>\n    <div class="row-row">\n        <div class="cell">\n            <div class="tab-content">\n                <div ng-repeat="wg in ::$ctrl.widgetGroups track by $index"\n                     class="tab-pane wrapper-sm" id="pd-toolbox-tab-{{$index}}"\n                     ng-class="{active:$ctrl.activeTab==$index}">\n                    <div ng-repeat="w in ::wg.widgets">\n                        <span ng-if="w.tag" class="pull-right label label-default">{{w.tag}}</span>\n                        <div class="uw-symbol uwtype-{{w.type}}" uw-type="{{w.type}}" uib-tooltip="{{w.desc}}">{{w.name}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \x3c!-- /toolbox-tab --\x3e\n</div>\n'),e.put("app/modules/udp/page-designer-toolbar.html",'<div class="nav navbar-nav navbar-left">\n    <a class="btn navbar-btn btn-default" ng-class="!app.userPref[\'udp.pd.hideToolbox\']?\'active\':\'\'" title="工具栏"\n       ng-click="app.userPref[\'udp.pd.hideToolbox\']=!app.userPref[\'udp.pd.hideToolbox\']"><i\n            class="fa fa-bars"></i></a>\n    \x3c!--<a ui-sref="app.udp" class="btn navbar-btn btn-default" title="页面列表"><i--\x3e\n    \x3c!--class="fa fa-bars"></i></a>--\x3e\n    <button type="button" class="btn navbar-btn btn-default" ui-sref="app.udp_pagenew" title="新建"><i\n            class="fa fa-file-o"></i>\n    </button>\n</div>\n<form class="navbar-form navbar-left" ng-submit="savePage()" role="form"\n      action="javascript:void(0)">\n\n    <div class="form-group">\n        <input ui-focus="{{!page.title}}" type="text" class="form-control"\n               ng-model="page.title"\n               placeholder="页面标题">\n    </div>\n    <button type="submit" class="btn btn-success" title="保存"><i\n            class="fa fa-save"></i>\n    </button>\n    <button type="button" ng-click="configPage()" class="btn btn-default" title="页面设置"><i\n            class="fa fa-cog"></i>\n    </button>\n\n</form>\n<div class="nav navbar-nav navbar-right m-r-none">\n    <button type="button" ng-click="$parent.showWidgetOutline=!$parent.showWidgetOutline"\n            class="btn navbar-btn btn-default"\n            ng-class="$parent.showWidgetOutline?\'active\':\'\'" title="显示控件边框"><i\n            class="fa fa-anchor"></i>\n    </button>\n    <div class="btn-group">\n        <a class="btn navbar-btn btn-default" ng-click="$parent.inMode=\'edit\'" title=" 可视化编辑"\n           ng-class="{active:!$parent.inMode || $parent.inMode===\'edit\'}"><i\n                class="fa fa-pencil-square-o"></i></a>\n        <a class="btn navbar-btn btn-default" ng-click="$parent.inMode=\'source\';genSourceCode();"\n           ng-class="{active:$parent.inMode==\'source\'}" title="查看源码"><i class="fa fa-code"></i></a>\n        <a class="btn navbar-btn btn-default" ng-click="$parent.inMode=\'preview\'"\n           ng-class="{active:$parent.inMode==\'preview\'}" title="预览"><i\n                class="fa fa-eye"></i> 预览\n        </a>\n    </div>\n    <div class="btn-group" dropdown>\n        <button type="button" class="btn navbar-btn btn-default" data-toggle="dropdown">\n            <i class="fa fa-ellipsis-v"></i>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n            \x3c!--<li><a ng-click="emptyCanvas()"><i class="fa fa-trash-o"></i> 清空内容</a></li>--\x3e\n            \x3c!--<li class="disabled"><a ng-click="saveAsTemplate()"><i class="fa fa-clone"></i> 另存为模板 <span class="label label-danger">TODO</span> </a>--\x3e\n            \x3c!--</li>--\x3e\n            <li>\n                <a ui-sref=\'app.udp_pageview_full({pageId:page.id})\' target="_blank"><i\n                        class="fa fa-external-link-square"></i> 在新窗口全屏打开\n                </a>\n                <a ui-sref=\'app.udp_pageview({pageId:page.id})\' target="_blank"><i\n                        class="fa fa-external-link"></i> 在新窗口打开\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n'),e.put("app/modules/udp/page-designer.html",'<div ui-view="widget_config_model"></div>\n<nav class="navbar navbar-default b-b">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <ol class="breadcrumb">\n                <li ng-if="udp.setting.moduleTitle"><a ui-sref="app.udp">{{udp.setting.moduleTitle}}</a></li>\n                <li class="active">页面编辑</li>\n            </ol>\n        </div>\n        <div ng-include="\'app/modules/udp/page-designer-toolbar.html\'">\n        </div>\n    </div>\n</nav>\n\x3c!-- /navbar --\x3e\n\x3c!-- hbox layout --\x3e\n<div class="hbox hbox-auto-xs bg-light lter"\n     ng-class="{\'edit-mode\':inMode==\'edit\',\n     \'preview-mode\':inMode==\'preview\',\n     \'source-mode\':inMode==\'source\',\n     \'op-show-outline\':showWidgetOutline}">\n    \x3c!-- column --\x3e\n    <div id="pd-palette-zone" class="col w b-r" ng-hide="app.userPref[\'udp.pd.hideToolbox\']">\n        <udp-page-designer-toolbox></udp-page-designer-toolbox>\n    </div>\n    \x3c!-- /column --\x3e\n\n    \x3c!-- column --\x3e\n    <div class="col">\n        <udp-page-display ng-hide="inMode===\'source\'" class="udp-pd-canvas block h-full scrollable"\n                          is-designer="true" page="page"></udp-page-display>\n        <div id="pd-source-zone" ng-show="inMode===\'source\'" class="h-full">\n            <div class="wrapper-xs">\n                <div class="alert alert-info">可以在这里直接修改页面代码。\n                    目前存在局限：所做的修改无法直接反应在可视化编辑器中。你可以保存修改后，重新刷新页面看到修改效果。</div>\n            </div>\n            <textarea rows="20" ng-model="sourceCode"\n                      ui-codemirror="{mode: \'htmlmixed\',lineNumbers: true, lineWrapping: true, theme:\'dracula\'}"\n                      ui-refresh="inMode==\'source\'"></textarea>\n        </div>\n    </div>\n    \x3c!-- /column --\x3e\n</div>\n\x3c!-- /hbox layout --\x3e\n\n'),e.put("app/modules/udp/page-display.html",'<div class="hbox" style="position:relative">\n    <div class="udp-float-actions btn-group" ng-if="options.showUrl">\n        <a class="btn btn-xs btn-default" ng-click="goback($event)" title="返回"><i\n                class="fa fa-arrow-left"></i></a>\n        <a class="btn btn-xs btn-default" ui-sref="app.udp_pageedit({pageId:page.id})" title="编辑"\n           ng-if="$root.app.currentUser.hasPermission(\'udp:update:\'+page.id)"><i\n                class="fa fa-edit"></i></a>\n        <a class="btn btn-xs btn-default" href="{{pageUrl}}" target="_blank" title="在新窗口打开"><i\n                class="fa fa-external-link"></i></a>\n        <button type="button" class="btn btn-xs btn-default" ngclipboard data-clipboard-text="{{pageUrl}}"\n                title="复制页面链接"><i\n                class="fa fa-clipboard"></i></button>\n    </div>\n    <div class="js-page-wrapper udp-page-view" ng-class="pageCss" ng-style="pageStyle"></div>\n</div>'),e.put("app/modules/udp/page-grid.html",'<nav class="navbar navbar-default b-b">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <ol class="breadcrumb">\n                <li ng-if="udp.setting.moduleTitle" class="active">{{udp.setting.moduleTitle}}</li>\n            </ol>\n        </div>\n        <form class="navbar-form navbar-left" role="search">\n            <div class="form-group">\n                <input type="text" class="form-control rounded" ng-model="query">\n            </div>\n        </form>\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a class="dropdown-toggle" data-toggle="dropdown">\n                    <i class="fa fa-bars"></i> <span class="caret"></span>\n                </a>\n                <ul class="dropdown-menu" ng-init="orderBy=\'modifiedAt\'">\n                    \x3c!--<li><a>摘要</a></li>--\x3e\n                    \x3c!--<li><a>列表</a></li>--\x3e\n                    \x3c!--<li role="separator" class="divider"></li>--\x3e\n                    <li><a ng-click="orderBy=\'createdAt\'">创建时间</a></li>\n                    <li><a ng-click="orderBy=\'modifiedAt\'">修改时间</a></li>\n                    <li><a ng-click="orderBy=\'title\'">名称</a></li>\n                </ul>\n            </li>\n        </ul>\n        <div class="nav navbar-nav navbar-right m-r-none">\n            <a class="btn btn-default navbar-btn" ui-sref="app.udp.pagelist">\n                <i class="fa fa-th-list"></i>\n            </a>\n            <a class="btn btn-default navbar-btn" ui-sref="app.udp">\n                <i class="fa fa-th-large"></i>\n            </a>\n            <a class="btn btn-default navbar-btn" ng-click="$pl.exportPages()"><i class="fa fa-upload"></i>\n                导出</a>\n            <a class="btn btn-default navbar-btn" ng-click="$pl.importPages()"><i class="fa fa-download"></i> 导入</a>\n            <a class="btn btn-primary navbar-btn" ui-sref="app.udp_pagenew" ng-if="$root.app.currentUser.isAuthenticated"><i\n                    class="fa fa-plus"></i> 新建</a>\n        </div>\n    </div>\n</nav>\n<div ui-view="" class="h-full">\n    <div class="container-fluid wrapper">\n        <div class="op-gridview hbox hbox-auto-xs ">\n            <div class="row">\n                <div class="col-sm-4 col-md-3 op-udp-listview"\n                     ng-repeat="page in $pl.pages | filter:query | orderBy:orderBy:true track by $index">\n                    <div class="panel op-udp-page-card">\n                        <div class="panel-body dk {{page.setting.thumbcolor||\'bg-light\'}}"\n                             ng-class="wrapper-lg">\n                            \x3c!--<a ui-sref="{{isListView?\'app.udp.browsePage\':\'app.udp_pageview\'}}({pageId:page.id})">--\x3e\n                            <a ui-sref="app.udp_pageview({pageId:page.id})">\n                                <h4 class="block text-ellipsis">{{ page.title || \'Untitled\' }}</h4>\n                                <p class="text-muted">{{page.modifiedAt | fromNow }}</p>\n                            </a>\n                            <div class="icon"><i class="fa {{::page.setting.icon||\'fa-file-o\'}}"></i></div>\n                        </div>\n                        <div class="panel-footer wrapper-xs">\n                            <div class="pull-left"><i class="fa" ng-click="$pl.toggleStar(page)"\n                                                      ng-class="page.starred?\'fa-star text-warning\':\'fa-star-o text-light\'"></i>\n                                <span class="text-muted">{{page.createdName}}</span>\n                            </div>\n                            <div class="text-right">\n                                <a class="btn btn-default op-context" ui-sref="app.udp_pageedit({pageId:page.id})"\n                                   ng-if="$root.app.currentUser.hasPermission(\'udp:update:\'+page.id) || $root.app.currentUser.isSameUser(page.createdBy)"><i\n                                        class="fa fa-pencil" uib-tooltip="修改页面"></i></a>\n\n                                <a class="btn btn-default op-context" ng-click="$pl.clonePage(page.id)">\n                                    <i class="fa fa-copy" uib-tooltip="复制页面"></i>\n                                </a>\n                                <a class="btn btn-default op-context" ui-sref="app.udp_pageview_full({pageId:page.id})"\n                                   target="_blank" uib-tooltip="在新窗口全屏打开"><i\n                                        class="fa fa-external-link-square"></i></a>\n                                <a class="btn btn-default op-context" ng-click="$pl.deletePage(page.id)"\n                                   ng-if="$root.app.currentUser.hasPermission(\'udp:delete:\'+page.id)"><i\n                                        class="fa fa-trash-o" uib-tooltip="删除页面"></i></a>\n                                \x3c!--<a class="btn btn-default" ng-click="$pl.sharePage(page.id)" uib-tooltip="分享此页面"><i--\x3e\n                                \x3c!--class="fa fa-share-alt"></i> </a>--\x3e\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("app/modules/udp/page-import.html",'<form ng-submit="$pic.doImport()">\n    <div class="modal-header">\n        <h3 class="modal-title">导入</h3>\n    </div>\n    <div class="modal-body">\n        <div class="form-group">\n            \x3c!--<label class="control-label">选择导入文件</label>--\x3e\n            \x3c!--<input type="file" class="form-control" nv-file-select uploader=\'$pic.uploader\' ng-model="$pic.selectedFile">--\x3e\n            <button type="button" class="btn btn-default" udp-file-browser ng-model="$pic.selectedFile"\n                    on-change="$pic.parseFile">\n                选择导入文件\n            </button>\n        </div>\n\n        <div>\n            <table class="table" ng-show="$pic.pages.length>0">\n                <thead>\n                <tr>\n                    <th><input type="checkbox" ng-click="$pic.selectAll()" ng-model="$pic.isAll"></th>\n                    <th>Title</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="page in $pic.pages track by $index" ng-init="selected=[]">\n                    <td><input type="checkbox" ng-model="page._selected"></td>\n                    <td>{{page.title}}</td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div class="form-group">\n            <button class="btn btn-primary" type="submit">开始导入</button>\n            <button class="btn btn-default" type="button" ng-click="$pic.cancelImport()">取消</button>\n        </div>\n    </div>\n</form>\n'),e.put("app/modules/udp/page-list.html",'<div  class="op-listview hbox hbox-auto-x">\n\n    \x3c!-- column --\x3e\n    <div class="col w" >\n        <div class="vbox b-r">\n            <div class="wrapper">\n                <a href="" class="btn btn-sm btn-primary m-l-lg" ng-click="createFolder()">\n                    <i class="fa fa-plus fa-fw m-r-xs"></i>新建文件夹</a>\n            </div>\n            <div class="row-row">\n                <div class="cell scrollable hover">\n                    <div class="cell-inner bg-white" >\n                        <div class="list-group no-border op-udp-page-list">\n                            <div id="folderTree" >\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- column --\x3e\n    <div class="col w-md">\n        <div class="vbox b-r">\n\n            <div class="row-row">\n                <div class="cell scrollable hover">\n                    <div class="cell-inner bg-white">\n                        <div class="list-group no-border op-udp-page-list">\n                            <a ng-repeat="page in pages  | filter:query | orderBy:\'modifiedAt\':true track by $index"\n                               class="list-group-item" title="{{page.title || \'Untitled\'}}"\n                               ng-class="{\'hover\': page.selected }"\n                               ui-sref="app.udp.pagelist.browse({pageId:page.id})">\n                                <span class="pull-right"><i class="fa fa-star text-warning"\n                                                ng-if="page.starred"></i> </span>\n                                <span class="text-ellipsis">{{ page.title || \'Untitled\' }}</span>\n                                <span class="small text-muted">{{ page.modifiedAt | date}}</span>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- column --\x3e\n    <div class="col bg-white-only">\n        <div class="vbox">\n            <div class="row-row">\n                <div class="cell">\n                    <div class="cell-inner bg-light dk" ui-view="browser">\n                        <div style="position:relative" class="vbox h-full op-blank-wrapper">\n                            <div class="op-blank-content">\n                                <i class="fa fa-inbox op-fa-8x"></i>\n                                <p>点击右边页面浏览</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n'),e.put("app/modules/udp/page-setting.html",'<form class="form-horizontal" ng-submit="closeModal()">\n    <div class="modal-header">\n        <h3 class="modal-title">页面设置</h3>\n    </div>\n    <div class="modal-body">\n        <uib-tabset class="tab-container">\n            <uib-tab>\n                <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">标题</label>\n                    <div class="col-sm-10">\n                        <input class="form-control" ng-model="$ctrl.page.title">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">文件夹</label>\n                    <div class="col-sm-10">\n\n                        <select chosen="{width:\'100%\'}" class="form-control" ng-model="$ctrl.page.folderId"\n                                ng-options="folder.id as folder.name for folder in folderList | orderBy:\'name\'">\n                            <option></option>\n                        </select>\n\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">描述</label>\n                    <div class="col-sm-10">\n                        <textarea class="form-control" ng-model="$ctrl.page.desc"></textarea>\n                    </div>\n                </div>\n                <fieldset>\n                    <legend>卡片</legend>\n                    <div class="row">\n                        <div class="col-sm-6">\n                            <div class="form-group"\n                                 ng-init="colors=[\'bg-light\',\'bg-dark\',\'bg-black\',\'bg-primary\',\'bg-danger\',\'bg-info\',\'bg-warning\',\'bg-success\']">\n                                <label class="control-label col-sm-4">图标</label>\n                                <div class="col-sm-8">\n                                    <op-iconpicker ng-model="$ctrl.page.setting.icon"></op-iconpicker>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label col-sm-4">颜色</label>\n                                <div class="col-sm-8">\n                                    <select class="form-control" ng-model="$ctrl.page.setting.thumbcolor"\n                                            ng-options="color as color for color in colors | orderBy:\'toString()\'"></select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-sm-6">\n                            <div class="panel op-udp-page-card" style="width:300px">\n                                <div class="panel-body" ng-class="$ctrl.page.setting.thumbcolor">\n                                    <a><h4 class="block text-ellipsis">{{$ctrl.page.title}}</h4>\n                                        <p class="text-muted">日期</p>\n                                    </a>\n                                    <div class="icon"><i class="fa" ng-class="$ctrl.page.setting.icon"></i></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </fieldset>\n            </uib-tab>\n            <uib-tab>\n                <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示设置</uib-tab-heading>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">页面布局</label>\n                    <div class="col-sm-4">\n                        <select class="form-control" ng-model="$ctrl.page.setting.layout">\n                            <option value="">全宽</option>\n                            <option value="container">适合阅读</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">页面主题色</label>\n                    <div class="col-sm-10">\n                        <udp-theme-selector the-model="$ctrl.page.setting" customizable="true"\n                                            theme-group="page"></udp-theme-selector>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="control-label col-sm-2">背景图片</label>\n                    <div class="col-sm-10">\n                        <div class="input-group">\n                                <span class="input-group-addon"><input type="checkbox"\n                                                                       ng-model="$ctrl.page.setting.useBgimage"></span>\n                            <input type="text" ng-model="$ctrl.page.setting.bgimage" class="form-control"\n                                   ng-disabled="!$ctrl.page.setting.useBgimage">\n                        </div>\n                    </div>\n                </div>\n\n            </uib-tab>\n            <uib-tab>\n                <uib-tab-heading><i class=\'fa fa-code\'></i> 页面参数</uib-tab-heading>\n                <pre>{{pageParams|json}}</pre>\n                <pre>{{page.setting}}</pre>\n            </uib-tab>\n        </uib-tabset>\n    </div>\n    <div class="modal-footer">\n        \x3c!--<button type="button" class="btn btn-default" ng-click="closeModal($event)">取消</button>--\x3e\n        <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> 确定</button>\n    </div>\n</form>\n'),e.put("app/modules/udp/page-share-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">分享页面</h3>\n</div>\n<div class="modal-body">\n    <uib-tabset>\n        <uib-tab>\n            <uib-tab-heading><i class=\'fa fa-envelope-o\'></i> 发送邮件 <span class="label label-warning">测试</span> </uib-tab-heading>\n            <div class="form wrapper-sm">\n                <div class="form-group">\n                    <label class="control-label xcol-sm-2">收件人</label>\n                    <div class="xcol-sm-10">\n                        <input type="text" class="form-control" ng-model="vm.to">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="xcol-sm-12 text-right">\n                        <button ng-disabled="!vm.to || vm.isSending" type="button" ng-click="vm.sendEmail()"\n                                class="btn btn-primary">\n                            发送邮件\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </uib-tab>\n        <uib-tab>\n            <uib-tab-heading><i class=\'fa fa-link\'></i> 页面URL</uib-tab-heading>\n            <div class="wrapper-sm">\n                <p>\n                    通过下面的URL可以查看页面\n                </p>\n                <div class="input-group">\n                    <input type="text" class="form-control" ng-model="vm.viewPageUrl" id="js-text1"/>\n                    <span class="input-group-btn"><button type="button" class="btn btn-default" ngclipboard\n                                                          data-clipboard-target="#js-text1"><i\n                            class="fa fa-clipboard"></i></button></span>\n                </div>\n            </div>\n        </uib-tab>\n    </uib-tabset>\n</div>\n'),e.put("app/modules/udp/page-tpl-selector.html",'<div class="modal-header">\n    <h3 class="modal-title">选择页面布局</h3>\n</div>\n<div class="modal-body">\n    <div class="wrapper">\n        <div class="row">\n            <div class="col-xs-3">\n                <div class="b bg wrapper-sm text-center" ng-click="selectLayout(\'chart\')"><i\n                        class="fa fa-5x fa-line-chart"></i>\n                    <h4>数据图表</h4></div>\n            </div>\n            <div class="col-xs-3">\n                <div class="b bg wrapper-sm text-center" ng-click="selectLayout(\'table\')"><i class="fa fa-5x fa-table"></i>\n                    <h4>数据表格</h4></div>\n            </div>\n            <div class="col-xs-3">\n                <div class="b bg wrapper-sm text-center" ng-click="selectLayout(\'default\')"><i\n                        class="fa fa-5x fa-file-photo-o"></i>\n                    <h4>图文混排</h4></div>\n            </div>\n            <div class="col-xs-3">\n                <div class="b bg wrapper-sm text-center" ng-click="selectLayout(\'blank\')"><i class="fa fa-5x fa-file-o"></i>\n                    <h4>空白页面</h4></div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("app/modules/udp/page-view-child.html",'<udp-page-display ng-show="page" page="page" options="{showUrl:true}"></udp-page-display>\n'),e.put("app/modules/udp/page-view-dialog.html",'<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" ng-click="dismissModal()">&times;</button>\n    <h3 class="modal-title">{{page.title}}</h3>\n</div>\n<div class="modal-body">\n    <udp-page-display page="page" options="{showUrl:true}"></udp-page-display>\n</div>'),e.put("app/modules/udp/page-view-full.html",'<udp-page-display ng-show="page" page="page" ng-init="app.hideAside=true;app.hideHeader=true" class="h-full"></udp-page-display>\n'),e.put("app/modules/udp/page-view.html",'<nav class="navbar navbar-default b-b">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"\n                    data-target="#js-secondary-navbar-collapse-1">\n                <span><i class="fa fa-bars"></i></span>\n            </button>\n            <udp-breadcrumb></udp-breadcrumb>\n            \x3c!--<ol class="breadcrumb">--\x3e\n                \x3c!--&lt;!&ndash;<li ng-if="udp.setting.moduleTitle"><a ui-sref="app.udp">{{udp.setting.moduleTitle}}</a></li>&ndash;&gt;--\x3e\n                \x3c!--<li ng-repeat="page in history track by $index">--\x3e\n                    \x3c!--<a udp-page-link="{pageId:page.pageId,params:page.params,target:\'_self\'}">{{page.title}}</a>--\x3e\n                \x3c!--</li>--\x3e\n                \x3c!--<li class="active">{{page.title || \'Untitled\'}}--\x3e\n                    \x3c!--<span ng-click="toggleStar(page)"><i class="fa"--\x3e\n                                                         \x3c!--ng-class="page.starred?\'fa-star text-info\':\'fa-star-o\'"></i></span>--\x3e\n                \x3c!--</li>--\x3e\n            \x3c!--</ol>--\x3e\n        </div>\n        <div class="collapse navbar-collapse" id="js-secondary-navbar-collapse-1">\n            <div class="nav navbar-nav navbar-right">\n                <div class="btn-group" ng-if="udp.setting.isPageOperation">\n                    <a class="btn btn-default navbar-btn" ui-sref="app.udp_pageedit({pageId:page.id})" ng-if="$root.app.currentUser.hasPermission(\'udp:update:\'+page.id)"><i\n                            class="fa fa-pencil"></i> 修改</a>\n                    <a class="btn btn-default navbar-btn" ng-click="clonePage(page.id)"><i class="fa fa-copy"></i>\n                        复制</a>\n                    <a class="btn btn-default navbar-btn" ng-click="deletePage(page.id)" ng-if="currentUser.hasPermission(\'udp:delete:\'+page.id)"><i class="fa fa-trash-o"></i>\n                        删除</a>\n                </div>\n                <div class="btn-group">\n                    <a class="btn btn-default navbar-btn" ng-click="exportCurrentPage(\'pdf\')" title="将页面导出PDF"><i\n                            class="fa fa-file-pdf-o"></i></a>\n                    <a class="btn btn-default navbar-btn" ng-click="exportCurrentPage(\'word\')" title="将页面导出Word"><i\n                            class="fa fa-file-word-o"></i></a>\n                    <a class="btn btn-default navbar-btn" ng-click="exportCurrentPage(\'excel\')" title="将表格数据导出Excel"><i\n                            class="fa fa-file-excel-o"></i></a>\n                    <a class="btn btn-default navbar-btn" ng-click="exportCurrentPage(\'html\')" title="将页面导出HTML"><i\n                            class="fa fa-file-text-o"></i></a>\n                </div>\n                \x3c!--<div class="btn-group">--\x3e\n                <a class="btn btn-default navbar-btn" ng-click="sharePage(page.id)"><i class="fa fa-share-alt"></i> </a>\n                <a class="btn btn-default navbar-btn" ui-sref=\'app.udp_pageview_full({pageId:page.id})\' title="在新窗口全屏打开"\n                   target="_blank"><i class="fa fa-external-link-square"></i></a>\n                \x3c!--</div>--\x3e\n            </div>\n        </div>\n    </div>\n</nav>\n\n<udp-page-display page="page" class="h-full"></udp-page-display>\n\n'),e.put("app/modules/udp/params-control-config.html",'<div ng-if="$ctrl.theModel.length>0">\n    <ul class="nav nav-pills" ui-sortable="$ctrl.sortableOptions" ng-model="$ctrl.theModel">\n        \x3c!-- It seems adding class to li will make ui-sortable unstable --\x3e\n        <li ng-repeat="param in $ctrl.theModel track by $index" style="height:32px;">\n            \x3c!--<li ng-repeat="param in $ctrl.theModel track by $index">--\x3e\n            <span class="label op-label-normal"\n                  ng-class="$ctrl.current.name === param.name?\'label-info\':\'label-default\'">\n                        <i class="fa fa-sort fa-rotate-90 fa-fw op-drag-handle"></i>\n                        <a ng-click="$ctrl.current=param">{{ param.name }}</a>\n                    </span></li>\n    </ul>\n    <div ng-if="$ctrl.current">\n        <uinput-setting-basic props="$ctrl.current" options="{disableBinding:false, disableName:true}"></uinput-setting-basic>\n    </div>\n</div>\n<div ng-if="$ctrl.theModel.length===0">\n    <p class="text-center">此数据集不支持查询参数</p>\n</div>\n'),e.put("app/modules/udp/helper/color-picker.html",'<span style="vertical-align: top"><input class="form-control"/></span>\n'),e.put("app/modules/udp/helper/css-editor.html",'<input type="text" class="form-control" ng-model="$ctrl.theModel">\n<div class="udp-cep-container form-reset bg-dark lter wrapper-sm m-t"\n     style="overflow-y:hidden;\n     width:100%;\n     height:180px;">\n    <p class="m-b-sm">CSS预览</p>\n    <div class="bg-white">\n        <div class="udp-cep-self" ng-class="$ctrl.theModel" style="">\n            <span class="label label-info pull-right">自己</span>\n            <div class="form-group">\n                <label class="control-label">标签</label>\n                <input type="text" class="form-control" placeholder="控件">\n            </div>\n        </div>\n    </div>\n    <div class="udp-cep-other bg-dark bg" style="height:60px;"><span\n            class="label label-default pull-right">其它</span></div>\n</div>\n<div class="m-t">\n    <button type="button" class="btn btn-default" ng-click="showMore=!showMore">CSS列表</button>\n</div>\n<ul class="list-unstyled m-t wrapper-xs b" style="max-height: 10em; overflow-y: auto" ng-show="showMore">\n    <li ng-repeat="css in $ctrl.cssList track by $index">\n        <code>{{css.css}}</code> {{css.desc}}\n    </li>\n</ul>\n'),e.put("app/modules/udp/helper/data-converter-config-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">数据转换 <span class="label label-warning pull-right">beta</span></h3>\n</div>\n<div class="modal-body">\n    <div class="m-b btn-group">\n        <label class="btn btn-default" ng-model="vm.kind" uib-btn-radio="vm.kinds.JS"\n               ng-if="vm.enabledKinds[vm.kinds.JS]"><i class="fa fa-bolt"></i> 函数</label>\n        <label class="btn btn-default" ng-model="vm.kind" uib-btn-radio="vm.kinds.YAML"\n               ng-if="vm.enabledKinds[vm.kinds.YAML]"><i class="fa fa-list"></i> YAML</label>\n        <label class="btn btn-default" ng-model="vm.kind" uib-btn-radio="vm.kinds.STR"\n               ng-if="vm.enabledKinds[vm.kinds.STR]"><i class="fa fa-code"></i> 字符串</label>\n        <label class="btn btn-default" ng-model="vm.kind" uib-btn-radio="vm.kinds.LINK"\n               ng-if="vm.enabledKinds[vm.kinds.LINK]"><i class="fa fa-link"></i> 页面链接</label>\n    </div>\n    <div class="form-horizontal">\n        <div ng-if="vm.kind===vm.kinds.JS && vm.enabledKinds[vm.kinds.JS]">\n            <p>支持一条Javascript语句对数据进行转换，这条语句可以组合多个函数，内置函数以<code>$$.</code>开头。\n                <span ng-if="vm.enabledVarTypes.length>0">\n                    函数的参数可以使用<code>${}</code>形式的变量，支持以下变量：</span></p>\n            <ul class="list-unstyled">\n                <li ng-if="vm.enabledVarTypes.indexOf(\'field\')>=0"><code>${数据集的字段名}</code>：\n                    引用数据集的字段。\n                </li>\n                <li ng-if="vm.enabledVarTypes.indexOf(\'pageparam\')>=0"><code>${@.页面控件或参数名称}</code>：引用页面控件的值。\n                </li>\n            </ul>\n            <div class="form-group">\n                <div class="col-sm-12">\n                     <textarea\n                             ui-codemirror="{onLoad:vm.codemirrorLoaded, mode: \'javascript\',lineNumbers: false, lineWrapping: true, theme:\'dracula\'}"\n                             rows="5" ng-model="vm.convertFn"></textarea>\n                    \x3c!--<textarea class="form-control code" ng-model="vm.convertFn" rows="7"></textarea>--\x3e\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">支持的函数</label>\n                <div class="col-sm-10">\n                    <div class="input-group">\n                        <select ng-options="fn as fnName for (fnName,fn) in ::vm.funcList" ng-model="vm.selectedFn"\n                                class="form-control"></select><span class="input-group-btn">\n                        <button type="button" class="btn btn-default" ng-click="vm.insertFunction()"><i\n                                class="fa fa-plus"></i> </button></span>\n                    </div>\n                    <div class="m-t-sm">\n                        <div>\n                            <code ng-if="vm.selectedFn.sample">{{vm.selectedFn.sample}}</code>\n                            <p ng-bind-html="vm.selectedFn.desc"></p>\n                        </div>\n                        <div ng-if="vm.selectedFn.params.length>0">\n                            <h5><strong>参数</strong></h5>\n                            <ul class="list list-unstyled">\n                                <li ng-repeat="param in vm.selectedFn.params track by $index">\n                                    <code>{{param.name}}</code> <span class="label label-default">{{param.type}}</span>\n                                    <span ng-bind-html="param.desc"></span>\n                                </li>\n                            </ul>\n                        </div>\n                        <div ng-if="vm.selectedFn.returns">\n                            <h5><strong>返回</strong></h5>\n                            <span class="label label-default">{{vm.selectedFn.returns.type}}</span>\n                            <span ng-bind-html="vm.selectedFn.returns.desc"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-if="vm.kind===vm.kinds.YAML && vm.enabledKinds[vm.kinds.YAML]">\n            <div class="form-group">\n                <div class="col-sm-12">\n                     <textarea\n                             ui-codemirror="{mode: \'yaml\',lineNumbers: false, lineWrapping: true, theme:\'dracula\'}"\n                             rows="6" ng-model="vm.convertFn"></textarea>\n                </div>\n            </div>\n        </div>\n        <div ng-if="vm.kind===vm.kinds.STR && vm.enabledKinds[vm.kinds.STR]">\n            <p>返回一条字符串，字符串中可以通过<code>${数据集的字段名}</code>的形式引用数据集的字段。字符串也可以是HTML代码，\n                例如<code>${name} &lt;a\n                    href="mailto:${email}"&gt;${email}&lt;/a&gt;</code>，可以将数据集字段<code>name</code>和<code>email</code>连在一起。\n            </p>\n            <div class="form-group">\n                <div class="col-sm-12">\n                     <textarea\n                             ui-codemirror="{mode: \'htmlmixed\', lineWrapping: true, theme:\'dracula\'}"\n                             rows="6" ng-model="vm.convertFn"></textarea>\n                </div>\n            </div>\n        </div>\n        <div ng-if="vm.kind===vm.kinds.LINK && vm.enabledKinds[vm.kinds.LINK]">\n            <ul class="nav nav-pills wrapper-xs bg-light lt" ui-sortable ng-model="vm.pageLinks">\n                <li>\n                    <button type="button" class="btn btn-sm btn-primary" ng-click="vm.addPageLink()"><i\n                            class="fa fa-plus"></i>\n                        添加链接\n                    </button>\n                </li>\n                <li ng-repeat="link in vm.pageLinks track by $index">\n                    <div class="btn-group">\n                        <span class="btn btn-sm btn-default"\n                              ng-click="vm.currentLink=link">{{link.label || \'&nbsp;&nbsp;\'}}</span>\n                        <button type="button" class="btn btn-sm btn-default" ng-click="vm.removePageLink($index)"\n                                uib-tooltip="删除此链接"><i class="fa fa-times"></i></button>\n                    </div>\n                </li>\n            </ul>\n            <div class="wrapper-sm" ng-if="vm.currentLink">\n                <div class="form-group">\n                    <label class="control-label col-sm-2">标签</label>\n                    <div class="col-sm-10">\n                        <input type="text" class="form-control" ng-model="vm.currentLink.label" placeholder="标签">\n                    </div>\n                </div>\n                <udp-page-link-config props="vm.currentLink"></udp-page-link-config>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <div class="form-group">\n        <button type="button" class="btn btn-default" ng-click="vm.cancel()">取消</button>\n        <button type="submit" class="btn btn-success" ng-click="vm.save()">保存</button>\n    </div>\n</div>\n\n'),e.put("app/modules/udp/helper/data-converter.html",'<div class="input-group">\n    <span class="input-group-addon">{{$ctrl.meta.kind | limitTo:1 | uppercase}}</span>\n    <input class="form-control code" readonly value="{{$ctrl.meta.body}}"/>\n    <div class="input-group-btn">\n        <button class="btn btn-default" type="button" ng-disabled="$ctrl.disabled"\n                ng-click="$ctrl.showBuilder()" title="编辑器"><i\n                class="fa fa-pencil"></i></button>\n        <button class="btn btn-default" type="button" ng-disabled="$ctrl.disabled"\n                ng-click="$ctrl.remove()" title="清除"><i\n                class="fa fa-trash-o"></i></button>\n    </div>\n</div>\n'),e.put("app/modules/udp/helper/expandable-editor.html",'<div class="modal-header">\n    <h3 class="modal-title">编辑</h3>\n</div>\n<div class="modal-body">\n    <div>\n        <textarea ng-model="model" class="form-control" rows="8"></textarea>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>\n    <button type="button" class="btn btn-success" ng-click="submit()">确定</button>\n</div>'),e.put("app/modules/udp/helper/page-link-config.html",'<div class="form-group">\n    <label class="col-sm-2 control-label">打开页面</label>\n    <div class="col-sm-10">\n        <udp-page-selector page-id="$ctrl.props.pageId" on-change=""></udp-page-selector>\n    </div>\n</div>\n<div class="form-group">\n    <label class="col-sm-2 control-label" op-help-info="如果要在某个内容格打开，需要先给内容格设定一个ID">打开位置</label>\n    <div class="col-sm-10 col-md-4">\n        <select class="form-control" ng-model="$ctrl.props.target"\n                ng-options="target.key as target.title for target in $ctrl.targets">\n        </select>\n    </div>\n</div>\n<div class="form-group">\n    <label class="col-sm-2 control-label">页面参数</label>\n    <div class="col-sm-10">\n        <udp-page-params-config params-json="$ctrl.props.params"></udp-page-params-config>\n        <div ng-transclude></div>\n    </div>\n</div>\n'),e.put("app/modules/udp/helper/page-params-config.html",'<table class="table table-condensed op-param-table">\n    <thead>\n    <tr>\n        <th>名称</th>\n        <th>值\n        \x3c!--</th>--\x3e\n        \x3c!--<th>--\x3e\n            <button type="button" class="pull-right btn btn-primary btn-xs" ng-click="$ctrl.params.push({})"><i\n                    class="fa fa-plus"></i> 增加参数\n            </button>\n        </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="param in $ctrl.params track by $index" xng-if="$ctrl.params">\n        <td><input type="text" class="form-control" ng-model="param.name"></td>\n        <td>\n            \x3c!--<input type="text" class="form-control" ng-model="param.value">--\x3e\n            <udp-data-converter the-model="param.value" options="{kinds:\'js,str\',varTypes:\'pageparam\'}"></udp-data-converter>\n        </td>\n        \x3c!--<td align="right">--\x3e\n            \x3c!--<button type="button" class="btn btn-default" ng-click="$ctrl.params.splice($index,1)"><i--\x3e\n                    \x3c!--class="fa fa-remove"></i></button>--\x3e\n        \x3c!--</td>--\x3e\n    </tr>\n    </tbody>\n</table>\n'),e.put("app/modules/udp/helper/page-selector.html",'<div class="row">\n    <div class="col-sm-6" style="padding-right:0;">\n        <select chosen="{width:\'100%\'}"\n                ng-model="$ctrl.pageId" class="form-control" data-placeholder-text-single="\'选择要链接的页面\'"\n                ng-options="page.id as page.title for page in $ctrl.pages"></select>\n    </div>\n    <div class="col-sm-6"><span class="pull-left control-label m-r">或</span>\n        <udp-data-converter the-model="$ctrl.pageId" options="{kinds:\'js\',varTypes:\'field\'}"></udp-data-converter>\n    </div>\n</div>\n'),e.put("app/modules/udp/helper/theme-selector.html",'\x3c!--<div ng-if="$ctrl.label">--\x3e\n    \x3c!--<label class="control-label col-sm-2">{{$ctrl.label}}</label>--\x3e\n    <select ng-model="$ctrl.theModel.theme" class="form-control inline"\n            ng-options="theme.id as theme.title for theme in ::$ctrl.themes" style="width:10em;">\n    </select>\n    <div ng-if="$ctrl.theModel.theme===\'_CUSTOM\'" class="inline m-l"  style="vertical-align: top">\n        \x3c!--<label class="control-label">背景色</label>--\x3e\n        <udp-color-picker ng-model="$ctrl.theModel.backColor" title="背景颜色"></udp-color-picker>\n        \x3c!--<label class="control-label">字体色</label>--\x3e\n        <udp-color-picker ng-model="$ctrl.theModel.fontColor" title="字体颜色"></udp-color-picker>\n    </div>\n\x3c!--</div>--\x3e\n\x3c!--<select ng-model="$ctrl.theModel.theme" class="form-control" ng-if="!$ctrl.label"--\x3e\n        \x3c!--ng-options="theme.id as theme.title for theme in ::$ctrl.themes">--\x3e\n\x3c!--</select>--\x3e\n'),e.put("app/modules/udp/widgets/dsfield-selector.html",'<div style="display: flex;">\n    <select chosen="{width:\'16em\'}" class="form-control" ng-model="$ctrl.theModel.field"\n            ng-options="df.name as df.name+\' [\'+df.type+\']\' for df in $ctrl.fields | orderBy:\'name\'">\n        <option value="">--自定义数据--</option>\n    </select>\n    <udp-data-converter the-model="$ctrl.theModel.convertFn" options="$ctrl.options.converter"\n                        style="flex:1;" disabled="$ctrl.theModel.field"></udp-data-converter>\n</div>\n'),e.put("app/modules/udp/widgets/page-event-selector.html",'<select class="form-control" ng-model="$ctrl.theModel" id="feventtorefresh"\n        ng-options="event.name as event.name for event in $ctrl.pageEvents">\n    <option value=""></option>\n</select>'),e.put("app/modules/udp/widgets/uinput-setting-basic.html",'<div class="form-group">\n    <div ng-if="!$ctrl.options.disableName">\n        <label class="control-label col-sm-2" for="f_name"\n               op-help-info="用以保存此控件值的参数名，可以为空，如果别的控件需要关联此控件的数据，就需要设置一个整个页面唯一的名称">名称</label>\n        <div class="col-sm-10 col-md-4">\n            <input class="form-control" ng-model="$ctrl.props.name" id="f_name">\n        </div>\n    </div>\n    <div ng-if="!$ctrl.options.disableBinding">\n        <label class="control-label col-sm-2" for="f_binding">同步页面参数</label>\n        <div class="col-sm-10 col-md-4">\n            <input class="form-control" ng-model="$ctrl.props.binding" id="f_binding">\n        </div>\n    </div>\n    <label class="control-label col-sm-2" for="f_label">标签</label>\n    <div class="col-sm-10 col-md-4">\n        <div class="input-group">\n            <span class="input-group-addon"><input type="checkbox" ng-model="$ctrl.props.showlabel"></span>\n            <input class="form-control" ng-model="$ctrl.props.label" id="f_label"\n                   ng-disabled="!$ctrl.props.showlabel">\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2">数据类型</label>\n    <div class="col-sm-4">\n        <select class="form-control" ng-model="$ctrl.props.format">\n            \x3c!--<option value="string" ng-if="$ctrl.props.control!==\'datepicker\'">字符串</option>--\x3e\n            <option value="string">字符串</option>\n            <option value="number" ng-if="$ctrl.props.control!==\'datepicker\'">数值</option>\n            <option value="date">日期</option>\n        </select>\n    </div>\n    \x3c!--</div>--\x3e\n    \x3c!--<div class="form-group">--\x3e\n    <label class="control-label col-sm-2">默认值</label>\n    <div class="col-sm-4">\n        <udp-data-converter the-model="$ctrl.props.initval" options="{kinds:\'js,str\',varTypes:\'pageparam\'}"/>\n    </div>\n</div>\n<hr>\n<div class="form-group">\n    <label class="control-label col-sm-2">控件类型</label>\n    <div class="col-sm-10 col-md-4">\n        <select class="form-control" ng-model="$ctrl.props.control">\n            <option value="input">输入框</option>\n            <option value="select">下拉框</option>\n            <option value="datepicker">日期选择</option>\n            <option value="text">文本</option>\n            \x3c!--<option value="switch">开关</option>--\x3e\n            <option value="hidden">隐藏</option>\n        </select>\n    </div>\n    <div ng-if="$ctrl.props.control===\'datepicker\'">\n        <label class="control-label col-sm-2">日期格式</label>\n        <div class="col-sm-10 col-md-4">\n            <select class="form-control" ng-model="$ctrl.props.formatter">\n                <option value="YYYY-MM-DD">年-月-日</option>\n                <option value="YYYY/MM/DD">年/月/日</option>\n                <option value="YYYY-MM-DD HH:mm:ss">年-月-日 时:分:秒</option>\n                <option value="YYYY/MM/DD HH:mm:ss">年/月/日 时:分:秒</option>\n            </select>\n        </div>\n    </div>\n</div>\n<div class="form-group" ng-if="$ctrl.props.control===\'select\'">\n    <label class="control-label col-sm-2">数据来源</label>\n    <div class="col-sm-4">\n        <select class="form-control" ng-model="$ctrl.props.source">\n            <option value="" ng-if="$ctrl.props.control!==\'select\'">手工输入</option>\n            <option value="func">函数</option>\n        </select>\n    </div>\n    <div ng-if="$ctrl.props.control===\'select\'">\n        <label class="control-label col-sm-2"\n               op-help-info="根据另一个输入控件触发的事件来刷新下拉列表，实现控件联动。定时器、按钮等事件在此无效。要刷新数据的话，控件名称不能为空。">数据刷新</label>\n        <div class="col-sm-4">\n            <input class="form-control" ng-model="$ctrl.props.eventtorefresh"/>\n        </div>\n    </div>\n</div>\n<div ng-if="$ctrl.props.source===\'func\' && $ctrl.props.control===\'select\'" class="form-group">\n    <label class="control-label col-sm-2">数据定义</label>\n    <div class="col-sm-10">\n        <udp-data-converter the-model="$ctrl.props.sourcedef"\n                            options="{kinds:\'js,yaml\',varTypes:\'pageparam\'}"></udp-data-converter>\n    </div>\n</div>\n<hr>\n<div class="form-group">\n    <label class="control-label col-sm-2">宽度（字符）</label>\n    <div class="col-sm-4">\n        <input type="number" ng-model="$ctrl.props.width" class="form-control">\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2">样式</label>\n    <div class="col-sm-10">\n        <label class="i-checks checkbox-inline"><input type="checkbox" ng-model="$ctrl.props.readonly"><i></i>只读</label>\n    </div>\n</div>\n'),e.put("app/modules/udp/widgets/uinput-setting-interaction.html",'<div class="form-group">\n    <label class="control-label col-sm-2">数据改变触发事件</label>\n    <div class="col-sm-4">\n        <input class="form-control" ng-model="$ctrl.props.eventbychange">\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2">根据事件刷新数据</label>\n    <div class="col-sm-4">\n        <input class="form-control" ng-model="$ctrl.props.eventtorefresh">\n    </div>\n</div>\n'),e.put("app/modules/udp/widgets/widget-config-chart-axis.html",'<fieldset ng-if="axisOptions.xAxis.enabled!==false">\n    <legend>{{axisOptions.xAxis.name||\'X轴\'}}</legend>\n    <div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">数据</label>\n            <div class="col-sm-10">\n                <udp-dsfield-selector the-model="theModel.xAxis" fields="fields"></udp-dsfield-selector>\n            </div>\n        </div>\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2">标签</label>--\x3e\n        \x3c!--<div class="col-sm-4">--\x3e\n        \x3c!--<input class="form-control" ng-model="theModel.xAxis.legend"></div>--\x3e\n        \x3c!--</div>--\x3e\n        <div class="form-group" ng-if="axisOptions.xAxis.customizable.indexOf(\'axisType\')>=0">\n            <label class="control-label col-sm-2"\n                   op-help-info="时间轴，适用于连续的时序数据，与数值轴相比时间轴带有时间的格式化，在刻度计算上也有所不同，例如会根据跨度的范围来决定使用月，星期，日还是小时范围的刻度。">坐标轴类型</label>\n            <div class="col-sm-2">\n                <select class="form-control" ng-model="theModel.xAxis.axisType">\n                    <option value=""></option>\n                    <option value="time">时间轴</option>\n                </select>\n            </div>\n            <div class="col-sm-4" ng-if="theModel.xAxis.axisType===\'time\'">\n                <div class="input-group">\n                    <span class="input-group-addon"\n                          op-help-info="坐标轴上时间点的显示格式：YYYY-年，MM-月，DD-日，hh-小时，mm-分钟，ss-秒">格式化</span>\n                    <input type="text" class="form-control" ng-model="theModel.xAxis.axisLabel">\n                </div>\n                \x3c!--<div class="input-group">--\x3e\n                \x3c!--<span class="input-group-addon">最小间隔</span>--\x3e\n                \x3c!--<input type="text" class="form-control" ng-model="theModel.xAxis.axisLabel">--\x3e\n                \x3c!--<span class="input-group-btn"><select class="form-control" ng-model="theModel.xAxis.timeBreakLimitU">--\x3e\n                \x3c!--<option value="s">秒</option>--\x3e\n                \x3c!--<option value="m">分</option>--\x3e\n                \x3c!--<option value="h">小时</option>--\x3e\n                \x3c!--<option value="d">天</option>--\x3e\n                \x3c!--</select></span>--\x3e\n                \x3c!--</div>--\x3e\n            </div>\n            \x3c!--<div class="col-sm-4">--\x3e\n            \x3c!--<label class="i-checks checkbox-inline">--\x3e\n            \x3c!--<input type="checkbox" ng-model="theModel.datastream.enabled"><i></i> 启用数据流更新图形--\x3e\n            \x3c!--</label>--\x3e\n            \x3c!--<span class="label label-warning">试用</span>--\x3e\n            \x3c!--</div>--\x3e\n        </div>\n        \x3c!--<div ng-if="theModel.datastream.enabled">--\x3e\n        \x3c!--<udp-widget-config-dataset props="theModel.datastream.dataset" selected-ds="streamDs"--\x3e\n        \x3c!--options="{disableParams:true,disableConfirm:true}"></udp-widget-config-dataset>--\x3e\n        \x3c!--</div>--\x3e\n    </div>\n</fieldset>\n\n<fieldset>\n    <div class="pull-right" ng-if="axisOptions.yAxis.multiple">\n        <button type="button" class="btn btn-primary btn-sm" ng-click="addYAxis()"><i\n                class="fa fa-plus-square-o"></i> 添加指标\n        </button>\n    </div>\n    <legend>数据指标</legend>\n    <div>\n        <ul ui-sortable="sortableOptions" ng-model="theModel.yAxes" class="nav nav-pills">\n            \x3c!-- It seems adding class to li will make ui-sortable unstable --\x3e\n            <li ng-repeat="field in theModel.yAxes track by $index" style="height:32px;">\n                    <span class="label op-label-normal"\n                          ng-class="current.index === $index?\'label-info\':\'label-default\'">\n                        <i ng-if="!field.field" class="fa fa-bolt"></i>\n                        <a ng-click="selectYAxis($index)">{{ field.legend||label || field.field || \'&nbsp;&nbsp;&nbsp;\'}}</a>\n                        <a ng-click="removeYAxis($index)" ng-if="axisOptions.yAxis.multiple">&times;</a>\n                    </span></li>\n        </ul>\n    </div>\n    <div ng-if="current.index>=0" class="bg-light lt wrapper-sm">\n        <div class="form-group">\n            <label class="control-label col-sm-2">图例名称</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="current.yAxis.legend"></div>\n            <div class="col-sm-6">\n                <label class="i-checks checkbox-inline"><input type="checkbox" class="form-control"\n                                                               ng-model="current.yAxis.hidden"><i></i>\n                    默认不显示此字段</label>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">数据</label>\n            <div class="col-sm-10">\n                <udp-dsfield-selector the-model="current.yAxis" fields="fields"></udp-dsfield-selector>\n            </div>\n        </div>\n        <h5>样式</h5>\n        \x3c!--<hr/>--\x3e\n        <div id="cfg-chart-type" class="form-group" ng-if="axisOptions.yAxis.customizable.indexOf(\'chartType\')>=0">\n            <label class="control-label col-sm-2">图形</label>\n            <div class="col-sm-2">\n                <select class="form-control" ng-model="current.yAxis.chartType">\n                    <option value="bar" ng-if="chartType!==\'map\'">柱状图</option>\n                    <option value="line" ng-if="chartType!==\'map\'">折线图</option>\n                    <option value="map" ng-if="chartType===\'map\'">主地图</option>\n                    <option value="scatter" ng-if="chartType===\'map\'">散点</option>\n                </select>\n            </div>\n            <label class="i-checks checkbox-inline" ng-if="chartType===\'map\'">\n                <input type="checkbox" ng-model="current.yAxis.showVisualMap"><i></i>\n                <span op-help-info="显示一个对应不同数据范围的颜色指示器，可以通过这个指示器来筛选数据范围">\n                显示数据指示器\n                </span>\n            </label>\n            <div class="inline" ng-if="theModel.xAxis.axisType===\'time\' && current.yAxis.chartType===\'line\'">\n                <label class="i-checks">\n                    <input type="checkbox" ng-model="current.yAxis.contTime.enabled"><i></i> 断开连线如果间隔\n                </label>\n                <input type="number" class="form-control inline" ng-model="current.yAxis.contTime.limit">\n                <select class="form-control inline" ng-model="current.yAxis.contTime.unit" style="width:8rem;">\n                    <option value="s">秒</option>\n                    <option value="m">分</option>\n                    <option value="h">小时</option>\n                    <option value="d">天</option>\n                </select>\n                <span op-help-info="当显示时间序列的折线图时，如果超过某一个范围没有数据点，可以设置切断连线。">没有数据</span>\n            </div>\n        </div>\n        <div class="form-group" ng-if="current.yAxis.chartType===\'map\'">\n            <label class="control-label col-sm-2">颜色范围</label>\n            <div class="col-sm-10"\n                 ng-init="current.yAxis.auxData[\'color\'].range=current.yAxis.auxData[\'color\'].range||[]">\n                <udp-color-picker ng-model="current.yAxis.auxData[\'color\'].range[0].k" title="最小值颜色"></udp-color-picker>\n                <udp-color-picker ng-model="current.yAxis.auxData[\'color\'].range[1].k" title="最大值颜色"></udp-color-picker>\n            </div>\n        </div>\n        <div class="form-group" ng-if="current.yAxis.chartType!==\'map\'">\n            <label class="control-label col-sm-2">数据点标签</label>\n            <div class="col-sm-2">\n                <select class="form-control" ng-model="current.yAxis.pointLabel">\n                    <option value="">不显示</option>\n                    <option value="outside">外侧</option>\n                    <option value="inside">内侧</option>\n                </select>\n            </div>\n            <label class="control-label col-sm-2" ng-if="chartType===\'pie\'">标签格式</label>\n            <div class="col-sm-6" ng-if="chartType===\'pie\'">\n                <div class="input-group">\n                    <input type="text" ng-model="current.yAxis.labelFormatter" class="form-control"\n                           ng-disabled="current.yAxis.pointLabel===\'\'">\n                    <span class="input-group-btn"><button udp-expandable-editor="current.yAxis.labelFormatter"\n                                                          type="button" class="btn btn-default"\n                                                          ng-disabled="$ctrl.ngDisabled"><i\n                            class="fa fa-edit"></i></button></span>\n                </div>\n            </div>\n        </div>\n        \x3c!--<a ng-click="showMoreY=!showMoreY" class="">更多设置 <i class="fa"--\x3e\n        \x3c!--ng-class="showMoreY?\'fa-angle-up\':\'fa-angle-down\'"></i></a>--\x3e\n        <div id="cfg-axis-type" class="form-group" ng-if="axisOptions.yAxis.customizable.indexOf(\'axisType\')>=0">\n            <label class="control-label col-sm-2">坐标形式</label>\n            <div class="col-sm-10">\n                <select class="form-control inline op-size-sm" ng-model="current.yAxis.axisType">\n                    <option value="linear">线性坐标</option>\n                    \x3c!--<option value="log">对数坐标</option>--\x3e\n                </select>\n                <select class="form-control inline op-size-sm" ng-model="current.yAxis.position" title="坐标位置">\n                    <option value="left">左边</option>\n                    <option value="right">右边</option>\n                </select>\n            </div>\n        </div>\n        \x3c!--<div id="cfg-point-shape" ng-if="current.yAxis.chartType===\'scatter\'"--\x3e\n        \x3c!--class="form-inline col-sm-offset-2 col-sm-10">--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label">形状</label>--\x3e\n        \x3c!--<select class="form-control"--\x3e\n        \x3c!--ng-options="type as type for type in styles.pointShapes"--\x3e\n        \x3c!--ng-model="current.yAxis.pointShape"></select>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label">宽度</label>--\x3e\n        \x3c!--<input type="number" class="form-control" placeholder="宽度"--\x3e\n        \x3c!--ng-model="current.yAxis.pointSize"/>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label">颜色</label>--\x3e\n        \x3c!--<udp-color-picker ng-model="current.yAxis.pointColor" format="\'rgb\'"--\x3e\n        \x3c!--options="{showPalette:true}" palette="colors"></udp-color-picker>--\x3e\n        \x3c!--</div>--\x3e\n\n        \x3c!--</div>--\x3e\n        <div id="cfg-line-style" class="form-group" ng-if="axisOptions.yAxis.customizable.indexOf(\'lineStyle\')>=0">\n            <label class="control-label col-sm-2">线条样式</label>\n            <div class="col-sm-6">\n                <select class="form-control inline op-size-sm" title="线条形状"\n                        ng-options="type as type for type in styles.lineTypes"\n                        ng-model="current.yAxis.lineType"></select>\n                <input type="number" class="form-control inline" title="线条宽度（像素）"\n                       min="1"\n                       ng-model="current.yAxis.lineWidth"/>\n                <udp-color-picker class="inline" title="线条颜色" ng-model="current.yAxis.lineColor"></udp-color-picker>\n                <input type="number" class="form-control inline" title="填充区域透明度（0-10，0表示完全透明）"\n                       ng-model="current.yAxis.fillOpacity">\n            </div>\n        </div>\n        <div id="cfg-point-style" class="form-group"\n             ng-if="chartType!==\'pie\' && [\'map\',\'pie\'].indexOf(current.yAxis.chartType)<0">\n            <label class="control-label col-sm-2">数据点样式</label>\n            <div class="col-sm-6">\n                <select class="form-control inline op-size-sm" title="数据点形状"\n                        ng-options="type as type for type in styles.pointShapes"\n                        ng-model="current.yAxis.pointShape"></select>\n                <input type="number" class="form-control inline" title="数据点宽度（像素）"\n                       min="0"\n                       ng-disabled="current.yAxis.dynamicPoint"\n                       ng-model="current.yAxis.pointSize"/>\n                <udp-color-picker class="inline" title="数据点颜色" ng-model="current.yAxis.pointColor"\n                                  disabled="current.yAxis.dynamicPoint"></udp-color-picker>\n            </div>\n            <div class="col-sm-4" ng-if="current.yAxis.chartType===\'scatter\'">\n                <label class="i-checks checkbox-inline">\n                    <input type="checkbox" ng-model="current.yAxis.dynamicPoint"><i></i> 根据数值变化大小颜色\n                </label>\n            </div>\n        </div>\n        <div id="cfg-dynamic-color-size" class="wrapper-sm bg-white"\n             ng-if="current.yAxis.dynamicPoint && current.yAxis.chartType===\'scatter\'">\n            <div id="dynamic-size" class="form-inline m-b">\n                <div class="form-group">\n                    <label class="control-label">大小</label>\n                    <udp-dsfield-selector the-model="current.yAxis.auxData[\'size\']" class="inline"\n                                          fields="fields" style="width:26em;"></udp-dsfield-selector>\n                </div>\n                <div class="form-group"\n                     ng-init="current.yAxis.auxData[\'size\'].range=current.yAxis.auxData[\'size\'].range||[]">\n                    <label class="control-label">最大宽度</label>\n                    <input type="number" class="form-control" title="数据点的最大宽度 (px)" style="width:6em;"\n                           ng-model="current.yAxis.auxData[\'size\'].range[1].k"/>\n                </div>\n                <div class="form-group">\n                    <label class="control-label">对应数据</label>\n                    <input type="number" class="form-control" title="最大宽度对应的数值" style="width:6em;"\n                           ng-model="current.yAxis.auxData[\'size\'].range[1].v"/>\n                </div>\n            </div>\n            <div id="dynamic-color" class="form-inline">\n                <div class="form-group">\n                    <label class="control-label">颜色</label>\n                    <udp-dsfield-selector the-model="current.yAxis.auxData[\'color\']" class="inline"\n                                          fields="fields" style="width:26em;"></udp-dsfield-selector>\n                </div>\n                <div class="form-group"\n                     ng-init="current.yAxis.auxData[\'color\'].range=current.yAxis.auxData[\'color\'].range||[]">\n                    <label class="control-label">颜色范围</label>\n                    <udp-color-picker ng-model="current.yAxis.auxData[\'color\'].range[0].k"></udp-color-picker>\n                    <udp-color-picker ng-model="current.yAxis.auxData[\'color\'].range[1].k"></udp-color-picker>\n                </div>\n                \x3c!--<div class="form-group">--\x3e\n                \x3c!--<label class="control-label">对应数据</label>--\x3e\n                \x3c!--<input type="number" class="form-control" placeholder="最大尺寸" style="width:6em;"--\x3e\n                \x3c!--ng-model="current.yAxis.auxData[\'color\'].range[1].v"/>--\x3e\n                \x3c!--</div>--\x3e\n                \x3c!--<div class="form-group">--\x3e\n                \x3c!--<label class="i-checks checkbox-inline"><input type="checkbox"--\x3e\n                \x3c!--ng-model="current.yAxis.auxData[\'color\'].legend"><i></i>--\x3e\n                \x3c!--显示图例--\x3e\n                \x3c!--</label>--\x3e\n                \x3c!--</div>--\x3e\n            </div>\n        </div>\n    </div>\n</fieldset>\n\n'),e.put("app/modules/udp/widgets/widget-config-chart-display.html",'<div class="form-group">\n    <label class="control-label col-sm-2">图形色调</label>\n    <div class="col-sm-4" ng-init="">\n        <select class="form-control" ng-model="$ctrl.props.palette"\n                ng-options="id as p.title for (id,p) in $ctrl.palettes">\n        </select>\n    </div>\n    <div class="col-sm-6">\n                <span ng-repeat="color in $ctrl.palettes[$ctrl.props.palette].colors"\n                      style="background-color:{{color}};margin-right:4px;width:24px;height:24px;display:inline-block;">&nbsp;</span>\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2">坐标网格线</label>\n    <div class="col-sm-4">\n        <label class="i-checks checkbox-inline">\n            <input type="checkbox" ng-model="$ctrl.props.showGridLineX"><i></i>显示X轴\n        </label>\n        <label class="i-checks checkbox-inline">\n            <input type="checkbox" ng-model="$ctrl.props.showGridLineY"><i></i>显示Y轴\n        </label>\n    </div>\n</div>\n\x3c!--<div class="form-group">--\x3e\n\x3c!--<label class="control-label col-sm-2" op-help-info="只支持绝对单位，例如300px">图形高度</label>--\x3e\n\x3c!--<div class="col-sm-10 col-md-4">--\x3e\n\x3c!--<input type="text" class="form-control" ng-model="$ctrl.props.height"/>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n<div class="form-group" ng-if="$ctrl.chartType!==\'gauge\'">\n    <label class="control-label col-sm-2">图例位置</label>\n    <div class="col-sm-4">\n        <select class="form-control" ng-model="$ctrl.props.legend.position">\n            <option value="none">不显示</option>\n            <option value="auto">自动</option>\n        </select>\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2">按钮</label>\n    <div class="col-sm-4">\n        <label class="i-checks checkbox-inline"><input type="checkbox" ng-model="$ctrl.props.tools.saveImage"><i></i>\n            保存图片</label>\n\n    </div>\n</div>\n\x3c!--<div ng-if="$ctrl.options.enableVisualMap">--\x3e\n\x3c!--<div class="form-group">--\x3e\n\x3c!--<label class="control-label col-sm-2">数据范围指示</label>--\x3e\n\x3c!--<div class="col-sm-4">--\x3e\n\x3c!--<select class="form-control" ng-model="$ctrl.props.visualMap.type">--\x3e\n\x3c!--<option value="">不使用</option>--\x3e\n\x3c!--<option value="continuous">连续样式</option>--\x3e\n\x3c!--<option value="piecewise">分段样式</option>--\x3e\n\x3c!--</select>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--\n<div class="form-group">\n    <label class="control-label col-sm-2">图例位置</label>\n    <div class="col-sm-10 col-md-4">\n        <select class="form-control" ng-model="$ctrl.props.legend">\n            <option value="none">不显示</option>\n            <option value="top">上方</option>\n            <option value="bottom">下方</option>\n            <option value="left">左方</option>\n            <option value="right">右方</option>\n        </select>\n    </div>\n</div>\n\n\n--\x3e\n'),e.put("app/modules/udp/widgets/widget-config-dataset.html",'<div class="form-group">\n    <label class="col-sm-2 control-label">数据集</label>\n    <div class="col-sm-10">\n        \x3c!--Also important: if your ngModel is null or undefined, you must manually\n        include an empty <option value=“”></option> inside your <select>,\n        otherwise you’ll encounter strange off-by-one errors--\x3e\n\n        <div class="input-group">\n            <select chosen="{width:\'100%\'}" class="form-control" ng-model="$ctrl.props.id"\n                    ng-change="$ctrl.confirmChange()"\n                    ng-options="ds.code as ds.name for ds in $ctrl.datasets | orderBy:\'name\'">\n                <option disabled></option>\n            </select>\n            <span class="input-group-btn"><button type="button" class="btn btn-default" uib-tooltip="创建新的数据集"\n                                                  ng-click="$ctrl.newDataset()"><i\n                    class="fa fa-plus"></i></button></span>\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label class="control-label col-sm-2" for="feventtorefresh"\n           uib-popover="通过页面控件产生的事件来触发数据集更新。下拉框显示页面上定时器、按钮、下拉框定义的事件。"\n           popover-trigger="\'mouseenter\'" popover-append-to-body="true">数据刷新事件 <i class="fa fa-info-circle"></i>\n    </label>\n    <div class="col-sm-10">\n        <udp-page-event-selector the-model="$ctrl.props.eventtorefresh"></udp-page-event-selector>\n    </div>\n</div>\n<div class="form-group" ng-if="$ctrl.options.allowClientLimit">\n    <label class="control-label col-sm-2">限制记录数目</label>\n    <div class="col-sm-4 col-md-4">\n        <input type="number" class="form-control" ng-model="$ctrl.props.limit" min="0">\n        <p class="help-block">如果值大于0，那么无论数据集有多少条数据，都只显示设定的数据量。</p>\n    </div>\n</div>\n\x3c!--<div class="form-group" ng-if="$ctrl.options.allowServerPage">--\x3e\n<div class="form-group" ng-if="false">\n    <label class="control-label col-sm-2"></label>\n    <div class="col-sm-4 col-md-4">\n        <div class="checkbox"><label class="i-checks"><input type="checkbox"\n                                                             ng-model="$ctrl.props.serverPage"><i></i>使用服务器端分页</label>\n        </div>\n    </div>\n</div>\n\x3c!--<fieldset ng-if="!$ctrl.options.disableParams && ($ctrl.selectedDs.paramsConfig | isNotEmpty)">--\x3e\n<fieldset ng-if="!$ctrl.options.disableParams">\n    <legend>数据集查询参数</legend>\n    <udp-params-control-config the-model="$ctrl.props.params"\n                               params-config="$ctrl.selectedDs.paramsConfig"></udp-params-control-config>\n    <div class="form-group" ng-if="$ctrl.selectedDs.paramsConfig | isNotEmpty">\n        <div class="col-sm-6">\n            <label class="checkbox-inline i-checks"><input type="checkbox" ng-model="$ctrl.props.hideParams"><i></i>隐藏查询参数控件</label>\n        </div>\n    </div>\n</fieldset>\n\n'),e.put("app/modules/udp/widgets/widget-config-display.html",'\x3c!--<div class="form-group">--\x3e\n\x3c!--<label class="control-label col-sm-2" for="f_cardmode">显示</label>--\x3e\n\x3c!--<div class="col-sm-4">--\x3e\n\x3c!--<div class="checkbox">--\x3e\n\x3c!--<label class="i-checks"><input type="checkbox" id="f_cardmode"--\x3e\n\x3c!--ng-model="uwProps.display.cardMode"><i></i>以卡片形式显示</label>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n<div ng-transclude></div>\n<fieldset>\n    <legend><label class="i-checks checkbox-inline" style="padding-top:0;">\n        <input type="checkbox" ng-model="uwProps.display.cardMode"><i></i> <strong>卡片模式</strong>\n    </label>\n    </legend>\n    <div ng-if="uwProps.display.cardMode">\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="input_widget_title">标题</label>\n            <div class="col-sm-10">\n                <input type="text" class="form-control" id="input_widget_title" ng-model="uwProps.title"\n                       placeholder="标题">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">控制按钮</label>\n            <div class="col-sm-4">\n                <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                               ng-model="uwProps.display.cardControls"><i></i>允许缩放</label>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">颜色</label>\n            <div class="col-sm-10">\n                <udp-theme-selector the-model="uwProps.display" customizable="true"></udp-theme-selector>\n            </div>\n        </div>\n        \x3c!--<div ng-if="uwProps.display.cardTheme===\'_CUSTOM\'">--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2">背景颜色</label>--\x3e\n        \x3c!--<div class="col-sm-2">--\x3e\n        \x3c!--<udp-color-picker ng-model="uwProps.display.backColor"></udp-color-picker>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2">字体颜色</label>--\x3e\n        \x3c!--<div class="col-sm-2">--\x3e\n        \x3c!--<udp-color-picker ng-model="uwProps.display.fontColor"></udp-color-picker>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    </div>\n</fieldset>\n\n'),e.put("app/modules/udp/widgets/widget-config-fields.html",'<table class="table op-param-table">\n    <thead>\n    <tr>\n        <th>名称</th>\n        <th>字段</th>\n        <th>标签</th>\n        <th>转换函数</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="field in $ctrl.options.fieldDefs track by $index">\n        <td>{{field.title}}</td>\n        <td>\n            <select chosen="{width:\'100%\'}" ng-model="$ctrl.props[field.name].field" class="form-control"\n                    ng-options="field.name as field.name +\' [\' + field.type + \']\' for field in $ctrl.datasetFields">\n            </select>\n        </td>\n        <td><input ng-model="$ctrl.props[field.name].label" class="form-control"></td>\n        <td><input ng-model="$ctrl.props[field.name].convertFn" class="form-control"></td>\n    </tr>\n    </tbody>\n</table>\n'),e.put("app/modules/udp/widgets/widget-config-format-rule.html",'<div class="form-inline">\n    <button type="button" class="btn btn-primary" ng-click="$ctrl.addRule()"><i\n            class="fa fa-plus"></i> 添加规则\n    </button>\n    <input type="text" ng-model="$ctrl.current.rule.expr" class="form-control code" style="width:24em;"\n           title="规则表达式" ng-if="$ctrl.current.rule">\n    <udp-theme-selector the-model="$ctrl.current.rule" customizable="true" title="主题颜色"\n                        ng-if="$ctrl.current.rule"></udp-theme-selector>\n</div>\n<div ng-transclude></div>\n<div class="list-group m-t" ng-show="$ctrl.rules.length>0" ui-sortable ng-model="$ctrl.rules">\n    <a ng-repeat="rule in $ctrl.rules track by $index"\n       class="list-group-item"\n       ng-class="rule.theme!==\'_CUSTOM\'?\'bg-\'+rule.theme:\'\'"\n       ng-style="rule.theme===\'_CUSTOM\' && {\'background-color\':rule.backColor,\'color\':rule.fontColor}"\n       ng-click="$ctrl.selectRule($index)">\n        <i class="fa fa-sort op-drag-handle text-muted"></i>\n        <span class="pull-right" ng-click="$ctrl.removeRule($index)"><i class="fa fa-remove text-muted"></i></span>\n        {{rule.expr || "&nbsp;&nbsp;"}}\n    </a>\n</div>\n'),e.put("app/modules/udp/widgets/widget-config-interaction.html",'<div class="form-group" ng-if="$ctrl.options.supports.indexOf(\'event\')>=0">\n    <label class="control-label col-sm-2" op-help-info="作业提交后触发一个事件，其它组件可以根据此事件进行数据刷新">触发事件</label>\n    <div class="col-sm-4">\n        <input type="text" class="form-control" ng-model="$ctrl.props.event">\n    </div>\n</div>\n<div class="form-group">\n    <label class="col-sm-2 control-label">{{$ctrl.options.label?$ctrl.options.label:\'执行操作\'}}</label>\n    <div class="col-sm-10 col-md-4">\n        <select ng-model="$ctrl.props.click" class="form-control">\n            <option value="">无</option>\n            <option value="pagelink">打开页面</option>\n            <option value="assignparam" ng-if="$ctrl.options.supports.indexOf(\'assignparam\')>=0">页面参数赋值</option>\n        </select>\n    </div>\n</div>\n<fieldset ng-if="$ctrl.props.click===\'pagelink\'">\n    <legend>页面设置</legend>\n    <udp-page-link-config props="$ctrl.props"></udp-page-link-config>\n</fieldset>\n<fieldset ng-if="$ctrl.props.click===\'assignparam\'">\n    <legend>参数设置</legend>\n    <div class="form-group">\n        <div class="col-sm-12">\n            <udp-page-params-config params-json="$ctrl.props.params"></udp-page-params-config>\n        </div>\n    </div>\n    \x3c!--<div class="form-group">--\x3e\n    \x3c!--<p class="col-sm-12">--\x3e\n    \x3c!--为页面的输入控件赋值，用于页面的组件联动。例如mater-detail结构页面，页面有列表组件（master）和表格组件（detail）。--\x3e\n    \x3c!--点击列表一个数据项后，修改表格的控件参数，同时触发一个事件refresh_data，表格设置根据refresh_data来刷新数据集。</p></div>--\x3e\n</fieldset>\n<div ng-if="$ctrl.varList.length>0 && $ctrl.props.click" class="row">\n    <div class="col-sm-10 col-sm-offset-2">\n        <p class="help-block">参数值支持以下变量</p>\n        <ul class="list-unstyled">\n            <li ng-repeat="var in $ctrl.varList track by $index">\n                <code class="large">{{var.name}}</code>\n                <span>{{var.desc}}</span>\n            </li>\n        </ul>\n    </div>\n</div>\n'),e.put("app/modules/udp/widgets/widget-config.html",'<div id="pd-widget-modal" ng-cloak>\n    <form class="form-horizontal" ng-submit="save()">\n        <div class="modal-header">\n            <h3 class="modal-title"><span class="label label-default pull-right">{{uwType}}</span>组件设置</h3>\n        </div>\n        <div class="modal-body" data-ng-include="uwidgetConfigTemplate"></div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-default" ng-click="cancel($event)">取消</button>\n            <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> 确定</button>\n        </div>\n    </form>\n</div>\n'),e.put("app/modules/udp/widgets/widget-props-viewer.html",'<pre ng-if="!$ctrl.editMode" style="height:320px">{{$ctrl.theModel|json}}</pre>\n<textarea ng-if="$ctrl.editMode"\n          ui-codemirror="{mode:\'javascript\', lineNumbers:true, theme:\'dracula\', lineWrapping:true}"\n          rows="6" id="input_query" ng-model="$ctrl.model.json"></textarea>\n<div class="m-t">\n    <button type="button" class="btn btn-link" ng-click="$ctrl.editMode=true;" ng-if="!$ctrl.editMode">修改</button>\n    <button type="button" class="btn btn-link" ng-click="$ctrl.editMode=false;" ng-if="$ctrl.editMode">取消</button>\n    <button type="button" class="btn btn-primary" ng-click="$ctrl.save()" ng-if="$ctrl.editMode">保存</button>\n</div>\n'),e.put("app/modules/udp/assets/templates/blank.html",'<div widget-layout="layout-row" id="ui-id-1" class="uwidget widget-layout" uw-type="layout-row">\n    <div widget-layout="layout-col" id="ui-id-2" class="uwidget widget-layout col-md-12" uw-type="layout-col"></div>\n</div>\n\n'),e.put("app/modules/udp/assets/templates/chart.html",'<div widget-layout="layout-row" class="uwidget widget-layout container-fluid uwtype-layout-row" uw-type="layout-row" id="w-15063896930691">\n    <div widget-layout="layout-col" class="uwidget widget-layout col-md-12 uwtype-layout-col col-sm-12" uw-type="layout-col" id="w-15063896930692">\n        <uwidget uw-type="linechart" id="w-15063896958183" class="uwidget uwtype-linechart"></uwidget>\n    </div>\n</div>'),e.put("app/modules/udp/assets/templates/default.html",'<div widget-layout="layout-row" id="ui-id-1" class="uwidget widget-layout" uw-type="layout-row" style="position: relative;">\n    <div widget-layout="layout-col" id="ui-id-2" class="uwidget widget-layout col-md-8" uw-type="layout-col" uw-props="{&quot;span&quot;:8}">\n        <uwidget uw-type="text-header" id="ui-id-3" class="uwidget uwtype-text-header">\n            <div class="uw-body ng-scope">\n                <div class="page-header">\n                    <h1>页面标题 <small>副标题</small></h1>\n                </div>\n            </div>\n        </uwidget>\n        <uwidget uw-type="text-p" id="ui-id-4" class="uwidget uwtype-text-p">\n            <div class="uw-body ng-scope">\n                <p contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis\n                    aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>\n            </div>\n        </uwidget>\n        <uwidget uw-type="barchart" id="ui-id-11" class="uwidget uwtype-barchart"></uwidget>\n        <uwidget uw-type="datatable" id="ui-id-9" class="uwidget uwtype-datatable"></uwidget>\n    </div>\n    <div widget-layout="layout-col" id="ui-id-6" class="uwidget widget-layout col-md-4" uw-type="layout-col" uw-props="{&quot;span&quot;:4}">\n        <uwidget uw-type="text-blockquote" id="ui-id-8" class="uwidget uwtype-text-blockquote">\n            <div class="uw-body ng-scope">\n                <blockquote>\n                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p> <small> Someone famous <cite title="Source Title">Source Title</cite> </small>                    </blockquote>\n            </div>\n        </uwidget>\n        <uwidget uw-type="linechart" id="ui-id-5" class="uwidget uwtype-linechart"></uwidget>\n        <uwidget uw-type="piechart" id="ui-id-10" class="uwidget uwtype-piechart"></uwidget>\n    </div>\n</div>'),e.put("app/modules/udp/assets/templates/table.html",'<div widget-layout="layout-row" class="uwidget widget-layout container-fluid uwtype-layout-row" uw-type="layout-row" id="w-15063895966881">\n    <div widget-layout="layout-col" class="uwidget widget-layout col-md-12 uwtype-layout-col col-sm-12" uw-type="layout-col" id="w-15063895966882">\n        <uwidget uw-type="datatable" id="w-15063896032063" class="uwidget uwtype-datatable"></uwidget>\n    </div>\n</div>'),e.put("app/modules/udp/widgets/barchart/barchart-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps" axis-options="axisOptions"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${S}\':\'所选数据点的序列名称\',\'${X}\':\'所选数据点的X值\',\'${Y}\':\'所选数据点的Y值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display"></udp-widget-config-chart-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">方向</label>\n                <div class="col-sm-10">\n                    <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                                   ng-model="uwProps.display.horizontal"><i></i>水平放置</label>\n                    <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                                   ng-model="uwProps.display.stack"><i></i>数据堆叠</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/button/button-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_label">标签</label>\n            <div class="col-sm-10">\n                <input class="form-control" ng-model="uwProps.label" id="f_label">\n            </div>\n        </div>\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2" for="f_name" op-help-info="此名称在页面内必须唯一">控件名称</label>--\x3e\n        \x3c!--<div class="col-sm-10">--\x3e\n        \x3c!--<input class="form-control" ng-model="uwProps.name" id="f_name">--\x3e\n        \x3c!--<p class="help-block">整个页面名称必须唯一</p>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2" for="f_e_args" op-help-info="事件参数">事件参数</label>--\x3e\n        \x3c!--<div class="col-sm-10">--\x3e\n        \x3c!--<input class="form-control" ng-model="uwProps.eventargs" id="f_e_args">--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_e_name" op-help-info="点击按钮触发某个事件，此事件可以被其它控件监听">点击产生事件</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="uwProps.interaction.event" id="f_e_name">\n            </div>\n        </div>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink,assignparam\'}"\n                                       param-vars="">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_style">样式</label>\n            <div class="col-sm-10">\n                <select class="form-control" ng-model="uwProps.display.css" id="f_style">\n                    <option value="btn-default">默认</option>\n                    <option value="btn-primary">Primary</option>\n                    <option value="btn-success">Success</option>\n                    <option value="btn-info">Info</option>\n                    <option value="btn-warning">Warning</option>\n                    <option value="btn-danger">Danger</option>\n                </select>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/calendar/calendar-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <table class="table op-param-table"\n               ng-init="params=[{name:\'title\',title:\'事件名称\'},{name:\'start\',title:\'开始时间\'}]">\n            <thead>\n            <tr>\n                <th>#</th>\n                <th>字段</th>\n                <th>操作</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat-start="param in ::params track by $index">\n                <td>{{param.title}}</td>\n                <td>\n                    <select class="form-control"\n                            ng-options="field.name as field.name +\' [\' + field.type + \']\' for field in selectedDs.fields"\n                            ng-model="uwProps.attrs[param.name].field">\n                    </select>\n                </td>\n                <td>\n                    <button type="button" class="btn"\n                            ng-class="{\'active\':visibleConverts[$index+\'\'],\'btn-default\':!uwProps.attrs[param.name].convertFn,\'btn-primary\':uwProps.attrs[param.name].convertFn}"\n                            ng-click="visibleConverts[$index+\'\']=!visibleConverts[$index+\'\']"><i\n                            class="fa fa-code"></i></button>\n                </td>\n            </tr>\n            <tr ng-repeat-end ng-show="visibleConverts[$index+\'\']">\n                <td colspan="4" style="border-top:0;padding:0;">\n                    <div class="bg b wrapper form-group">\n                        <label class="control-label">数据转换</label>\n                        <input type="text" class="form-control code" ng-model="uwProps.attrs[param.name].convertFn"/>\n                        <p class="help-block">允许输入一行javascript代码用于转换数据，可以通过<code>${字段名}</code>来调用值</p>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <udp-widget-config-display>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/clock/clock-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_interval">定时周期（秒）</label>\n            <div class="col-sm-4">\n                <input type="number" class="form-control" ng-model="uwProps.interval" id="f_interval">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_event">触发事件</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="uwProps.event" id="f_event">\n                <p class="help-block">事件必须唯一</p>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_initstate">初始状态</label>\n            <div class="col-sm-4">\n                <div class="checkbox">\n                    <label class="i-checks"><input type="checkbox" id="f_initstate"\n                                                   ng-model="uwProps.autoStart"><i></i>启动</label>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_style">样式</label>\n            <div class="col-sm-4">\n                <select ng-model="uwProps.display.style" class="form-control" id="f_style">\n                    <option value="switch">开关</option>\n                    <option value="button">按钮</option>\n                </select>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/datatable/datatable-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"\n                                   options="{allowServerPage:true,allowClientLimit:false}"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <div>\n            <ul ui-sortable="sortableOptions" ng-model="uwProps.fields" class="nav nav-pills">\n                \x3c!-- It seems adding class to li will make ui-sortable unstable --\x3e\n                <li ng-repeat="field in uwProps.fields track by $index" style="height:32px;">\n                    <span class="label op-label-normal"\n                          ng-class="current.index === $index?\'label-info\':\'label-default\'">\n                        <i class="fa fa-eye-slash" ng-if="field.hidden"></i>\n                        <i class="fa fa-bolt" ng-if="!field.field"></i>\n                        <a ng-click="current.index=$index">{{ field.label || field.field || \'&nbsp;&nbsp;&nbsp;\'}}</a>\n                        <a ng-click="removeField($index)">&times;</a>\n                    </span></li>\n            </ul>\n        </div>\n        <fieldset ng-if="current.index>=0" class="bg-light lt wrapper-sm">\n            <div class="form-group">\n                <label class="control-label col-sm-2">标签</label>\n                <div class="col-sm-4">\n                    <input class="form-control" ng-model="uwProps.fields[current.index].label"></div>\n                <div class="col-sm-4">\n                    <div class="checkbox">\n                        <label class="i-checks"><input type="checkbox"\n                                                       ng-model="uwProps.fields[current.index].hidden"><i></i>隐藏此列</label>\n                    </div>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">字段</label>\n                <div class="col-sm-10">\n                    <udp-dsfield-selector the-model="uwProps.fields[current.index]" fields="selectedDs.fields"\n                                          options="{converter:{kinds:\'js,str,link\',varTypes:\'field\'}}"></udp-dsfield-selector>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">默认内容</label>\n                <div class="col-sm-4">\n                    <input type="text" ng-model="uwProps.fields[current.index].defaultContent" class="form-control"/>\n                </div>\n            </div>\n            \x3c!--<div class="form-group">--\x3e\n            \x3c!--<label class="control-label col-sm-2">数据定义</label>--\x3e\n            \x3c!--<div class="col-sm-10">--\x3e\n            \x3c!--<udp-data-converter the-model="uwProps.fields[current.index].convertFn"--\x3e\n            \x3c!--options="{kinds:\'js,str,link\'}"></udp-data-converter>--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n        </fieldset>\n        <div class="m-t">\n            <button type="button" class="btn btn-default btn-sm" ng-click="removeAllFields()"><i\n                    class="fa fa-minus-square"></i> 删除所有字段\n            </button>\n            <button type="button" class="btn btn-primary btn-sm" ng-click="addField()"><i\n                    class="fa fa-plus-square-o"></i> 添加字段\n            </button>\n            <button type="button" class="btn btn-primary btn-sm" ng-click="addAllFields(selectedDs.fields)"><i\n                    class="fa fa-plus-square"></i> 添加所有字段\n            </button>\n        </div>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'assignparam\',label:\'点击行\'}"\n                                       param-vars="{\'${字段名}\':\'数据集的字段值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display options="{palette:false}">\n            <div class="form-group">\n                <label class="control-label col-sm-2" op-help-info="只支持px和vh单位，例如200px, 50vh">高度</label>\n                <div class="col-sm-4">\n                    <input type="text" class="form-control" ng-model="uwProps.display.height" placeholder="高度">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">边框和底色</label>\n                <div class="col-sm-10">\n                    <label class="i-checks checkbox-inline"><input type="checkbox" name="display_noborder"\n                                                                   ng-model="uwProps.display.noBorder"><i></i>无边框</label>\n                    <label class="i-checks checkbox-inline"><input type="checkbox" name="display_nogrid"\n                                                                   ng-model="uwProps.display.noGrid"><i></i>无网格</label>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">表格控件</label>\n                <div class="col-sm-10">\n                    <div class="checkbox">\n                        <label class="i-checks"><input type="checkbox" name="display_search"\n                                                       ng-model="uwProps.display.noSearch"><i></i>不显示过滤</label>\n                    </div>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">分页样式</label>\n                <div class="col-sm-4">\n                    <select class="form-control" ng-model="uwProps.display.pagination">\n                        <option value="none">不分页</option>\n                        <option value="default">默认（上页、页码、下页）</option>\n                        <option value="simple">超简（上页、下页）</option>\n                        <option value="full">简洁（首页、上页、下页、尾页），</option>\n                    </select>\n                </div>\n                <div class="checkbox-inline m-t-sm">\n                    <label class="i-checks"><input type="checkbox" name="display_pagesize"\n                                                   ng-model="uwProps.display.noPageSize"><i></i>不允许改变分页大小</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-retweet\'></i> 条件格式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="根据条件规则来显示不同的样式">规则样式</label>\n            <div class="col-sm-10">\n                <udp-widget-config-format-rule the-model="uwProps.display.rules"\n                                               formats="{theme:false,backColor:true,fontColor:false}">\n                    <p class="help-block"><code>${字段名}</code>可以用来调用字段值。</p>\n                </udp-widget-config-format-rule>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <udp-widget-props-viewer the-model="uwProps"></udp-widget-props-viewer>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/daterange/daterange-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基本设置</uib-tab-heading>\n        <div class="form-group">\n            \x3c!--<label class="control-label col-sm-2" op-help-info="名称可以为空，如果别的控件需要关联此控件的数据，就需要设置一个整个页面唯一的名称">名称</label>--\x3e\n            \x3c!--<div class="col-sm-10 col-md-4">--\x3e\n            \x3c!--<input class="form-control" ng-model="uwProps.name" id="f_name">--\x3e\n            \x3c!--</div>--\x3e\n            <label class="control-label col-sm-2" for="f_label">标签</label>\n            <div class="col-sm-10 col-md-4">\n                <div class="input-group">\n                    <span class="input-group-addon"><input type="checkbox" ng-model="uwProps.showlabel"></span>\n                    <input class="form-control" ng-model="uwProps.label" id="f_label"\n                           ng-disabled="!uwProps.showlabel">\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">开始时间参数</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="uwProps.nameofstart" id="f_nameofstart">\n            </div>\n            <label class="control-label col-sm-2">默认值</label>\n            <div class="col-sm-4">\n                <udp-data-converter the-model="uwProps.initvalofstart" options="{kinds:\'js\'}"></udp-data-converter>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">结束时间参数</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="uwProps.nameofend" id="f_nameofend">\n            </div>\n            <label class="control-label col-sm-2">默认值</label>\n            <div class="col-sm-4">\n                <udp-data-converter the-model="uwProps.initvalofend" options="{kinds:\'js\'}"></udp-data-converter>\n            </div>\n        </div>\n        <div class="form-group">\n            \x3c!--<label class="control-label col-sm-2">默认值</label>--\x3e\n            \x3c!--<div class="col-sm-4">--\x3e\n            \x3c!--<udp-data-converter the-model="uwProps.initval" options="{kinds:\'js,str\',varTypes:\'pageparam\'}"/>--\x3e\n            \x3c!--</div>--\x3e\n        </div>\n        <hr>\n        <div class="form-group">\n            <label class="control-label col-sm-2">日期格式</label>\n            <div class="col-sm-10 col-md-4">\n                <select class="form-control" ng-model="uwProps.formatter">\n                    <option value="YYYY-MM-DD">年-月-日</option>\n                    <option value="YYYY/MM/DD">年/月/日</option>\n                    <option value="YYYY-MM-DD HH:mm:ss">年-月-日 时:分:秒</option>\n                    <option value="YYYY/MM/DD HH:mm:ss">年/月/日 时:分:秒</option>\n                </select>\n            </div>\n            <label class="control-label col-sm-2">数据类型</label>\n            <div class="col-sm-4">\n                <select class="form-control" ng-model="uwProps.format">\n                    <option value="string">字符串</option>\n                    <option value="date">日期</option>\n                </select>\n            </div>\n        </div>\n        <div ng-if="uwProps.source===\'func\' && uwProps.control===\'select\'" class="form-group">\n            <label class="control-label col-sm-2">数据定义</label>\n            <div class="col-sm-10">\n                <udp-data-converter the-model="uwProps.sourcedef"\n                                    options="{kinds:\'js,yaml\',varTypes:\'pageparam\'}"></udp-data-converter>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_datelimit">限定时间范围</label>\n            <div class="col-sm-10 col-md-4">\n                <div class="input-group">\n                    <span class="input-group-addon"><input type="checkbox" ng-model="uwProps.datelimit.enabled"></span>\n                    <input type="number" class="form-control" ng-model="uwProps.datelimit.maxspan" id="f_datelimit"\n                           ng-disabled="!uwProps.datelimit.enabled">\n                    <div class="input-group-btn" ng-init="units=[\n                    {key:\'minutes\',label:\'分钟\'},{key:\'hours\',label:\'小时\'},\n                    {key:\'days\',label:\'天\'},{key:\'weeks\',label:\'周\'},\n                    {key:\'months\',label:\'月\'}]">\n                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                            {{uwProps.datelimit.maxunit || \'&nbsp;\'}}\n                            <span class="caret"></span></button>\n                        <ul class="dropdown-menu dropdown-menu-right">\n                            <li ng-repeat="unit in ::units track by $index"><a\n                                    ng-click="uwProps.datelimit.maxunit=unit.key;">{{unit.label}}</a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <hr>\n        <div class="form-group">\n            <label class="control-label col-sm-2">宽度（字符）</label>\n            <div class="col-sm-4">\n                <input type="number" ng-model="uwProps.width" class="form-control">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">样式</label>\n            <div class="col-sm-2">\n                <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                               ng-model="uwProps.readonly"><i></i>只读</label>\n            </div>\n            <div class="col-sm-4">\n                <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                               ng-model="uwProps.display.style"><i></i>Slider</label>\n            </div>\n            <div class="col-sm-4">\n                <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                               ng-model="uwProps.ranges"><i></i>显示预定义时间</label>\n            </div>\n        </div>\n    </uib-tab>\n\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/input/input-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基本设置</uib-tab-heading>\n        <uinput-setting-basic props="uwProps" options="{disableBinding:true}"></uinput-setting-basic>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <uinput-setting-interaction props="uwProps" xxng-if="uwProps.control===\'select\'"></uinput-setting-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_width">宽度</label>\n            <div class="col-sm-10">\n                <input class="form-control" ng-model="uwProps.display.width" id="f_width">\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/gauge/gauge-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps"\n                                axis-options="axisOptions"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display" options="{enableVisualMap:false}"\n                                             chart-type="\'gauge\'"></udp-widget-config-chart-display>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/job/job-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <job-selector the-model="uwProps.job.code" selected-job="selectedJob"></job-selector>\n        <udp-params-control-config the-model="uwProps.wparams" options="{labelByDefault:true}"\n                                   params-config="selectedJob.paramsConfig"></udp-params-control-config>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">提示</label>\n            <div class="col-sm-10">\n                <label class="i-checks checkbox-inline">\n                    <input type="checkbox"\n                           ng-model="uwProps.interaction.confirm"><i></i>\n                    提交前需确认</label>\n            </div>\n        </div>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{label:\'作业提交后\',supports:\'pagelink,assignparam,event\'}"\n                                       param-vars="{\'${JOB_ID}\':\'作业ID\',\'${JOB_INST_ID}\':\'作业实例ID\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">控件标签布局</label>\n                <div class="col-sm-4">\n                    <select class="form-control" ng-model="uwProps.display.formLayout">\n                        <option value="horizontal">水平</option>\n                        <option value="vertical">垂直</option>\n                        <option value="inline">内嵌</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group" ng-if="uwProps.display.formLayout!==\'inline\'">\n                <label class="control-label col-sm-2">列数</label>\n                <div class="col-sm-4">\n                    <input type="number" class="form-control" ng-model="uwProps.display.columns" min="1" max="3">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">按钮文字</label>\n                <div class="col-sm-4">\n                    <input type="text" class="form-control"\n                           ng-model="uwProps.display.okButtonLabel">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">按钮样式</label>\n                <div class="col-sm-10" ng-init="btnStyles=[\'default\',\'success\',\'danger\',\'primary\']">\n                    <label ng-repeat="style in btnStyles track by $index" style="width:4em;"\n                           class="m-r btn btn-{{::style}}" uib-btn-radio="style"\n                           ng-model="uwProps.display.okButtonStyle"><i class="fa fa-check"\n                                                                       ng-if="uwProps.display.okButtonStyle===style"></i>&nbsp;</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/kpi/kpi-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <uwidget uw-type="kpi" uw-props="{_sampleData:[{title:\'标题\',text:\'文字\',icon:\'fa-file\',detail:\'悬停提示\'}],\n        display:{css:uwProps.display.css||\'light\',rowNum:\'4\'}}"></uwidget>\n        <table class="table op-param-table"\n               ng-init="params=[\n               {name:\'text\',title:\'文字\'},\n               {name:\'title\',title:\'标题\'},\n               {name:\'icon\',title:\'图标\'},\n               {name:\'detail\',title:\'悬停提示\'}]">\n            <tbody>\n            <tr ng-repeat="param in ::params track by $index">\n                <td>{{::param.title}}</td>\n                <td>\n                    <div class="row">\n                        <div class="col-sm-10">\n                            <udp-dsfield-selector the-model="uwProps.fields[param.name]"\n                                                  fields="selectedDs.fields"></udp-dsfield-selector>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${字段名}\':\'字段值\'}">\n        </udp-widget-config-interaction>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="默认打开第几张卡片，第一张为1">默认打开</label>\n            <div class="col-sm-4">\n                <input type="number" class="form-control" ng-model="uwProps.interaction.defaultOpen">\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">颜色</label>\n            <div class="col-sm-10">\n                <udp-theme-selector the-model="uwProps.display" customizable="true"></udp-theme-selector>\n            </div>\n        </div>\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<div class="col-sm-4 col-sm-offset-2">--\x3e\n        \x3c!--<label class="i-checks checkbox-inline"><input type="checkbox" ng-model="uwProps.display.themeForFont"><i></i> 颜色用于字体</label>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="每行显示的卡片数量">每行数量</label>\n            <div class="col-sm-4">\n                \x3c!--<select ng-model="uwProps.display.rowNum" class="form-control"--\x3e\n                \x3c!--ng-options="val as val for val in [1,2,3,4,6,7,8,9,10,11,12]"></select>--\x3e\n                <input type="number" ng-model="uwProps.display.rowNum" class="form-control" min="1" max="12">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">图标</label>\n            <div class="col-sm-4">\n                <label class="checkbox-inline i-checks"><input type="checkbox"\n                                                               ng-model="uwProps.display.hideIcon"><i></i>不显示图标</label>\n            </div>\n        </div>\n        \x3c!--</udp-widget-config-display>--\x3e\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-retweet\'></i> 条件格式</uib-tab-heading>\n        <div class="form-group">\n            <p>根据条件规则来显示不同的样式</p>\n            <div>\n                <udp-widget-config-format-rule the-model="uwProps.display.rules"\n                                               rule-formats="{theme:true,backColor:true,fontColor:true}"></udp-widget-config-format-rule>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <udp-widget-props-viewer the-model="uwProps"></udp-widget-props-viewer>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/layout-col/layout-col-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="用于和导航、列表等控件联动显示页面">ID</label>\n            <div class="col-sm-10 col-md-4">\n                <input type="text" class="form-control" ng-model="uwProps.id">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">宽度</label>\n            <div class="col-sm-4">\n                \x3c!--<input type="number" class="form-control" ng-model="uwProps.span" min="1" max="12">--\x3e\n                <div class="input-group"><span class="input-group-addon"\n                                               op-help-info="一行均分12个单元格，占几个单元格。例如2为占1/6宽，3为占1/4宽，4为占1/3宽，12为全宽">按单元格</span>\n                    <select ng-model="uwProps.span" class="form-control"\n                            ng-options="grid as grid+\'格\' for grid in grids">\n                    </select>\n                </div>\n            </div>\n            <div class="col-sm-4">\n                <span class="pull-left control-label m-r">或</span>\n                <div class="input-group"><span class="input-group-addon">按占比</span>\n                    <select ng-model="uwProps.span" class="form-control">\n                        <option value="12">全宽（12格）</option>\n                        <option value="6">1/2宽（6格）</option>\n                        <option value="4">1/3宽（4格）</option>\n                        <option value="3">1/4宽（3格）</option>\n                        <option value="e5">1/5宽</option>\n                        <option value="2">1/6宽（2格）</option>\n                        <option value="e7">1/7宽</option>\n                        <option value="e8">1/8宽</option>\n                        <option value="e9">1/9宽</option>\n                        <option value="e10">1/10宽</option>\n                        <option value="e11">1/11宽</option>\n                        <option value="1">1/12宽（1格）</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">CSS样式</label>\n            <div class="col-sm-10">\n                <udp-css-editor the-model="uwProps.css"></udp-css-editor>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/layout-row/layout-row-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="显示样式">\n        <div class="form-group">\n            <label class="control-label col-sm-2">样式CSS</label>\n            <div class="col-sm-10">\n                <input type="text" class="form-control" ng-model="uwProps.css">\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/linechart/linechart-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps"\n                                axis-options="axisOptions"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${S}\':\'所选数据点的序列名称\',\'${X}\':\'所选数据点的X值\',\'${Y}\':\'所选数据点的Y值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display" options="{enableVisualMap:false}"></udp-widget-config-chart-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">坐标轴</label>\n                <div class="col-sm-4 col-md-2">\n                    <label class="i-checks checkbox-inline">\n                        <input type="checkbox" ng-model="uwProps.display.rangeSlider"><i></i>允许X轴缩放\n                    </label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <udp-widget-props-viewer the-model="uwProps"></udp-widget-props-viewer>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/layout-float/layout-float-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="用于和导航、列表等控件联动显示页面">ID</label>\n            <div class="col-sm-10 col-md-4">\n                <input type="text" class="form-control" ng-model="uwProps.id">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">图层序号</label>\n            <div class="col-sm-4">\n                <input type="number" class="form-control" ng-model="uwProps.display.zindex">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">用户操作</label>\n            <div class="col-sm-10">\n                <label class="checkbox-inline i-checks"><input type="checkbox" ng-model="uwProps.display.resizable"><i></i> 允许用户拉伸 </label>\n                <label class="checkbox-inline i-checks"><input type="checkbox" ng-model="uwProps.display.draggable"><i></i> 允许用户拖拽 </label>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">最大宽度</label>\n            <div class="col-sm-4">\n                <input type="text" class="form-control" ng-model="uwProps.display.maxWidth">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">最大高度</label>\n            <div class="col-sm-4">\n                <input type="text" class="form-control" ng-model="uwProps.display.maxHeight">\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">CSS样式</label>\n            <div class="col-sm-10">\n                <udp-css-editor the-model="uwProps.css"></udp-css-editor>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/map/map-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">地图类型</label>\n            <div class="col-sm-12 col-md-4">\n                <select class="form-control" ng-model="uwProps.display.mapType"\n                        ng-options="type.name as type.title for type in mapTypes"/>\n            </div>\n        </div>\n        <udp-widget-config-axis uw-props="uwProps" chart-type="map" axis-options="axisOptions"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${S}\':\'所选数据点的序列名称\',\'${X}\':\'所选数据点的X值\',\'${Y}\':\'所选数据点的Y值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display"\n                                             options="{enableVisualMap:true}"></udp-widget-config-chart-display>\n            \x3c!--<div class="form-group">--\x3e\n            \x3c!--<label class="control-label col-sm-2">地图尺寸</label>--\x3e\n            \x3c!--<div class="col-sm-4">--\x3e\n            \x3c!--<input type="text" class="form-control" ng-model="uwProps.display.height" placeholder="高度">--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n            <div class="form-group">\n                <label class="control-label col-sm-2">其它</label>\n                <div class="col-sm-10">\n                    <label class="checkbox-inline i-checks"><input type="checkbox"\n                                                                   ng-model="uwProps.display.showLabel"><i></i>显示地名</label>\n                    <label class="checkbox-inline i-checks"><input type="checkbox"\n                                                                   ng-model="uwProps.display.zoomable"><i></i>鼠标缩放</label>\n                    \x3c!--<div class="checkbox">--\x3e\n                    \x3c!--<label class="i-checks"><input type="checkbox"--\x3e\n                    \x3c!--ng-model="uwProps.display.visualMap"><i></i>数据鼠标缩放</label>--\x3e\n                    \x3c!--</div>--\x3e\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <udp-widget-props-viewer the-model="uwProps"></udp-widget-props-viewer>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/nav/nav-widget-config.html",'<uib-tabset class="tab-container" ng-init="uwProps.items=uwProps.items||[];uwProps.display=uwProps.display||{}">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基本设置</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="可以为空。如果需要动态打开某个指定的菜单项，需要为设置此标识">组件标识</label>\n            <div class="col-sm-4">\n                <input type="text" ng-model="uwProps.key" class="form-control">\n            </div>\n        </div>\n        <div>\n            <ul class="nav" ng-class="uwProps.display.style===\'pills\'?\'nav-pills\':\'nav-tabs\'"\n                ui-sortable="{handle:\'.op-drag-handle\'}" ui-sortable-stop="sortStop"\n                ng-model="uwProps.items">\n                <li ng-repeat="item in uwProps.items track by $index" ng-class="{active:indexInEdit===$index}">\n                    <a ng-click="selectNavItem($index)"><i class="fa fa-sort text-muted op-drag-handle"></i>\n                        {{item.title}}</a>\n                </li>\n                <li class="pull-right text-primary">\n                    <a ng-click="addNavItem()"><i\n                            class="fa fa-plus"></i> 新增菜单项 </a>\n                </li>\n            </ul>\n        </div>\n        <div class="wrapper-sm">\n            <div class="form-group">\n                <label class="control-label col-sm-2"\n                       op-help-info="可以为空。如果需要动态打开某个指定的菜单项，需要为设置此标识">标识</label>\n                <div class="col-sm-4">\n                    <input type="text" ng-model="itemInEdit.key" class="form-control">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">链接页面</label>\n                <div class="col-sm-10">\n                    <udp-page-selector page-id="itemInEdit.link.pageId" on-change="onPageSelectorChange"\n                                       excluded="[currentPageId]"></udp-page-selector>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">显示标签</label>\n                <div class="col-sm-4">\n                    <input type="text" ng-model="itemInEdit.title" class="form-control">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">页面参数</label>\n                <div class="col-sm-10">\n                    <udp-page-params-config params-json="itemInEdit.link.params"></udp-page-params-config>\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="col-sm-10 col-sm-offset-2">\n                    <button type="button" class="btn btn-default" ng-click="deleteNavItem(indexInEdit)"><i\n                            class="fa fa-remove"></i> 删除菜单项\n                    </button>\n                </div>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            \x3c!--<div class="form-group">--\x3e\n            \x3c!--<label class="control-label col-sm-2">页面链接</label>--\x3e\n            \x3c!--<div class="col-sm-4">--\x3e\n            \x3c!--<label class="i-checks checkbox-inline"><input type="checkbox"--\x3e\n            \x3c!--ng-model="uwProps.display.nocache"><i></i>禁用缓存，每次点击链接都刷新</label>--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n            <div class="form-group">\n                <label class="control-label col-sm-2">风格</label>\n                <div class="col-sm-4">\n                    <select class="form-control" ng-model="uwProps.display.style">\n                        <option value="tabs">Tab</option>\n                        <option value="pills">Pill</option>\n                    </select>\n                </div>\n            </div>\n        </udp-widget-config-display>\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<label class="control-label col-sm-2">内容区域</label>--\x3e\n        \x3c!--<div class="col-sm-10">--\x3e\n        \x3c!--<input type="text" class="form-control" ng-model="uwProps.display.target">--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/list/list-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <div class="js-sample">\n            <div class="list-group" style="width:200px">\n                <div class="list-group-item">\n                    <span class="badge">徽标</span>\n                    <div class="pull-left bg-light text-center img-circle m-r" xstyle="width:48px">\n                        <i class="fa fa-3x fa-info-circle"></i>\n                    </div>\n                    <h4 class="list-group-item-heading">标题</h4>\n                    <p class="list-group-item-text">文字</p>\n                </div>\n            </div>\n        </div>\n        <table class="table op-param-table"\n               ng-init="params=[{name:\'title\',title:\'标题\'},\n               {name:\'text\',title:\'文字\'},\n               {name:\'badge\',title:\'徽标\'},\n               {name:\'icon\',title:\'图标\'}]">\n            <thead>\n            <tr>\n                <th></th>\n                <th>字段</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="param in ::params track by $index">\n                <td>{{::param.title}}</td>\n                <td>\n                    <udp-dsfield-selector the-model="uwProps.fields[param.name]"\n                                          fields="selectedDs.fields"></udp-dsfield-selector>\n\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="col-sm-2 control-label">点击产生事件</label>\n            <div class="col-sm-10 col-md-4">\n                <div class="input-group">\n                    <span class="input-group-addon"><input type="checkbox"\n                                                           ng-model="uwProps.interaction.fireEvent"></span>\n                    <input type="text" ng-model="uwProps.interaction.event" class="form-control"\n                           ng-disabled="!uwProps.interaction.fireEvent">\n                </div>\n            </div>\n        </div>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink,assignparam\'}"\n                                       param-vars="{\'${字段名}\':\'数据集的字段值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">过滤</label>\n                <div class="col-sm-10">\n                    <label class="i-checks checkbox-inline"><input type="checkbox"\n                                                                   ng-model="uwProps.display.filter"><i></i>\n                        显示过滤</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/param/param-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基本设置</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="需要设置一个整个页面范围内唯一的名称">名称</label>\n            <div class="col-sm-10 col-md-4">\n                <input class="form-control" ng-model="uwProps.name" id="f_name">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">数据</label>\n            <div class="col-sm-10">\n                <udp-data-converter the-model="uwProps.data" options="{kinds:\'js,yaml\',varTypes:\'pageparam\'}"/>\n            </div>\n        </div>\n        <div class="alert alert-info">\n            页面参数控件可以从函数、数据集中获取数据，保存在一个页面范围的变量里面。其它控件可以通过<code>${@.参数控件名称.参数属性}</code>的形式来获取数据。\n            在浏览模式下，参数控件不可见。\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/percent/percent-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <uwidget uw-type="percent" uw-props="{_sampleData:[{title:\'65\',text:\'文字\'}],\n        display:{css:uwProps.display.css||\'light\',rowNum:\'4\'}}"></uwidget>\n        <table class="table op-param-table"\n               ng-init="params=[\n               {name:\'text\',title:\'文字\'},\n               {name:\'title\',title:\'标题\'}]">\n            <tbody>\n            <tr ng-repeat="param in ::params track by $index">\n                <td>{{::param.title}}</td>\n                <td>\n                    <div class="row">\n                        <div class="col-sm-10">\n                            <udp-dsfield-selector the-model="uwProps.fields[param.name]"\n                                                  fields="selectedDs.fields"></udp-dsfield-selector>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${字段名}\':\'字段值\'}">\n        </udp-widget-config-interaction>\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="默认打开第几张卡片，第一张为1">默认打开</label>\n            <div class="col-sm-4">\n                <input type="number" class="form-control" ng-model="uwProps.interaction.defaultOpen">\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2">颜色</label>\n            <div class="col-sm-10">\n                <udp-theme-selector the-model="uwProps.display" customizable="true"></udp-theme-selector>\n            </div>\n        </div>\n        \x3c!--<div class="form-group">--\x3e\n        \x3c!--<div class="col-sm-4 col-sm-offset-2">--\x3e\n        \x3c!--<label class="i-checks checkbox-inline"><input type="checkbox" ng-model="uwProps.display.themeForFont"><i></i> 颜色用于字体</label>--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n        <div class="form-group">\n            <label class="control-label col-sm-2" op-help-info="每行显示的卡片数量">每行数量</label>\n            <div class="col-sm-4">\n                \x3c!--<select ng-model="uwProps.display.rowNum" class="form-control"--\x3e\n                \x3c!--ng-options="val as val for val in [1,2,3,4,6,7,8,9,10,11,12]"></select>--\x3e\n                <input type="number" ng-model="uwProps.display.rowNum" class="form-control" min="1" max="12">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">图标</label>\n            <div class="col-sm-4">\n                <label class="checkbox-inline i-checks"><input type="checkbox"\n                                                               ng-model="uwProps.display.hideIcon"><i></i>不显示图标</label>\n            </div>\n        </div>\n        \x3c!--</udp-widget-config-display>--\x3e\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-retweet\'></i> 条件格式</uib-tab-heading>\n        <div class="form-group">\n            <p>根据条件规则来显示不同的样式</p>\n            <div>\n                <udp-widget-config-format-rule the-model="uwProps.display.rules"\n                                               rule-formats="{theme:true,backColor:true,fontColor:true}"></udp-widget-config-format-rule>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <udp-widget-props-viewer the-model="uwProps"></udp-widget-props-viewer>\n    </uib-tab>\n</uib-tabset>'),e.put("app/modules/udp/widgets/percent/percent-widget-config_echarts.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps" axis-options="axisOptions" chart-type="pie"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${S}\':\'所选数据点的序列名称\',\'${X}\':\'所选数据点的标签\',\'${Y}\':\'所选数据点的Y值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display"></udp-widget-config-chart-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">图形格式</label>\n                <div class="col-sm-10">\n                    <label class="radio-inline i-checks"><input type="radio" value="pie"\n                                                                ng-model="uwProps.display.chart"><i></i>饼图</label>\n                    <label class="radio-inline i-checks"><input type="radio" value="doughnut"\n                                                                ng-model="uwProps.display.chart"><i></i>甜甜圈</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/piechart/piechart-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab heading="数据设定">\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab heading="字段设定">\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps" axis-options="axisOptions" chart-type="pie"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-random\'></i> 交互设定</uib-tab-heading>\n        <udp-widget-config-interaction the-model="uwProps.interaction"\n                                       options="{supports:\'pagelink\'}"\n                                       param-vars="{\'${S}\':\'所选数据点的序列名称\',\'${X}\':\'所选数据点的标签\',\'${Y}\':\'所选数据点的Y值\'}">\n        </udp-widget-config-interaction>\n    </uib-tab>\n    <uib-tab heading="显示样式">\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            <udp-widget-config-chart-display ng-model="uwProps.display"></udp-widget-config-chart-display>\n            <div class="form-group">\n                <label class="control-label col-sm-2">图形格式</label>\n                <div class="col-sm-10">\n                    <label class="radio-inline i-checks"><input type="radio" value="pie"\n                                                                ng-model="uwProps.display.chart"><i></i>饼图</label>\n                    <label class="radio-inline i-checks"><input type="radio" value="doughnut"\n                                                                ng-model="uwProps.display.chart"><i></i>甜甜圈</label>\n                </div>\n            </div>\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n\n'),e.put("app/modules/udp/widgets/radarchart/radarchart-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-axis uw-props="uwProps" axis-options="axisOptions"\n                                fields="selectedDs.fields"></udp-widget-config-axis>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display>\n            \x3c!--<div class="form-group">--\x3e\n                \x3c!--<label class="control-label col-sm-2">线宽</label>--\x3e\n                \x3c!--<div class="col-sm-2">--\x3e\n                    \x3c!--<input type="number" class="form-control" ng-model="uwProps.display.borderWidth">--\x3e\n                \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--<div class="form-group">--\x3e\n                \x3c!--<label class="control-label col-sm-2">数据点大小</label>--\x3e\n                \x3c!--<div class="col-sm-2">--\x3e\n                    \x3c!--<input type="number" class="form-control" ng-model="uwProps.display.pointRadius">--\x3e\n                \x3c!--</div>--\x3e\n            \x3c!--</div>--\x3e\n        </udp-widget-config-display>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/route/route-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-database\'></i> 数据设定</uib-tab-heading>\n        <udp-widget-config-dataset props="uwProps.dataset" selected-ds="selectedDs"></udp-widget-config-dataset>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-list-ul\'></i> 字段设定</uib-tab-heading>\n        <udp-widget-config-fields props="uwProps._fields" dataset-fields="selectedDs.fields" options="fieldOptions"></udp-widget-config-fields>\n    </uib-tab>\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-paint-brush\'></i> 显示样式</uib-tab-heading>\n        <udp-widget-config-display></udp-widget-config-display>\n        <div class="form-group">\n            <label class="control-label col-sm-2">地图类型</label>\n            <div class="col-sm-10">\n                <select class="form-control" ng-model="uwProps.display.mapType"\n                        ng-options="type.name as type.title for type in mapTypes"/>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2">地图尺寸</label>\n            <div class="col-sm-5">\n                <input type="text" class="form-control" ng-model="uwProps.display.width" placeholder="宽度">\n            </div>\n            <div class="col-sm-5">\n                <input type="text" class="form-control" ng-model="uwProps.display.height" placeholder="高度">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_cardmode">其它</label>\n            <div class="col-sm-10">\n                \x3c!--<div class="checkbox">--\x3e\n                \x3c!--<label class="i-checks"><input type="checkbox" id="f_cardmode"--\x3e\n                \x3c!--ng-model="uwProps.display.showLabel"><i></i>显示地名</label>--\x3e\n                \x3c!--</div>--\x3e\n                <div class="checkbox">\n                    <label class="i-checks"><input type="checkbox" id="f_cardmode"\n                                                   ng-model="uwProps.display.zoomable"><i></i>鼠标缩放</label>\n                </div>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n'),e.put("app/modules/udp/widgets/timer/timer-widget-config.html",'<uib-tabset class="tab-container">\n    <uib-tab>\n        <uib-tab-heading><i class=\'fa fa-cog\'></i> 基础设定</uib-tab-heading>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_name">名称</label>\n            <div class="col-sm-4">\n                <input type="text" class="form-control" ng-model="uwProps.name" id="f_name">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_interval">定时周期（秒）</label>\n            <div class="col-sm-4">\n                <input type="number" class="form-control" ng-model="uwProps.interval" id="f_interval">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_event"\n                   op-help-info="输入一个唯一的事件名称，例如refresh_data。在每个定时周期，定时器会广播此事件，其它控件可以接收此事件来更新数据">触发事件</label>\n            <div class="col-sm-4">\n                <input class="form-control" ng-model="uwProps.eventbytimer" id="f_event">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_initstate">初始状态</label>\n            <div class="col-sm-4">\n                <div class="checkbox">\n                    <label class="i-checks"><input type="checkbox" id="f_initstate"\n                                                   ng-model="uwProps.autoStart"><i></i>启动</label>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label col-sm-2" for="f_style">样式</label>\n            <div class="col-sm-4">\n                <select ng-model="uwProps.display.style" class="form-control" id="f_style">\n                    <option value="switch">开关</option>\n                    <option value="button">按钮</option>\n                    <option value="hidden">隐藏</option>\n                </select>\n            </div>\n        </div>\n    </uib-tab>\n    <uib-tab heading="属性代码">\n        <pre>{{uwProps|json}}</pre>\n    </uib-tab>\n</uib-tabset>\n')}])}();